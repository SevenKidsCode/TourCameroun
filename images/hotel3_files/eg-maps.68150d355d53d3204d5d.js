/*! For license information please see eg-maps.68150d355d53d3204d5d.js.LICENSE.txt */
(self.webpackChunkblossom_flex_ui=self.webpackChunkblossom_flex_ui||[]).push([[7687],{96435:function(e,t,n){("undefined"!=typeof window?window:n.g).egmapsBase=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t){e.exports=("undefined"!=typeof window?window:n.g)["@eg-maps/commons"]},function(e,t,n){var r=n(2);function i(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(o,this,t),this.length=this._features.length}function o(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}e.exports=i,i.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new r(this._pbf,t,this.extent,this._keys,this._values)}},function(e,t,n){var r=n(6);function i(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(o,this,t)}function o(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function a(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],r+=((n=e[a]).x-t.x)*(t.y+n.y);return r}e.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,o=0,a=0,s=0,u=[];e.pos<n;){if(o<=0){var c=e.readVarint();i=7&c,o=c>>3}if(o--,1===i||2===i)a+=e.readSVarint(),s+=e.readSVarint(),1===i&&(t&&u.push(t),t=[]),t.push(new r(a,s));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&u.push(t),u},i.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,c=-1/0;e.pos<t;){if(r<=0){var l=e.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,c]},i.prototype.toGeoJSON=function(e,t,n){var r,o,s=this.extent*Math.pow(2,n),u=this.extent*e,c=this.extent*t,l=this.loadGeometry(),f=i.types[this.type];function h(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+c)/s;e[t]=[360*(n.x+u)/s-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(r=0;r<l.length;r++)d[r]=l[r][0];h(l=d);break;case 2:for(r=0;r<l.length;r++)h(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var s=a(e[o]);0!==s&&(void 0===r&&(r=s<0),r===s<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(o=0;o<l[r].length;o++)h(l[r][o])}1===l.length?l=l[0]:f="Multi"+f;var p={type:"Feature",geometry:{type:f,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p}},function(e,t,n){e.exports.VectorTile=n(5),e.exports.VectorTileFeature=n(2),e.exports.VectorTileLayer=n(1)},function(e,t,n){e.exports=i;var r=n(7);function i(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(e){return e.type===i.Bytes?e.readVarint()+e.pos:e.pos+1}function s(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function u(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function c(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function l(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function f(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function d(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function p(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function v(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function y(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function m(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function g(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function _(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=g(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=b(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=g(this.buf,this.pos)+4294967296*g(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=g(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return s(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return s(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return s(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return s(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return s(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return s(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&o?function(e,t,n){return o.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,u=e[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)<=127&&(c=null):3===l?(o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&((c=(15&u)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===l&&(o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==i.Bytes)return e.push(this.readVarint(t));var n=a(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==i.Bytes)return e.push(this.readSVarint());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==i.Bytes)return e.push(this.readBoolean());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==i.Bytes)return e.push(this.readFloat());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==i.Bytes)return e.push(this.readDouble());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed32());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed32());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed64());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed64());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===i.Varint)for(;this.buf[this.pos++]>127;);else if(t===i.Bytes)this.pos=this.readVarint()+this.pos;else if(t===i.Fixed32)this.pos+=4;else{if(t!==i.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),_(this.buf,-1&e,this.pos),_(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),_(this.buf,-1&e,this.pos),_(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&u(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),r.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),r.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&u(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,i.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,c,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,l,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,d,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,f,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,h,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,p,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,v,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,y,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,m,t)},writeBytesField:function(e,t){this.writeTag(e,i.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,i.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,i.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,i.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},function(e,t,n){var r=n(1);function i(e,t,n){if(3===e){var i=new r(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}e.exports=function(e,t){this.layers=e.readFields(i,{},t)}},function(e,t,n){function r(e,t){this.x=e,this.y=t}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*v}},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"BaseMap",(function(){return ki})),n.d(t,"TilesReader",(function(){return ve})),n.d(t,"TilesLoader",(function(){return Rt})),n.d(t,"AvailabilityService",(function(){return xi})),n.d(t,"Stay",(function(){return ji})),n.d(t,"RoomOccupancy",(function(){return Ri})),n.d(t,"ClusterService",(function(){return Vi})),n.d(t,"KeyboardListeners",(function(){return Oi})),n(0);var i=egmapsCommons.constants,o=i.clustering_type,a=i.clustering_type_supercluster,s=i.clustering_type_none,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.configHelper=t}var t,n;return t=e,(n=[{key:"buildClusterService",value:function(e){var t=this.configHelper.subConfig(e),n=t[o];switch(n){case a:if("undefined"!=typeof egmapsClusterSupercluster)return new egmapsClusterSupercluster.SuperCluster(this.configHelper,t);throw new Error("You need to load '@eg-maps/cluster-supercluster' to use this clustering solution");case s:return;default:throw new Error("Unknown cluster type ".concat(n))}}}])&&r(t.prototype,n),e}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}var b=egmapsCommons,k=b.constants,w=b.Utils,x=k.status_unknown,C=k.type_destination,P=k.type_property,L=k.type_landmark,M=k.type_cluster,F=w.roundLatLng,I=w.listHashKeysSorted,E=w.arrayEquals,S=function(){function e(t,n){m(this,e),this.id=t,this.type=n,this.data=[void 0,void 0],this._clean()}return _(e,[{key:"_clean",value:function(){this.marker=void 0,this.markerType=void 0,this.popupContent=void 0,this.visible=!1,this._highlighted=!1,this._hashKeys=void 0}},{key:"hashKeys",get:function(){return void 0===this._hashKeys&&(this._hashKeys=I(this.status,this._highlighted,this.qualifiers)),this._hashKeys}},{key:"importUserData",value:function(e){return this._importData(e,0)}},{key:"importTileData",value:function(e){return this._importData(e,1)}},{key:"removeTileData",value:function(){return this._removeData(1)}},{key:"removeUserData",value:function(){return this._removeData(0)}},{key:"mergeUserData",value:function(e){return this._mergeData(e,0)}},{key:"mergeTileData",value:function(e){return this._mergeData(e,1)}},{key:"_mergeData",value:function(e,t){e&&Object.assign(this.data[t],e),this._hashKeys=void 0}},{key:"toUserData",value:function(){return this._toData(0)}},{key:"toTileData",value:function(){return this._toData(1)}},{key:"toData",value:function(){return Object.assign(Object.assign({},this.toTileData()),this.toUserData())}},{key:"hasUserData",value:function(){return this._hasData(0)}},{key:"hasTileData",value:function(){return this._hasData(1)}},{key:"_hasData",value:function(e){var t=this.data[e];return void 0!==t&&Object.keys(t).length>0}},{key:"defined",get:function(){return!!this.data.find((function(e){return e}))}},{key:"userData",get:function(){return this.data[0]},set:function(e){this.data[0]=e}},{key:"tileData",get:function(){return this.data[1]},set:function(e){this.data[1]=e}},{key:"latLng",get:function(){return this._getFirstDefined("latLng")}},{key:"highlighted",get:function(){return this._highlighted},set:function(e){this._highlighted=e,this._hashKeys=void 0}},{key:"_getFirstDefined",value:function(e){return(this.data.find((function(t){return(t||{})[e]}))||{})[e]}}]),e}(),O=function(e){h(n,e);var t=p(n);function n(e,r){return m(this,n),t.call(this,e,r)}return _(n,[{key:"_assign",value:function(e,t,n){void 0!==n&&(e[t]=n)}},{key:"_importData",value:function(e,t){e&&(void 0===this.data[t]&&(this.data[t]={}),this._assign(this.data[t],"status",e.status),this._assign(this.data[t],"name",e.name),this._assign(this.data[t],"qualifiers",e.qualifiers),this._assign(this.data[t],"textLabel",e.textLabel),this._assign(this.data[t],"price",e.price),this._assign(this.data[t],"latLng",F([e.lat,e.lng])),this._assign(this.data[t],"score",e.score),this._hashKeys=void 0)}},{key:"_removeData",value:function(e){delete this.data[e],this._clean()}},{key:"_toData",value:function(e){var t=this.data[e];return t?{id:this.id,type:this.type,status:t.status||x,qualifiers:t.qualifiers,textLabel:t.textLabel,name:t.name,price:t.price,lat:t.latLng[0],lng:t.latLng[1],score:t.score}:{}}},{key:"isDataChanged",value:function(e){return!(!e||this._sameStatus(this.status,e.status)&&this._samePrice(this.price,e.price)&&E(this.qualifiers,e.qualifiers,!1)&&this.textLabel===e.textLabel)}},{key:"_sameStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;return e===t}},{key:"_samePrice",value:function(e,t){return e===t||this._noPrice(e)&&this._noPrice(t)}},{key:"_noPrice",value:function(e){return!e||""===e}},{key:"status",get:function(){return this._getFirstDefined("status")||x}},{key:"qualifiers",get:function(){return this._getFirstDefined("qualifiers")}},{key:"textLabel",get:function(){return this._getFirstDefined("textLabel")}},{key:"name",get:function(){return this._getFirstDefined("name")}},{key:"price",get:function(){return this._getFirstDefined("price")}},{key:"score",get:function(){return this._getFirstDefined("score")}}]),n}(S),D=function(e){h(n,e);var t=p(n);function n(e){return m(this,n),t.call(this,e,M)}return _(n,[{key:"_clean",value:function(){f(y(n.prototype),"_clean",this).call(this),this.visible=!0}},{key:"_importData",value:function(e,t){e&&(this.data[t]={children:e.children,minPrice:e.minPrice,latLng:F([e.lat,e.lng])},this._hashKeys=void 0)}},{key:"_removeData",value:function(e){delete this.data[e]}},{key:"_toData",value:function(e){var t=this.data[e];return t?{id:this.id,type:this.type,children:t.children,minPrice:t.minPrice,lat:t.latLng[0],lng:t.latLng[1]}:{}}},{key:"children",get:function(){return this._getFirstDefined("children")}},{key:"minPrice",get:function(){return this._getFirstDefined("minPrice")}}]),n}(S),T=function(){function e(t,n){m(this,e),this.type=t,this.newInstance=n,this.index=new Map,this._data=[],this.inBounds=[]}return _(e,[{key:"data",get:function(){return this._data.filter((function(e){return e&&e.defined}))}},{key:"contains",value:function(e){return!!this.find(e)}},{key:"find",value:function(e){var t=this.index.get(e);if(t>-1)return this._data[t]&&this._data[t].defined?this._data[t]:void 0}},{key:"save",value:function(e){if(e.type===this.type){var t=this.index.get(e.id);t>-1?this._data[t]=e:(this.index.set(e.id,this._data.length),this._data.push(e))}}},{key:"delete",value:function(e){if(e.type===this.type){var t=this.index.get(e.id);t>-1&&(this._data[t]=void 0)}}},{key:"clearAll",value:function(){this._data=[],this.inBounds=[],this.index=new Map}}]),e}(),A=function(){function e(){var t;m(this,e),this._repositories=(l(t={},P,new T(P,(function(e){return new O(e.id,P)}))),l(t,L,new T(L,(function(e){return new O(e.id,L)}))),l(t,C,new T(C,(function(e){return new O(e.id,C)}))),l(t,M,new T(M,(function(e){return new D(e.id)}))),t)}return _(e,[{key:"repository",value:function(e){return this._repositories[e]}},{key:"all",value:function(){var e=[];return Object.values(this._repositories).forEach((function(t){return e=e.concat(t.data)})),e}},{key:"upsertUserData",value:function(e){return this._upsert(e,"importUserData")}},{key:"upsertTileData",value:function(e){return this._upsert(e,"importTileData")}},{key:"insertTileData",value:function(e){if(!this.repository(e.type).find(e.id))return this._upsert(e,"importTileData")}},{key:"_upsert",value:function(e,t){var n=this.repository(e.type).find(e.id);return n||(n=this.repository(e.type).newInstance(e)),n[t](e),this.repository(n.type).save(n),n}},{key:"deleteTileData",value:function(e){return this._delete(e,"removeTileData")}},{key:"_delete",value:function(e,t){var n=this.repository(e.type).find(e.id);return n&&(n[t](e),n.defined||this.repository(e.type).delete(e)),n}}]),e}();function B(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}var q=egmapsCommons,z=q.Utils,Z=q.constants,U=q.ttlCache,K=Z.cfg_routes,W=Z.routes_eg_distances,G=Z.routes_eg_distances_cache_ms,X=Z.event_type_route_changed,Y=Z.event_type_route_changed_routes_with_distance,$=Z.event_type_route_changed_action,Q=Z.event_type_route_changed_action_show,J=Z.event_type_route_changed_action_hide,ee=Z.route_destination_id_and_type,te=Z.route_transport_mode,ne=Z.route_origin,re=Z.route_destination,ie=Z.route_distance,oe=Z.route_line_style_none,ae=function(){function e(t,n,r){N(this,e),this.id=z.randomAlphaNumeric(),this.origin=t,this.destination=n,this.mode=r}return H(e,[{key:"toString",value:function(){return"Route: {origin:'".concat(this.origin.id,"',destination:").concat(this.destination.id,",mode:").concat(this.mode,"}")}},{key:"originLatLng",value:function(){return{lat:this.origin.latLng[0],lng:this.origin.latLng[1]}}},{key:"destinationLatLng",value:function(){return{lat:this.destination.latLng[0],lng:this.destination.latLng[1]}}}]),e}(),se=function(){function e(t){var n=t.configHelper,r=t.findFeature,i=t.pushEvent,o=t.addRouteOnMap,a=t.removeRouteOnMap;N(this,e),this.logger=n.logger("RoutesRepository"),this.egDistances=n.readParam("".concat(K,",").concat(W)),this.routeLineStyleByDistanceMode=n.routeLineStyleByDistanceMode(),this.findFeature=r,this.pushEvent=i,this.addRouteOnMap=o,this.removeRouteOnMap=a,this.routes=[],this.routeDestinations=[],this.routeCache=U(n.readParam("".concat(K,",").concat(G)))}return H(e,[{key:"enabled",value:function(){return void 0!==this.egDistances}},{key:"_asRoute",value:function(e,t){var n,r,i,o=(R(i={},ne,(null===(n=this.findFeature(e.origin.id,e.origin.type))||void 0===n?void 0:n.toData())||{id:e.origin.id,type:e.origin.type}),R(i,re,(null===(r=this.findFeature(e.destination.id,e.destination.type))||void 0===r?void 0:r.toData())||{id:e.destination.id,type:e.destination.type}),R(i,te,e.mode),i);return t&&(o[ie]=e.distance),o}},{key:"_asRouteDestinationFeature",value:function(e){var t,n=e[ee],r=n.id,i=n.type;return R(t={},re,this.findFeature(r,i)),R(t,te,e[te]),t}},{key:"_routeDestinationAsKey",value:function(e){var t=e[ee],n=t.id,r=t.type,i=e[te];return"".concat(n,"|").concat(r,"|").concat(i)}},{key:"_buildCacheKeys",value:function(e,t,n){return["".concat(e.id,"|").concat(e.type),"".concat(t.destination.id,"|").concat(t.destination.type),t.mode,n?"distance":"route"]}},{key:"showRoutes",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.egDistances&&e){var i=this._asRouteDestinationFeature.bind(this);return Promise.allSettled(((null==t?void 0:t.map(i))||this.routeDestinations).map((function(t){return new ae(e,t[re],t[te])})).filter((function(e){return!n.routes.includes(e)&&e.destination})).map((function(t){return new Promise((function(r,i){var o,a=n.routeLineStyleByDistanceMode[t.mode].lineStyle===oe,s=n._buildCacheKeys(e,t,a),u=(o=n.routeCache).get.apply(o,B(s));(u?Promise.resolve(u):a?n.fetchDistance(t,s):n.fetchRoute(t,s)).then((function(e){var t=e.route,i=e.egDistanceRoute;n.routes.push(t),i?n.addRouteOnMap(t,i).then((function(e){return r(t)})):r(t)})).catch((function(e){return i({error:e,route:t})}))}))}))).then((function(e){var t=e.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value}));e.filter((function(e){return"rejected"===e.status})).forEach(n._handleReject.bind(n));var i=t.map((function(e){return n._asRoute(e,!0)}));return r&&i.length>0&&n._handleRouteChanged(!0,i),i}))}return Promise.resolve()}},{key:"fetchDistance",value:function(e,t){var n=this;return this.egDistances.getDistances(e.originLatLng(),e.destinationLatLng(),e.mode).then((function(r){if("SUCCESS"===r.status){var i;e.distance=r.matrix[0][0].modes[e.mode];var o={route:e};return(i=n.routeCache).set.apply(i,[o].concat(B(t))),o}throw new Error(r.errors.join(", "))}))}},{key:"fetchRoute",value:function(e,t){var n=this;return this.egDistances.getRoute(e.originLatLng(),e.destinationLatLng(),e.mode).then((function(r){if("SUCCESS"===r.status){var i;e.distance=r.route.distance;var o={route:e,egDistanceRoute:r};return(i=n.routeCache).set.apply(i,[o].concat(B(t))),o}throw new Error(r.error)}))}},{key:"_handleReject",value:function(e){var t=e.reason,n=t.message,r=t.stack,i=t.error,o=t.route;i?/OVER_QUERY_LIMIT/.test(null==i?void 0:i.message)?this.logger.info("Error when showing route ".concat(o,": ").concat(i.message),i.stack):this.logger.warn("Error when showing route ".concat(o,": ").concat(i.message),i.stack):n&&this.logger.error("Error when showing route ".concat(n),r)}},{key:"hideRoutes",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this._asRoute.bind(this);if(this.egDistances){var o=void 0;return t&&(o=t.map((function(e){return e[ee].id}))),Promise.all(this.routes.filter((function(t){return(!e||t.origin.id===e.id)&&(!o||o.includes(t.destination.id))})).map((function(e){return n.removeRouteOnMap(e).then((function(){return n.routes.splice(n.routes.findIndex((function(t){return e===t})),1),e}))}))).then((function(e){return r&&e.length>0&&n._handleRouteChanged(!1,e),e.map((function(e){return i(e)}))}))}return Promise.resolve()}},{key:"_handleRouteChanged",value:function(e,t){var n,r=(R(n={},Y,t),R(n,$,e?Q:J),n);this.pushEvent(X,r)}},{key:"registerRouteDestination",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){var n;if(null===(n=e.listRegisteredRouteDestinations())||void 0===n||!n.map(e._routeDestinationAsKey).includes(e._routeDestinationAsKey(t))){var r,i=t[ee],o=i.id,a=i.type,s=t[te],u=e.findFeature(o,a);u&&e.routeDestinations.push((R(r={},re,u),R(r,te,s),r))}}))}},{key:"listRegisteredRouteDestinations",value:function(){return this.routeDestinations.map((function(e){var t,n=e[re],r=e[te];return R(t={},ee,{id:n.id,type:n.type}),R(t,te,r),t}))}},{key:"deregisterRouteDestination",value:function(){for(var e=this,t=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.forEach((function(n){var r=n[ee],i=r.id,o=r.type,a=n[te],s=e.routeDestinations.findIndex((function(e){return e[re].id===i&&e[re].type===o&&e[te]===a}));s>=0&&(e.routeDestinations.splice(s,1),t.push(n))})),this.hideRoutes(void 0,t),t}}]),e}(),ue=n(3),ce=n(4),le=n.n(ce);function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var he,de,pe,ve=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"loadTile",value:function(e,t,n,r){return Promise.reject("not implemented")}}])&&fe(t.prototype,n),e}();function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){if(e){if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce=egmapsCommons,Pe=Ce.constants,Le=Ce.Utils.removeDuplicates,Me=Pe.mapbox_options,Fe=Pe.mapbox_access_token,Ie=Pe.cfg_tiles,Ee=Pe.tiles_providers_configuration,Se=Pe.tiles_providers_mapbox,Oe=Pe.tiles_providers_mapbox_url,De=Pe.tiles_providers_mapbox_tilesets,Te=Pe.qualifier_food_and_drink,Ae=Pe.qualifier_poi,Be=Pe.qualifier_transport,je=Pe.type_property,Re=Pe.qualifier_hotel,Ne=Pe.qualifier_vacation_rental,Ve=Pe.type_landmark,He=(xe(pe={},je,(xe(he={},Re,"expedia-geo.hotels-prod"),xe(he,Ne,"expedia-geo.rentals-prod"),he)),xe(pe,Ve,(xe(de={},Te,"expedia-geo.restaurants-prod"),xe(de,Ae,"expedia-geo.pois-prod"),xe(de,Be,"expedia-geo.transports-prod"),de)),pe),qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=we(e);if(t){var i=we(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ke(this,n)}}(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).logger=e.logger("MapBoxTilesReader"),t.accessToken=e.readParam("".concat(Me,",").concat(Fe)),t.tilesUrlPrefix=e.readParam("".concat(Ie,",").concat(Ee,",").concat(Se,",").concat(Oe)),t.tilesetIdsByType={},e.listKeys("".concat(Ie,",").concat(Ee,",").concat(Se,",").concat(De)).forEach((function(n){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n,6),i=r[4],o=r[5];t.tilesetIdsByType[i]||(t.tilesetIdsByType[i]={}),!0===e.readParam(n.join(","))&&(t.tilesetIdsByType[i][He[i][o]]=o)})),t}return t=i,(n=[{key:"loadTile",value:function(e,t,n,r){var i=this;if(this.tilesetIdsByType[e]){var o=Object.keys(this.tilesetIdsByType[e]).map((function(o){return{url:"/".concat(o,"/").concat(r,"/").concat(t,"/").concat(n,".mvt?access_token=").concat(i.accessToken),qualifier:i.tilesetIdsByType[e][o]}})),a=[];return o.forEach((function(o){a.push(i.fetchTile(o.url,e,o.qualifier,t,n,r))})),Promise.all(a).then((function(e){var t=[];return e.filter((function(e){return e.success})).forEach((function(e){e.data.forEach((function(e){return t.push(e)}))})),e.filter((function(e){return!e.success})).forEach((function(e){i.logger.error("Failed to load tile from ".concat(e.url,": ").concat(e.error.message),e.error.stack)})),t}))}return Promise.resolve([])}},{key:"fetchTile",value:function(e,t,n,r,i,o){var a=this;return fetch("".concat(this.tilesUrlPrefix).concat(e)).then((function(t){return t.ok?t.arrayBuffer():404===t.status?void 0:Promise.reject(new Error("Server returns error code ".concat(t.status," when calling ").concat(e," for tile {x: ").concat(r,", y: ").concat(i,", zoom: ").concat(o,"}: ").concat(t.statusText)))})).then((function(s){return{url:e,success:!0,data:a.handleResponse(s,r,i,o,t,n)}})).catch((function(t){return{url:e,success:!1,error:t}}))}},{key:"handleResponse",value:function(e,t,n,r,i,o){var a=[];if(e){var s=new ue.VectorTile(new le.a(e));for(var u in s.layers)for(var c=s.layers[u],l=0;l<c.length;l++){var f=c.feature(l).toGeoJSON(t,n,r);a.push(this.extractFeatureFromJson(f,i,o))}}return a}},{key:"extractFeatureFromJson",value:function(e,t,n){var r=n.split("#");r.push.apply(r,function(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((e.properties.qualifiers||"").split(",").filter((function(e){return e.length>0}))));var i=Le(r);return{id:e.properties.gaia_id,lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0],type:t,name:e.properties.name,qualifiers:i,score:e.properties.popularity_score}}}])&&_e(t.prototype,n),i}(ve);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $e=egmapsCommons,Qe=$e.Utils,Je=$e.constants,et=Qe.fastHash,tt=Je.cfg_locale,nt=Je.cfg_tiles,rt=Je.tiles_providers_configuration,it=Je.tiles_providers_toi_service,ot=Je.tiles_providers_toi_service_page_size,at=Je.tiles_providers_toi_service_url,st=Je.qualifier_food_and_drink,ut=Je.qualifier_poi,ct=Je.type_landmark,lt=Je.qualifier_food_and_drink_restaurant,ft=Je.qualifier_poi_generic,ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ye(e);if(t){var i=Ye(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Xe(this,n)}}(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).logger=e.logger("ToiServiceTilesReader"),t.url=e.readParam("".concat(nt,",").concat(rt,",").concat(it,",").concat(at)),t.pageSize=e.readParam("".concat(nt,",").concat(rt,",").concat(it,",").concat(ot)),t.locale=e.readParam("".concat(tt)).replace("-","_"),t}return t=i,(n=[{key:"loadTile",value:function(e,t,n,r){return e!==ct?Promise.reject("Invalid feature type for TOI service: ".concat(e," - only ").concat(ct," supported.")):this._fetchTile(this.url,this.locale,t,n,r)}},{key:"_fetchTile",value:function(e,t,n,r,i){var o=this._wmpToSWNEBoundingBox(n,r,i).join(",");return this._paginate(o,[])}},{key:"_paginate",value:function(e,t,n){var r=this,i="".concat(this.url,"/geo/v2/tois?locale=").concat(this.locale,"&first=").concat(this.pageSize,"&bbox=").concat(e).concat(n?"&after="+n:"");return fetch(i).then((function(e){return e.ok?e.json():Promise.reject(new Error("Server returned error code ".concat(e.status," from ").concat(i)))})).then((function(n){return t.push.apply(t,Ze(r._extractFeaturesFromTois(n.edges))),n.pageInfo.hasNextPage?r._paginate(e,t,n.pageInfo.endCursor):Promise.resolve(t)})).catch((function(e){return r.logger.error("Toi service error ".concat(e.message),e.stack),t}))}},{key:"_wmpToSWNEBoundingBox",value:function(e,t,n){var r=this._wmpToNWCoordinates(e,t+1,n),i=this._wmpToNWCoordinates(e+1,t,n);return r.concat(i)}},{key:"_wmpToNWCoordinates",value:function(e,t,n){var r=1<<n,i=e/r*360-180;return[180*Math.atan(Math.sinh(Math.PI*(1-2*t/r)))/Math.PI,i]}},{key:"_extractFeaturesFromTois",value:function(e){var t=this;return e.map((function(e){return t._extractFeatureFromToi(e.node)}))}},{key:"_extractFeatureFromToi",value:function(e){var t=et("".concat(e.geography.location).concat(e.name.simple));return{id:t=t<0?"1".concat(-t):"2".concat(t),lat:e.geography.location.lat,lng:e.geography.location.lng,type:ct,name:e.name.simple,qualifiers:function(e){var t,n=new Set,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ue(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(r.s();!(t=r.n()).done;)switch(t.value.name){case"Restaurants":n.add(st),n.add(lt)}}catch(e){r.e(e)}finally{r.f()}return 0===n.size&&(n.add(ut),n.add(ft)),Ze(n)}(e.categories),score:1}}}])&&We(t.prototype,n),i}(ve);function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pt=egmapsCommons,vt=pt.Utils,yt=pt.constants,mt=vt.computeTileDistance,gt=yt.cfg_tiles,_t=yt.tiles_cache,bt=yt.tiles_cache_max_size,kt=yt.tiles_cache_max_distance,wt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxSize=t.readParam("".concat(gt,",").concat(_t,",").concat(bt)),this.maxDistance=t.readParam("".concat(gt,",").concat(_t,",").concat(kt)),this.cache={},this.listeners=new Set,this.size=0}var t,n;return t=e,(n=[{key:"getTile",value:function(e,t,n){return this.cache[n]&&this.cache[n][e]?this.cache[n][e][t]:void 0}},{key:"setTile",value:function(e,t,n,r){var i=this.cache;i[n]||(i[n]={}),i[n][e]||(i[n][e]={}),!i[n][e][t]&&r?this.size=this.size+1:i[n][e][t]&&!r&&(this.size=this.size-1),i[n][e][t]=r,this.maxSize>0&&this.size>this.maxSize&&this._expire(e,t,n)}},{key:"addTilesListener",value:function(e){this.listeners.add(e)}},{key:"removeTilesListener",value:function(e){this.listeners.delete(e)}},{key:"_expire",value:function(t,n,r){var i=this,o=function(o){var a=function(a){var s=function(s){mt(t,n,r,a,s,o)>i.maxDistance&&(i.listeners.forEach((function(t){return t(e.EVENTS.EXPIRE,Number(a),Number(s),Number(o),i.cache[o][a][s])})),delete i.cache[o][a][s],i.size=i.size-1)};for(var u in i.cache[o][a])s(u)};for(var s in i.cache[o])a(s)};for(var a in this.cache)o(a)}}])&&dt(t.prototype,n),e}();wt.EVENTS={EXPIRE:"expire"};var xt=wt;function Ct(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ft=egmapsCommons.constants,It=Ft.type_property,Et=Ft.type_landmark,St=Ft.type_destination,Ot=Ft.cfg_tiles,Dt=Ft.tiles_providers_enabled,Tt=Ft.tiles_min_zoom_for_tile_request,At=Ft.tiles_providers_hcom,Bt=Ft.tiles_providers_mapbox,jt=Ft.tiles_providers_toi_service,Rt=function(){function e(t,n,r,i){var o=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;Lt(this,e),this.logger=t.logger("TilesLoader"),this.delayBeforeRefresh=a,this.delayForceRefresh=s,this.refreshRequested=Date.now(),this.lastRefresh=this.refreshRequested,this.configHelper=t,this.createFeature=n,this.deleteFeature=r,this.updateViewport=i,[It,Et,St].forEach((function(e){o.configHelper.readParam("".concat(Ot,",").concat(Dt,",").concat(e)).forEach((function(n){if(o.tilesProvidersConfig||(o.tilesProvidersConfig={}),!o.tilesProvidersConfig[n])switch(o.tilesProvidersConfig[n]={featureTypes:[]},n){case At:if("undefined"==typeof egmapsHcom)throw new Error("You need to load '@eg-maps/hcom' to use this tiles reader service");o.tilesProvidersConfig[n].service=new egmapsHcom.HcomTilesReader(t);break;case Bt:o.tilesProvidersConfig[n].service=new qe(t);break;case jt:o.tilesProvidersConfig[n].service=new ht(t);break;default:throw new Error("Tiles provider ".concat(n," not supported"))}o.tilesProvidersConfig[n].featureTypes.push(e)}))})),this.minZoomForTileRequest=this.configHelper.readParam("".concat(Ot,",").concat(Tt)),this.tilesCache=new xt(t),this.tilesCache.addTilesListener(this.handleCacheEvent.bind(this))}var t,n;return t=e,(n=[{key:"getNormalizedCoord",value:function(e,t,n){var r=1<<n,i=e;return t<0||t>=r?null:((i<0||i>=r)&&(i=(i%r+r)%r),{x:i,y:t})}},{key:"registerRefreshViewport",value:function(){var e=this,t=Date.now();this.refreshRequested=t,setTimeout((function(){var n=Date.now();(e.refreshRequested===t||e.lastRefresh+e.delayForceRefresh<n)&&(e.refreshRequested=n,e.lastRefresh=n,e.updateViewport())}),this.delayBeforeRefresh)}},{key:"loadTile",value:function(e,t,n){var r=this;if(this.tilesProvidersConfig){var i=this.getNormalizedCoord(e,t,n);if(null!==i&&n>=this.minZoomForTileRequest&&!this.tilesCache.getTile(i.x,i.y,n)){this.tilesCache.setTile(i.x,i.y,n,[]);var o=[];for(var a in this.tilesProvidersConfig){var s,u=this.tilesProvidersConfig[a],c=u.service,l=Ct(u.featureTypes);try{for(l.s();!(s=l.n()).done;){var f=s.value;o.push(c.loadTile(f,i.x,i.y,n))}}catch(e){l.e(e)}finally{l.f()}}return Promise.all(o).then((function(o){var a=o.flat().map((function(i){i.tile=[e,t,n],r.createFeature(i)}));r.tilesCache.setTile(i.x,i.y,n,a),a.length>0&&r.registerRefreshViewport()})).catch((function(){return r.tilesCache.setTile(i.x,i.y,n,null)}))}}return Promise.resolve()}},{key:"handleCacheEvent",value:function(e,t,n,r,i){var o=this;switch(e){case xt.EVENTS.EXPIRE:this.logger.infoEnabled()&&this.logger.info("Cache expires. Deleting ".concat(i.length," features")),i.forEach((function(e){return o.deleteFeature(e)}))}}}])&&Mt(t.prototype,n),e}();function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vt,Ht,qt,zt=egmapsCommons,Zt=zt.constants,Ut=zt.Utils,Kt=Zt.cfg_availability,Wt=Zt.availability_provider_enabled,Gt=Zt.availability_provider_none,Xt=Zt.availability_provider_hcom,Yt=Zt.status_unknown,$t=function(){function e(t){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=t.logger("AvailabilityCheck"),t.readParam("".concat(Kt,",").concat(Wt))){case Xt:if("undefined"==typeof egmapsHcom)throw new Error("You need to load '@eg-maps/hcom' to use this availability check service");this.availabilityProvider=new egmapsHcom.HcomAvailabilityService(t);break;case Gt:default:this.availabilityProvider=void 0}this.featureComputationInProgress=new Map,this.stay=void 0}var t,n;return t=e,(n=[{key:"saveStay",value:function(e){return!(!e||e.isSameAs(this.stay)||(this.stay=e,this.featureComputationInProgress.clear(),0))}},{key:"isAvailabilityCheckActive",value:function(){return void 0!==this.availabilityProvider&&void 0!==this.stay}},{key:"updateAvailability",value:function(e){var t=this;if(!this.isAvailabilityCheckActive())return Promise.resolve([]);for(var n=this.stay,r=[],i=Date.now(),o=e.length,a=new Map,s=0;s<o;s++){var u=e[s],c=u.id;!this.featureComputationInProgress.has(c)&&u.hasTileData()&&u.toTileData().status===Yt&&(r.push(c),a.set(c,s),this.featureComputationInProgress.set(c,i))}if(0===r.length)return Promise.resolve([]);for(var l=[],f=Ut.chunkArray(r,300),h=f.length,d=0;d<h;d++)l.push(this.availabilityProvider.checkAvailability(n,f[d]));return Promise.allSettled(l).then((function(r){return r.filter((function(e){return"rejected"===e.status})).forEach((function(e){t.logger.error("Check availability failed with result ".concat(e.reason))})),r.filter((function(e){return"fulfilled"===e.status})).map((function(r){return r.value.map((function(r){var i=a.get(r.id);if(i>=0&&t.stay===n){var o=e[i];return o.mergeTileData(r),o}})).filter((function(e){return void 0!==e}))})).flat()})).finally((function(){r.forEach((function(e){return t.featureComputationInProgress.delete(e)}))}))}}])&&Nt(t.prototype,n),e}();function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nn=egmapsCommons,rn=nn.Utils,on=nn.HtmlUtils,an=nn.constants,sn=nn.i18nKeys,un=rn.firstNonNull,cn=an.type_property,ln=an.type_destination,fn=an.type_landmark,hn=an.type_cluster,dn=an.status_available,pn=an.status_filtered,vn=an.status_unavailable,yn=an.status_unknown,mn=an.cfg_accessibility,gn=an.keyboard_features,_n=an.keyboard_features_icon,bn=an.key_press_zero,kn=an.key_down_backspace,wn=["1","2","3","4","5","6","7","8","9"],xn=(tn(qt={},hn,(tn(Vt={},dn,9),tn(Vt,pn,7),tn(Vt,vn,3),tn(Vt,yn,1),Vt)),tn(qt,cn,(tn(Ht={},dn,10),tn(Ht,pn,8),tn(Ht,vn,4),tn(Ht,yn,2),Ht)),tn(qt,ln,tn({},yn,6)),tn(qt,fn,tn({},yn,5)),qt),Cn=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.configHelper=t,this.mapProviderCssClass=n,this.additionalCssClass=r,this.keyboardNavigationMode=!1}var t,n;return t=e,(n=[{key:"init",value:function(e){var t=e.node,n=e.uniqId,r=e.containerBounds,i=e.listFeatures,o=e.cloneMarker,a=e.zIndexes,s=e.maxZIndex,u=e.setMarkerZIndex,c=e.getMapNavFocusElement,l=e.registerListenerOnMapFocusElement,f=e.handleMarkerClick,h=e.isFeatureSelected,d=e.clearSelectedFeature,p=e.bounceMarker;this.node=t,this.containerBounds=r,this.listFeatures=i,this.cloneMarker=o,this.zIndexes=a,this.maxZIndex=s,this.setMarkerZIndex=u,this.getMapNavFocusElement=c,this.registerListenerOnMapFocusElement=l,this.handleMarkerClick=f,this.isFeatureSelected=h,this.clearSelectedFeature=d,this.bounceMarker=p;var v=n("keyboard-features");this._createKeyboardFeaturesIcon(v),this._createKeyboardFeaturesSquare(v),this._createKeyboardFeaturesList(v),this._initializeListeners()}},{key:"_createKeyboardFeaturesIcon",value:function(e){this.keyboardIcon=on.createDiv("".concat(e,"-icon"),this.node,"keyboard-features-icon ".concat(this.mapProviderCssClass),void 0,this.additionalCssClass),this.keyboardNavigationMode||on.setDisplayNone(this.keyboardIcon);var t=this.configHelper.readParam("".concat(mn,",").concat(gn,",").concat(_n)),n=on.createImg("".concat(e,"-img"),this.keyboardIcon,"keyboard-features-icon-img",void 0,t,"icon to show that keyboard features is enabled",this.additionalCssClass);on.setPresentationRole(n),on.setZIndex(this.keyboardIcon,this.maxZIndex+1)}},{key:"_createKeyboardFeaturesSquare",value:function(e){this.focusArea=on.createDiv("".concat(e,"-focus"),this.node,"keyboard-features-focus-area ".concat(this.mapProviderCssClass),void 0,this.additionalCssClass),this.keyboardNavigationMode||on.setDisplayNone(this.focusArea),on.setZIndex(this.focusArea,this.maxZIndex+1)}},{key:"_createKeyboardFeaturesList",value:function(e){this.keybNavFeatures=on.createDiv("".concat(e,"-features"),this.node,"keyboard-features-dialog ".concat(this.mapProviderCssClass),void 0,this.additionalCssClass),this.keybNavFeaturesList=on.createUl("".concat(e,"-list"),this.keybNavFeatures,"keyboard-features-list no-data",void 0,this.additionalCssClass),this.keybNavFeaturesElements=[];for(var t=0;t<7;t++){var n=on.createLi("".concat(e,"-elt-").concat(t+1),this.keybNavFeaturesList,"keyboard-features-list-element no-data",void 0,this.additionalCssClass);on.createSpan("".concat(n.id,"-info"),n,"keyboard-features-list-element-info",void 0,"-",this.additionalCssClass),this.keybNavFeaturesElements.push(n)}var r=this.configHelper.getI18N(sn.keyboardFeaturesNoData);this.keybNavNoFeatures=on.createSpan("".concat(e,"-nodata"),this.keybNavFeatures,"keyboard-features-list-no-feature-message",void 0,r,this.additionalCssClass),this.keyboardNavigationMode||on.setDisplayNone(this.keybNavFeatures),on.setZIndex(this.keybNavFeatures,this.maxZIndex+1);var i=on.createLi("".concat(e,"-elt-prev"),this.keybNavFeaturesList,"keyboard-features-list-element keyboard-features-list-nav keyboard-features-list-nav-previous no-data",void 0,this.additionalCssClass),o=this.configHelper.getI18N(sn.keyboardFeaturesPreviousPage),a=on.createDiv("".concat(i.id,"-container"),i,"keyboard-features-list-element-div",void 0,this.additionalCssClass);on.createSpan("".concat(i.id,"-number"),a,"keyboard-features-list-element-number kbc-button",void 0,wn[7],this.additionalCssClass),on.createSpan("".concat(i.id,"-info"),a,"keyboard-features-list-element-info",void 0,o,this.additionalCssClass),this.keybNavFeaturesElements.push(i);var s=on.createLi("".concat(e,"-elt-next"),this.keybNavFeaturesList,"keyboard-features-list-element keyboard-features-list-nav keyboard-features-list-nav-next no-data",void 0,this.additionalCssClass),u=this.configHelper.getI18N(sn.keyboardFeaturesNextPage),c=on.createDiv("".concat(s.id,"-container"),s,"keyboard-features-list-element-div",void 0,this.additionalCssClass);on.createSpan("".concat(s.id,"-number"),c,"keyboard-features-list-element-number kbc-button",void 0,wn[8],this.additionalCssClass),on.createSpan("".concat(s.id,"-info"),c,"keyboard-features-list-element-info",void 0,u,this.additionalCssClass),this.keybNavFeaturesElements.push(s)}},{key:"_clickFeatureAtIndex",value:function(e){var t=this.features[7*this.pageIndex+e];if(t)return this.isFeatureSelected(t)?this.clearSelectedFeature():(this.handleMarkerClick(t,t.markerType,"dialog-keyboard-pressed"),t.type!==hn&&this.bounceMarker(t.marker)),!0}},{key:"_paginateFeaturePage",value:function(e){return e&&this.pageIndex<this.pageCount-1?(this.pageIndex+=1,!0):!e&&this.pageIndex>0?(this.pageIndex-=1,!0):void 0}},{key:"_clearSelectedFeature",value:function(){return this.clearSelectedFeature(),!0}},{key:"_initializeListeners",value:function(){var e=this;this.registerListenerOnMapFocusElement("keypress",(function(t){var n=(t.which||t.keyCode||t.key)-bn;n>=0&&n<=9&&(t.preventDefault(),(0===n?e._clearSelectedFeature():n<=7?e._clickFeatureAtIndex(n-1):8===n?e._paginateFeaturePage(!1):e._paginateFeaturePage(!0))&&e._updateKeyboardFeaturesDialog())})),this.registerListenerOnMapFocusElement("keydown",(function(t){Number(t.which||t.keyCode||t.key)===kn&&(t.preventDefault(),e.clearSelectedFeature(),e._updateKeyboardFeaturesDialog())}))}},{key:"refreshKeyboardNavIconVisibility",value:function(e){(void 0!==e?e:this.keyboardNavigationMode)?on.unsetDisplayNone(this.keyboardIcon):on.setDisplayNone(this.keyboardIcon)}},{key:"_resetFeatures",value:function(e){var t=this._resetMarker.bind(this);e&&e.forEach(t)}},{key:"_resetMarker",value:function(e){e&&e.marker&&on.hasClass(e.marker.cssElement,"keyboard-features-not-in-list-marker")&&(on.removeClass(e.marker.cssElement,"keyboard-features-not-in-list-marker"),this.setMarkerZIndex(e.marker,un(this.zIndexes[e.type],e.hashKeys)))}},{key:"_updateFeatureMarkersAsNotInList",value:function(e){var t=this;e&&e.forEach((function(e){t.setMarkerZIndex(e.marker,1),on.addClass(e.marker.cssElement,"keyboard-features-not-in-list-marker")}))}},{key:"_clear",value:function(){this._resetFeatures(this.features)}},{key:"turnKeyboardFeaturesMode",value:function(e){if(!this.node)throw new Error("You need to have the map initialized to turn on the keyboard navigation");this.keyboardNavigationMode=e,e?on.addClass(this.node,"keyboard-features-enabled"):on.removeClass(this.node,"keyboard-features-enabled"),this.keyboardNavigationMode&&document.activeElement===this.getMapNavFocusElement()?on.unsetDisplayNone(this.keyboardIcon):on.setDisplayNone(this.keyboardIcon),this.keyboardNavigationMode?(on.unsetDisplayNone(this.focusArea),on.unsetDisplayNone(this.keybNavFeatures)):(on.setDisplayNone(this.focusArea),on.setDisplayNone(this.keybNavFeatures)),this.keyboardNavigationMode||this._clear()}},{key:"isKeyboardFeaturesModeEnabled",value:function(){return this.keyboardNavigationMode}},{key:"_computeScore",value:function(e){return xn[e.type][e.status||(e.type===hn?dn:yn)]+(e.score||0)*(e.score<1?1:Math.pow(10,-(""+e.score).split(".")[0].length))+Math.pow(10,-5)*(e.children||[]).length}},{key:"_prioritizeFeaturesForKeyboardNav",value:function(e,t){var n=this._computeScore(e),r=this._computeScore(t);return n===r?(""+e.name).localeCompare(t.name):r-n}},{key:"updateKeyboardFeatures",value:function(){if(this.keyboardNavigationMode){var e=this.containerBounds(this.focusArea);e&&(this._resetFeatures(this.features),this.features=this.listFeatures((function(e){return e.visible}),e).sort(this._prioritizeFeaturesForKeyboardNav.bind(this)),this.pageIndex=0,this.pageCount=0===this.features.length?0:parseInt((this.features.length-1)/7)+1,this._updateKeyboardFeaturesDialog())}}},{key:"_updateKeyboardFeaturesDialog",value:function(){0===this.pageCount?on.addClass(this.keybNavFeaturesList,"no-data"):on.removeClass(this.keybNavFeaturesList,"no-data");for(var e=[],t=0;t<7;t++){var n=this.keybNavFeaturesElements[t];on.removeAllChildren(n);var r=this.features[7*this.pageIndex+t];if(r){on.removeClass(n,"no-data");var i=on.createDiv("".concat(n.id,"-container"),n,"keyboard-features-list-element-div",void 0,this.additionalCssClass);if(on.createSpan("".concat(n.id,"-number"),i,"keyboard-features-list-element-number kbc-button",void 0,wn[t],this.additionalCssClass),r.marker){this._resetMarker(r);var o=this.cloneMarker(r.marker);if(o&&(o.style=void 0,on.anyChildrenWithClasses(o,void 0,!0).forEach((function(e){return e.style=void 0}))),on.addClass(o,"keyboard-features-list-element-icon"),r.type===hn){var a=Qt(on.anyChildrenWithClasses(o,["cluster-label-content"],!0),1)[0];on.addClass(a,"no-text-overflow"),a.innerHTML=a.innerHTML.replace(/\s/g," ")}i.appendChild(o)}e.push(r),r.type!==hn&&on.createSpan("".concat(n.id,"-info-").concat(r.id),i,"keyboard-features-list-element-info",void 0,r.name||"".concat(r.type," ").concat(r.id),this.additionalCssClass)}else on.addClass(n,"no-data")}this._updateFeatureMarkersAsNotInList((this.features||[]).filter((function(t){return!e.includes(t)&&t.marker})));var s=Qt(this.keybNavFeaturesElements,9),u=s[7],c=s[8];this._updateNavButton(u,this.pageCount<=1,0===this.pageIndex),this._updateNavButton(c,this.pageCount<=1,this.pageIndex===this.pageCount-1)}},{key:"_updateNavButton",value:function(e,t,n){t?(on.addClass(e,"no-data"),on.removeClass(e,"disabled")):(on.removeClass(e,"no-data"),n?on.addClass(e,"disabled"):on.removeClass(e,"disabled"))}}])&&en(t.prototype,n),e}();function Pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||In(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(e){return function(e){if(Array.isArray(e))return En(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||In(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=In(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function In(e,t){if(e){if("string"==typeof e)return En(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?En(e,t):void 0}}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var On=egmapsCommons,Dn=On.Utils,Tn=On.HtmlUtils,An=On.constants,Bn=On.i18nKeys,jn=On.Animation,Rn=Dn.firstNonNull,Nn=Dn.listHashKeysSorted,Vn=Dn.compareBounds,Hn=Dn.countDecimals,qn=jn.bounce,zn=An.type_property,Zn=An.type_landmark,Un=An.type_destination,Kn=An.type_cluster,Wn=An.event_type_bounds_changed,Gn=An.event_type_bounds_changed_bounds,Xn=An.event_type_bounds_changed_original_event,Yn=An.event_type_selection_changed,$n=An.event_type_selection_changed_action,Qn=An.event_type_selection_changed_action_select,Jn=An.event_type_selection_changed_action_clear_selection,er=An.event_type_selection_changed_feature,tr=An.event_type_selection_changed_previous_selected_feature,nr=An.event_type_selection_changed_set_popup_content,rr=An.event_type_hover_changed,ir=An.event_type_hover_changed_action,or=An.event_type_hover_changed_action_mouse_enter,ar=An.event_type_hover_changed_action_mouse_leave,sr=An.event_type_hover_changed_feature,ur=An.event_type_hover_changed_set_popup_content,cr=An.status_available,lr=An.status_filtered,fr=An.status_unavailable,hr=An.status_unknown,dr=An.mark_highlighted,pr=An.mark_not_highlighted,vr=An.marker_type_price,yr=An.marker_type_pin,mr=An.marker_type_obfuscate,gr=An.marker_type_pin_obfuscate,_r=An.marker_type_price_obfuscate,br=An.mark_action_merge,kr=An.mark_action_replace,wr=An.marker_action_on_feature_select_bounce,xr=An.marker_action_on_feature_select_highlight,Cr=An.marker_action_on_feature_select_open_popup,Pr=An.marker_action_on_feature_select_close_popup,Lr=An.marker_action_on_feature_select_show_routes,Mr=An.marker_action_on_feature_deselect_dehighlight,Fr=An.marker_action_on_feature_deselect_close_popup,Ir=An.marker_action_on_feature_deselect_hide_routes,Er=An.marker_action_on_click_select,Sr=An.marker_action_on_click_bounce,Or=An.marker_action_on_click_highlight,Dr=An.marker_action_on_click_open_popup,Tr=An.marker_action_on_click_close_popup,Ar=An.marker_action_on_click_zoom_to_extent,Br=An.marker_action_on_click_show_routes,jr=An.marker_action_on_mouse_over_send_event,Rr=An.marker_action_on_mouse_over_highlight,Nr=An.marker_action_on_mouse_over_open_popup,Vr=An.marker_action_on_mouse_out_dehighlight,Hr=An.marker_action_on_mouse_out_send_event,qr=An.marker_action_on_mouse_out_close_popup,zr=An.additional_css_class,Zr=An.event_type_markers_changed,Ur=An.event_type_markers_changed_changes,Kr=An.event_type_markers_changed_change_type,Wr=An.event_type_markers_changed_change_features,Gr=An.event_type_markers_changed_change_bounds,Xr=An.event_type_markers_changed_change_type_added_or_updated,Yr=An.event_type_markers_changed_change_type_removed,$r=An.event_type_route_changed,Qr=An.event_type_filter_changed,Jr=An.event_type_filter_changed_type,ei=An.event_type_filter_changed_status,ti=An.event_type_filter_changed_is_visible,ni=An.always,ri=An.never,ii=An.default_value,oi=An.on_map_drag,ai=An.on_map_click,si=An.map_action_clear_highlight,ui=An.map_action_clear_selection,ci=An.map_action_close_popup,li=An.map_action_hide_routes,fi=An.cfg_filters,hi=An.cfg_map,di=An.cfg_markers,pi=An.cfg_show,vi=An.cfg_locale,yi=An.cfg_iso_4217_currency_code,mi=An.clustering,gi=An.element_popup,_i=An.cfg_tiles,bi=An.tiles_min_zoom_for_tile_request,ki=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=t.logger("BaseMap"),this.configHelper=t,this.mapProviderCssClass=n,this.TilesLoader=Rt;var i=this.configHelper.visibilityByStatus();this.showFilterProperties=this.configHelper.readParam("".concat(fi,",").concat(zn))&&Object.values(i[zn]).filter((function(e){return e!==ri})).length>0,this.showFilterLandmarks=this.configHelper.readParam("".concat(fi,",").concat(Zn))&&Object.values(i[Zn]).filter((function(e){return e!==ri})).length>0,this.showFilterDestinations=this.configHelper.readParam("".concat(fi,",").concat(Un))&&Object.values(i[Un]).filter((function(e){return e!==ri})).length>0,this.additionalCssClass=this.configHelper.readParam("".concat(zr)),this.checkboxes={},this.threshold=this.configHelper.threshold(),this.maxZoomForCount=this.configHelper.maxZoomForCount(),this.minZoomForDisplay=this.configHelper.minZoomForDisplay(),this.markerActionsOnFeatureSelect=this.configHelper.markerActionsOnFeatureSelect(),this.markerActionsOnFeatureDeselect=this.configHelper.markerActionsOnFeatureDeselect(),this.markerActionsOnClick=this.configHelper.markerActionsOnClick(),this.markerActionsOnMouseOver=this.configHelper.markerActionsOnMouseOver(),this.markerActionsOnMouseOut=this.configHelper.markerActionsOnMouseOut(),this.markerCollisionDetection=this.configHelper.markerCollisionDetection(),this.markerTypes=this.configHelper.markerTypes(),this.isOnePropertyStatusUsingObfuscateMarker=Object.values(this.markerTypes).some((function(e){return e===mr||e===gr||e===_r})),this.isOnePropertyStatusUsingObfuscateMarker&&(this.obfuscateIcons=this.configHelper.obfuscateIcons(),this.obfuscateRadiusInMeters=this.configHelper.obfuscateRadiusInMeters()),this.icons=this.configHelper.icons(),this.zIndexes=this.configHelper.zIndexes(),this.popupPositions=this.configHelper.popupPositions(),this.maxZIndex=0,Object.values(this.zIndexes).forEach((function(e){return Object.values(e).forEach((function(e){e>r.maxZIndex&&(r.maxZIndex=e)}))})),this.actionsOnMapDrag=this.configHelper.readParam("".concat(hi,",").concat(oi)),this.actionsOnMapClick=this.configHelper.readParam("".concat(hi,",").concat(ai)),this.registeredListeners=[],this.features=new A,this.highlightedFeature=void 0,this.selectedFeature=void 0,this.popup=void 0,this.copyrights=new Map,this.copyrightsDiv=void 0,this.featuresOver=new Map,this.minZoomForTileRequest=this.configHelper.readParam("".concat(_i,",").concat(bi)),this.locale=this.configHelper.readParam("".concat(vi)),this.iso4217CurrencyCode=this.configHelper.readParam("".concat(yi)),this.clusterFactory=new u(this.configHelper),this.clusterer=this.clusterFactory.buildClusterService("".concat(di,",").concat(zn,",").concat(mi)),this.clusters=[],this.minZoomForTileRequest=this.configHelper.readParam("".concat(_i,",").concat(bi)),this.availabilityCheck=new $t(this.configHelper),this.keyboardFeatures=new Cn(this.configHelper,this.mapProviderCssClass,this.additionalCssClass)}var t,n;return t=e,(n=[{key:"initMap",value:function(e){var t=this;return this.node=e,this.idPrefix="".concat(this.node.id,"_"),this.routes=new se({configHelper:this.configHelper,findFeature:this._findFeature.bind(this),pushEvent:this._pushEvent.bind(this),addRouteOnMap:this.addRouteOnMap.bind(this),removeRouteOnMap:this.removeRouteOnMap.bind(this)}),this.init().then((function(){t.createCopyrightsDiv(),t.keyboardFeatures.init({node:e,uniqId:t.uniqId.bind(t),containerBounds:t.containerBounds.bind(t),listFeatures:t._listFeatures.bind(t),cloneMarker:t.cloneMarker.bind(t),zIndexes:t.zIndexes,maxZIndex:t.maxZIndex,setMarkerZIndex:t._setMarkerZIndex.bind(t),getMapNavFocusElement:function(){return t.mapNavFocusElement},registerListenerOnMapFocusElement:t.registerListenerOnMapFocusElement.bind(t),handleMarkerClick:t._handleMarkerClick.bind(t),isFeatureSelected:t.isFeatureSelected.bind(t),clearSelectedFeature:t.clearSelectedFeature.bind(t),bounceMarker:t._bounceMarker.bind(t)}),(t.showFilterProperties||t.showFilterLandmarks||t.showFilterDestinations)&&t._createFiltersBox()}))}},{key:"init",value:function(){return Promise.reject(new Error("not implemented"))}},{key:"createPinMarkerWithClickListener",value:function(e,t,n,r,i){this.logger.error("method createPinMarkerWithClickListener not implemented")}},{key:"createPriceTextMarkerWithClickListener",value:function(e,t,n,r){this.logger.error("method createPriceTextMarkerWithClickListener not implemented")}},{key:"createObfuscateMarkerWithClickListener",value:function(e,t,n,r,i,o){this.logger.error("method createObfuscateMarkerWithClickListener not implemented")}},{key:"createPriceObfuscateMarkerWithClickListener",value:function(e,t,n,r,i,o){this.logger.error("method createPriceObfuscateMarkerWithClickListener not implemented")}},{key:"createPinObfuscateMarkerWithClickListener",value:function(e,t,n,r,i,o,a){this.logger.error("method createPinObfuscateMarkerWithClickListener not implemented")}},{key:"createClusterMarkerWithClickListener",value:function(e){this.logger.error("method createClusterMarkerWithClickListener not implemented")}},{key:"removeMarkerFromMap",value:function(e){this.logger.error("method removeMarkerFromMap not implemented")}},{key:"cloneMarker",value:function(e){this.logger.error("method cloneMarker not implemented")}},{key:"updatePopupPositionOnLayer",value:function(){this.logger.error("method updatePopupPositionOnLayer not implemented")}},{key:"findMarkerCollision",value:function(){this.logger.error("method findMarkerCollision not implemented")}},{key:"fitBounds",value:function(e,t){this.logger.error("method fitBounds not implemented")}},{key:"nativeBounds",value:function(){this.logger.error("method nativeBounds not implemented")}},{key:"asNativeBounds",value:function(e,t){this.logger.error("method asNativeBounds not implemented")}},{key:"asBounds",value:function(e){this.logger.error("method asBounds not implemented")}},{key:"containerBounds",value:function(e){this.logger.error("method containerBounds not implemented")}},{key:"fitLatLongs",value:function(e){this.logger.error("method fitLatLongs not implemented")}},{key:"boundsContaining",value:function(e){this.logger.error("method boundsContaining not implemented")}},{key:"getZoom",value:function(){this.logger.error("method getZoom not implemented")}},{key:"getCenter",value:function(){this.logger.error("method getCenter not implemented")}},{key:"isFeatureInRealBound",value:function(e,t){this.logger.error("method isFeatureInRealBound not implemented")}},{key:"centerAndZoomMap",value:function(e,t){this.logger.error("method centerAndZoomMap not implemented")}},{key:"addEventListener",value:function(e,t,n){this.logger.error("method addEventListener not implemented")}},{key:"addRouteOnMap",value:function(e,t){return Promise.reject(new Error("not implemented"))}},{key:"removeRouteOnMap",value:function(e){return Promise.reject(new Error("not implemented"))}},{key:"registerListenerOnMapFocusElement",value:function(e,t){this.logger.error("method registerListenerOnMapFocusElement not implemented")}},{key:"createCopyrightsDiv",value:function(){var e=this.uniqId("copyrights-div");this.copyrightsDiv=Tn.createDiv("".concat(e),this.node,"copyrights ".concat(this.mapProviderCssClass),void 0,this.additionalCssClass),Tn.setDisplayNone(this.copyrightsDiv)}},{key:"uniqId",value:function(e){return this.idPrefix+e}},{key:"registerInternalListener",value:function(e,t){var n=this.findInternalListener(e,t);if(!n)return n={eventId:e,callback:t},this.registeredListeners.push(n),n}},{key:"findInternalListener",value:function(e,t){return this.registeredListeners.find((function(n){return n.eventId===e&&n.callback===t}))}},{key:"unregisterInternalListener",value:function(e,t){var n=this.findInternalListener(e,t);return n&&(this.registeredListeners=this.registeredListeners.filter((function(n){return n.eventId!==e||n.callback!==t}))),n}},{key:"_pushEvent",value:function(e,t){var n,r=Fn(this.registeredListeners);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.eventId===e&&i.callback(t)}}catch(e){r.e(e)}finally{r.f()}}},{key:"addBoundChangeListener",value:function(e){return!!this.registerInternalListener(Wn,e)}},{key:"removeBoundChangeListener",value:function(e){return!!this.unregisterInternalListener(Wn,e)}},{key:"addMarkerChangeListener",value:function(e){return!!this.registerInternalListener(Zr,e)}},{key:"removeMarkerChangeListener",value:function(e){return!!this.unregisterInternalListener(Zr,e)}},{key:"addSelectionChangeListener",value:function(e){return!!this.registerInternalListener(Yn,e)}},{key:"removeSelectionChangeListener",value:function(e){return!!this.unregisterInternalListener(Yn,e)}},{key:"addFilterChangeListener",value:function(e){return!!this.registerInternalListener(Qr,e)}},{key:"removeFilterChangeListener",value:function(e){return!!this.unregisterInternalListener(Qr,e)}},{key:"addHoverChangeListener",value:function(e){return!!this.registerInternalListener(rr,e)}},{key:"removeHoverChangeListener",value:function(e){return!!this.unregisterInternalListener(rr,e)}},{key:"_handleBoundsChanged",value:function(e){if(this.boundChangedDisable)this.boundChangedDisable=!1;else{var t=this.getBounds();if(t){this.updateViewport();var n={};n[Gn]=t,n[Xn]=e,this._pushEvent(Wn,n)}}}},{key:"setStay",value:function(e){if(!e.isValid())throw new Error("stay is not valid");this.availabilityCheck.saveStay(e)&&(this.cleanAvailabilityTileData(this.features.repository(zn).data),this.updateViewport())}},{key:"cleanAvailabilityTileData",value:function(e){e.forEach((function(e){e.hasTileData()&&(e.tileData.status=hr,e.tileData.price=void 0)}))}},{key:"refresh",value:function(){this.updateViewport()}},{key:"updatePropertiesAvailability",value:function(e){var t=this;return this.availabilityCheck.updateAvailability(e).then((function(e){return e.forEach((function(e){return t._fixMarkerToUse(e)}))}))}},{key:"getBounds",value:function(){var e=this.nativeBounds();if(e)return this.asBounds(e)}},{key:"_handleMapClick",value:function(){var e=this;this.actionsOnMapClick.forEach((function(t){switch(t){case si:e._clearHighlightedFeature();break;case ui:e.setSelectedFeature(void 0,!0);break;case ci:e._closePopup();break;case li:e.routes.hideRoutes()}}))}},{key:"_handleMarkerClick",value:function(e,t,n){var r=this,i=e;i||t!==gi||(i=this.popup.feature),i&&i.visible&&i!==this.selectedFeature&&Rn(this.markerActionsOnClick[i.type],i.hashKeys).forEach((function(e){switch(e){case Or:r._setHighlightedFeature(i);break;case Er:r.setSelectedFeature(i,!0);break;case Sr:i.marker&&r._bounceMarker(i.marker);break;case Dr:r._openPopup(i);break;case Tr:r._closePopup();break;case Ar:r._zoomToExtent(i.children);break;case Br:r.routes.showRoutes(i)}}))}},{key:"_asKey",value:function(e){return"".concat(e.type,"-").concat(e.id)}},{key:"_setPopupVisible",value:function(e){e?Tn.unsetDisplayNone(this.popup.visibleElement):Tn.setDisplayNone(this.popup.visibleElement)}},{key:"_findFeature",value:function(e,t){return this.features.repository(t).find(e)}},{key:"setPopupContent",value:function(e,t,n){var r=this._findFeature(e,t);r&&(r.popupContent=n)}},{key:"_openPopup",value:function(e){if(this.popup){if(e&&!e.popupContent&&e.name){var t=Tn.createDiv(this.uniqId("popup-div"),void 0,"default-popup-content",void 0,this.additionalCssClass);Tn.createSpan(this.uniqId("popup-span"),t,void 0,void 0,e.name),e.popupContent=t}void 0!==this.popup.feature&&this.popup.feature===e||(this.popup.feature=e),this.popup.feature&&this.popup.feature.popupContent?(this.fillPopupContent(this.popup.feature),this._setPopupVisible(!0),this.updatePopupPositionOnLayer()):(this.fillPopupContent(),this._setPopupVisible(!1))}}},{key:"_closePopup",value:function(){delete this.popup.feature,this.fillPopupContent(),this._setPopupVisible(!1)}},{key:"fillPopupContent",value:function(e){if(Tn.removeAllChildren(this.popup.content),e&&e.popupContent){this.popup.content.appendChild(e.popupContent);var t=this.popup.backupStyleClass,n=Rn(this.popupPositions[e.type],e.hashKeys),r=[e.type,e.status,n];e.qualifiers&&r.push.apply(r,Mn(e.qualifiers)),this.popup.backupStyleClass=r,Tn.switchClasses(this.popup.cssElement,t,this.popup.backupStyleClass)}else{var i=this.popup.backupStyleClass;this.popup.backupStyleClass=void 0,Tn.switchClasses(this.popup.cssElement,i,this.popup.backupStyleClass)}}},{key:"fillPopupExternally",value:function(e,t){e.popupContent=t,this._openPopup(e)}},{key:"isFeatureSelected",value:function(e){return this.selectedFeature&&e&&this.selectedFeature.id===e.id&&this.selectedFeature.type===e.type}},{key:"getFeatureSelected",value:function(){var e;return null===(e=this.selectedFeature)||void 0===e?void 0:e.toData()}},{key:"setSelectedFeature",value:function(e,t){if(!this.isFeatureSelected(e)){var n=this.selectedFeature;if(this.selectedFeature=e,n&&n.marker){var r=Rn(this.zIndexes[n.type],n.hashKeys);this._setMarkerZIndex(n.marker,r)}if(e&&e.marker){var i=Rn(this.zIndexes[e.type],Nn(e.status,!0,e.qualifiers));this._setMarkerZIndex(e.marker,i)}if(n&&this.routes.hideRoutes(n),(e||n)&&t){var o={};e?(o[$n]=Qn,o[er]=e.toData(),o[nr]=this.fillPopupExternally.bind(this,e),n&&(o[tr]=n.toData())):(o[$n]=Jn,o[er]=n.toData(),o[nr]=this.fillPopupExternally.bind(this,n)),this._pushEvent(Yn,o)}}}},{key:"_zoomToExtent",value:function(e){if(e&&e.length>0){var t=e.map((function(e){return e.properties.latLng})),n=this.boundsContaining(t);this.fitBounds(n.sw,n.ne)}}},{key:"handleMarkerMouseOver",value:function(e,t,n){var r=this,i=e;if(i||t!==gi||(i=this.popup.feature),i&&i.visible&&i.type){var o=this._asKey(i),a=this.featuresOver.has(o);this.featuresOver.set(o,t),a||Rn(this.markerActionsOnMouseOver[i.type],i.hashKeys).forEach((function(e){switch(e){case Rr:r._setHighlightedFeature(i);break;case Nr:r._openPopup(i);break;case jr:var t={};t[ir]=or,t[sr]=i.toData(),t[ur]=r.fillPopupExternally.bind(r,i),r._pushEvent(rr,t)}}))}}},{key:"handleMarkerMouseOut",value:function(e,t,n){var r=this,i=e;if(i||t!==gi||(i=this.popup.feature),i&&i.visible){var o=this._asKey(i);this.featuresOver.get(o)===t&&(this.featuresOver.delete(o),Rn(this.markerActionsOnMouseOut[i.type],i.hashKeys).forEach((function(e){switch(e){case Vr:r._clearHighlightedFeature();break;case Hr:var t={};t[ir]=ar,t[sr]=i.toData(),t[ur]=r.fillPopupExternally.bind(r,i),r._pushEvent(rr,t);break;case qr:r._closePopup()}})))}}},{key:"_handleDragStart",value:function(){var e=this;this.actionsOnMapDrag.forEach((function(t){switch(t){case si:e._clearHighlightedFeature();break;case ui:e.setSelectedFeature(void 0,!0);break;case ci:e._closePopup();break;case li:e.routes.hideRoutes()}}))}},{key:"selectFeature",value:function(e,t,n){var r=this,i=this._findFeature(e,t);i&&(this.setSelectedFeature(i,!1),n&&this.setPopupContent(i.id,i.type,n),Rn(this.markerActionsOnFeatureSelect[i.type],i.hashKeys).forEach((function(e){switch(e){case wr:i.marker&&r._bounceMarker(i.marker);break;case xr:r._setHighlightedFeature(i);break;case Cr:r._openPopup(i);break;case Pr:r._closePopup();break;case Lr:r.routes.showRoutes(i)}})))}},{key:"registerRouteDestination",value:function(){var e;if(this.routes.enabled())return(e=this.routes).registerRouteDestination.apply(e,arguments);throw new Error("routes are not enabled")}},{key:"listRegisteredRouteDestinations",value:function(){return this.routes.listRegisteredRouteDestinations()}},{key:"deregisterRouteDestination",value:function(){var e;if(this.routes.enabled())return(e=this.routes).deregisterRouteDestination.apply(e,arguments);throw new Error("routes are not enabled")}},{key:"showRoutes",value:function(e,t){if(this.routes.enabled()){for(var n=this._findFeature(e,t),r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return this.routes.showRoutes(n,i,!1)}return Promise.reject("routes are not enabled")}},{key:"hideRoutes",value:function(e,t){if(this.routes.enabled()){for(var n=e&&t?this._findFeature(e,t):void 0,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return this.routes.hideRoutes(n,i,!1)}return Promise.reject("routes are not enabled")}},{key:"addRouteChangeListener",value:function(e){return!!this.registerInternalListener($r,e)}},{key:"removeRouteChangeListener",value:function(e){return!!this.unregisterInternalListener($r,e)}},{key:"_addCopyright",value:function(e,t){var n=Tn.isDisplayed(this.copyrightsDiv),r=Mn(this.copyrights.entries()).filter((function(e){var n=Ln(e,2);return n[0],n[1].content===t}));if(r.length>0)r[0][1].ownerIds.push(e);else{var i=Dn.randomAlphaNumeric(),o=this.uniqId("copyright-div-".concat(i));this.copyrights.set(o,{content:t,ownerIds:[e]});var a=Tn.createDiv(o,this.copyrightsDiv,"copyright");Tn.createSpan(this.uniqId("copyright-span-".concat(i)),a,"copyright-text",void 0,t),n||Tn.unsetDisplayNone(this.copyrightsDiv)}}},{key:"_removeCopyrightForOwner",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){Mn(e.copyrights.entries()).forEach((function(n){var r=Ln(n,2),i=r[0],o=r[1].ownerIds,a=o.findIndex((function(e){return e===t}));a>=0&&(o.splice(a,1),0==o.length&&(Tn.removeChildById(e.copyrightsDiv,i),e.copyrights.delete(i)))}))}))}},{key:"clearSelectedFeature",value:function(){var e=this,t=this.selectedFeature;t&&(this.setSelectedFeature(void 0,!1),Rn(this.markerActionsOnFeatureDeselect[t.type],t.hashKeys).forEach((function(n){switch(n){case Mr:e._clearHighlightedFeature();break;case Fr:e._closePopup();break;case Ir:e.routes.hideRoutes(t)}})))}},{key:"_highlightMarker",value:function(e,t){e.highlighted=t,this._fixMarkerToUse(e),this.keyboardFeatures.updateKeyboardFeatures()}},{key:"_setHighlightedFeature",value:function(e){this.highlightedFeature&&this.highlightedFeature.id===e.id||(this._clearHighlightedFeature(),this._highlightMarker(e,!0),this.highlightedFeature=e)}},{key:"_clearHighlightedFeature",value:function(){this.highlightedFeature&&(this._highlightMarker(this.highlightedFeature,!1),this.highlightedFeature=void 0)}},{key:"turnPropertiesVisible",value:function(e,t,n,r){this._turnFeaturesVisible(zn,e,t,n,r)}},{key:"turnLandmarksVisible",value:function(e,t,n,r){this._turnFeaturesVisible(Zn,e,t,n,r)}},{key:"turnDestinationsVisible",value:function(e,t,n,r){this._turnFeaturesVisible(Un,e,t,n,r)}},{key:"_turnFeaturesVisible",value:function(e,t,n,r,i){var o="".concat(di,",").concat(e,",").concat(pi,",").concat(t),a=this.configHelper.readParam(o);if(a===ni||a===ri)throw new Error("Cannot change config value ".concat(e," + ").concat(t,". The value is set to ").concat(a));if(a!==n&&(this.configHelper.writeParam(o,n),i&&this.checkboxes[e]&&this.checkboxes[e][t]&&(this.checkboxes[e][t].checked=n),this.updateViewport(),r)){var s={};s[Jr]=e,s[ei]=t,s[ti]=n,this._pushEvent(Qr,s)}}},{key:"_ariaFilterBoxPropertyIconLabel",value:function(e){switch(e){case cr:return this.configHelper.getI18N(Bn.ariaFilterBoxImgPropertyAvailable);case lr:return this.configHelper.getI18N(Bn.ariaFilterBoxImgPropertyFiltered);case fr:return this.configHelper.getI18N(Bn.ariaFilterBoxImgPropertyUnavailable);case hr:default:return this.configHelper.getI18N(Bn.ariaFilterBoxImgPropertyUnknown)}}},{key:"_ariaFilterBoxPropertyCheckboxLabel",value:function(e){switch(e){case cr:return this.configHelper.getI18N(Bn.ariaFilterBoxCheckBoxPropertyAvailable);case lr:return this.configHelper.getI18N(Bn.ariaFilterBoxCheckBoxPropertyFiltered);case fr:return this.configHelper.getI18N(Bn.ariaFilterBoxCheckBoxPropertyUnavailable);case hr:default:return this.configHelper.getI18N(Bn.ariaFilterBoxCheckBoxPropertyUnknown)}}},{key:"_createFiltersBox",value:function(){var e=this;if(this.checkboxes={},this.showFilterProperties||this.showFilterLandmarks||this.showFilterDestinations){this.filtersBox=Tn.createDiv(this.uniqId("fbox"),this.node,"map-legend closed ".concat(this.mapProviderCssClass),void 0,this.additionalCssClass);var t=Tn.createDiv(this.uniqId("fbox-header"),this.filtersBox,"map-legend-header",void 0),n=Tn.createButton(this.uniqId("fbox-toggle"),t,"toggle",null,void 0);Tn.setAriaLabel(n,this.configHelper.getI18N(Bn.ariaFilterBoxToggleLegend)),this.filtersBox.clean=[this.addEventListener(this.filtersBox,"click",(function(t){"checkbox"!==t.target.type&&Tn.inverseClass(e.filtersBox,"open","closed")}))],Tn.createH2(this.uniqId("fbox-title"),t,null,null,this.configHelper.getI18N(Bn.filterBoxLegend));var r=this.configHelper.visibilityBooleanByStatus(),i=this.configHelper.visibilityByStatus();if(this.showFilterProperties){var o=Tn.createUl(this.uniqId("fbox-prop-list"),this.filtersBox,"fbox-list ".concat(zn),void 0),a=function(e,t,n,r,i,a,s,u){var c=Tn.createLi(this.uniqId("fbox-prop-".concat(t)),o,t,void 0,void 0),l=Tn.createImg(this.uniqId("fbox-prop-icon-".concat(t)),c,"status-image",void 0,u,r);Tn.setPresentationRole(l);var f=Tn.createLabel(this.uniqId("fbox-prop-lbl-".concat(t)),c),h=Tn.createSpan(this.uniqId("fbox-prop-span-".concat(t)),f,"text",void 0,n);if(a){var d=Tn.createCheckbox(this.uniqId("fbox-prop-cb-".concat(t)),c,null,null,t,s,i);Tn.setAriaLabelledBy(d,h.id),this.checkboxes[zn]||(this.checkboxes[zn]={}),this.checkboxes[zn][t]=d,this.addEventListener(d,"click",(function(n){e(t,n.target.checked,!0)}))}}.bind(this),s=function(e,t,n,r,i,a,s){var u=Tn.createLi(this.uniqId("fbox-prop-".concat(t)),o,t,void 0,void 0),c=s(this.uniqId("fbox-prop-icon-".concat(t)),u,"price",t,"$").main;Tn.addClasses(c,["price-marker","price-marker-legend",pr]);var l=Tn.createLabel(this.uniqId("fbox-prop-lbl-".concat(t)),u,void 0,void 0,void 0),f=Tn.createSpan(this.uniqId("fbox-prop-span-".concat(t)),l,"text",void 0,n);if(i){var h=Tn.createCheckbox(this.uniqId("fbox-prop-cb-".concat(t)),u,null,null,t,a,r);Tn.setAriaLabelledBy(h,f.id),this.checkboxes[zn]||(this.checkboxes[zn]={}),this.checkboxes[zn][t]=h,this.addEventListener(h,"click",(function(n){e(t,n.target.checked,!0)}))}}.bind(this),u=r[zn],c=i[zn],l=this.turnPropertiesVisible.bind(this),f=this._ariaFilterBoxPropertyCheckboxLabel(status),h=this._ariaFilterBoxPropertyIconLabel(status);if(c[cr]!==ri){var d=this.configHelper.getI18N(Bn.filterBoxPropertyAvailable);this.markerTypes[cr]===vr?s(l,cr,d,f,c[cr]!==ni,u[cr],this._createGenericTextMarker.bind(this)):a(l,cr,d,h,f,c[cr]!==ni,u[cr],this.icons.property[cr])}if(c[lr]!==ri){var p=this.configHelper.getI18N(Bn.filterBoxPropertyFiltered);this.markerTypes[lr]===vr?s(l,lr,p,f,c[lr]!==ni,u[lr],this._createGenericTextMarker.bind(this)):a(l,lr,p,h,f,c[lr]!==ni,u[lr],this.icons.property[lr])}if(c[fr]!==ri){var v=this.configHelper.getI18N(Bn.filterBoxPropertyUnavailable);a(l,fr,v,h,f,c[fr]!==ni,u[fr],this.icons.property[fr])}if(c[hr]!==ri){var y=this.configHelper.getI18N(Bn.filterBoxPropertyUnknown);a(l,hr,y,h,f,c[hr]!==ni,u[hr],this.icons.property[hr])}}if(this.showFilterLandmarks){var m=Tn.createUl(this.uniqId("fbox-landmark-list"),this.filtersBox,"fbox-list ".concat(Zn)),g=Tn.createLi(this.uniqId("fbox-landmark-".concat(hr)),m),_=this.icons.landmark.legend,b=this.configHelper.getI18N(Bn.filterBoxLandmark),k=this.configHelper.getI18N(Bn.ariaFilterBoxImgLandmark),w=this.configHelper.getI18N(Bn.ariaFilterBoxCheckBoxLandmark),x=Tn.createImg(this.uniqId("fbox-landmark-icon-".concat(hr)),g,"landmark-image",void 0,_,k);Tn.setPresentationRole(x);var C=Tn.createLabel(this.uniqId("fbox-landmark-lbl-".concat(hr)),g),P=Tn.createSpan(this.uniqId("fbox-landmark-span-".concat(hr)),C,"text",void 0,b),L=this.turnLandmarksVisible.bind(this),M=r[Zn];if(i[Zn][hr]!==ni){var F=Tn.createCheckbox(this.uniqId("fbox-landmark-cb-".concat(hr)),g,null,null,null,M[hr],w);Tn.setAriaLabelledBy(F,P.id),this.checkboxes[Zn]={},this.checkboxes[Zn][hr]=F,this.addEventListener(F,"click",(function(e){L(hr,e.target.checked,!0)}))}}if(this.showFilterDestinations){var I=Tn.createUl(this.uniqId("fbox-destination-list"),this.filtersBox,"fbox-list ".concat(Un)),E=Tn.createLi(this.uniqId("fbox-destination-".concat(hr)),I),S=this.icons.destination.legend,O=this.configHelper.getI18N(Bn.filterBoxDestination),D=this.configHelper.getI18N(Bn.ariaFilterBoxImgDestination),T=this.configHelper.getI18N(Bn.ariaFilterBoxCheckBoxDestination),A=Tn.createImg(this.uniqId("fbox-destination-icon-".concat(hr)),E,"destination-image",void 0,S,D);Tn.setPresentationRole(A);var B=Tn.createLabel(this.uniqId("fbox-destination-lbl-".concat(hr)),E),j=Tn.createSpan(this.uniqId("fbox-destination-span-".concat(hr)),B,"text",void 0,O),R=this.turnDestinationsVisible.bind(this),N=r[Un];if(i[Un][hr]!==ni){var V=Tn.createCheckbox(this.uniqId("fbox-destination-cb-".concat(hr)),E,null,null,null,N[hr],T);Tn.setAriaLabelledBy(V,j.id),this.checkboxes[Un]={},this.checkboxes[Un][hr]=V,this.addEventListener(V,"click",(function(e){R(hr,e.target.checked,!0)}))}}}}},{key:"_createGenericTextMarker",value:function(e,t,n,r,i){var o=Tn.createDiv("".concat(e,"-div"),t,"".concat(this.mapProviderCssClass," ").concat(n,"-text ").concat(r),void 0,this.additionalCssClass),a=Tn.createSpan("".concat(e,"-label"),o,"".concat(n,"-label"),void 0,void 0);return Tn.createSpan("".concat(e,"-span"),a,"".concat(n,"-content"),void 0,i),{main:o,span:a}}},{key:"_createGenericPriceTextMarker",value:function(e,t,n,r){var i=this._asKey(t),o=this._convertToCurrency(t.price),a=this._createGenericTextMarker(this.uniqId("price-marker-".concat(i)),e,"price",n,o),s=a.main,u=a.span;return s.bounceElement=u,s.cssElement=s,r&&this._createTextLabel(s,t),s}},{key:"_createTextLabel",value:function(e,t){e.hasTextLabel=!0;var n=this._asKey(t),r=Tn.createDiv(this.uniqId("text-lbl-".concat(n)),e.cssElement,"text-label-container",void 0,this.additionalCssClass),i=Tn.createSpan(this.uniqId("text-lbl-".concat(n,"-span")),r,"text-label",void 0,t.name);e.updateTextLabel=function(e){return Tn.changeSpanTextContent(i,e.name)},e.removeTextLabel=function(){Tn.detach(r),e.hasTextLabel=!1,e.updateTextLabel=void 0}}},{key:"_createGenericPopup",value:function(e){var t=Tn.createDiv(this.uniqId("popup"),e,"popup ".concat(this.mapProviderCssClass),"visibility:false",this.additionalCssClass),n=Tn.createDiv(this.uniqId("popup-close-div"),t,"popup-close-button close-button");Tn.createDiv(this.uniqId("popup-close-div-lr"),n,"leftright"),Tn.createDiv(this.uniqId("popup-close-div-rl"),n,"rightleft"),Tn.createDiv(this.uniqId("popup-close-div-c"),n,"close");var r=this._closePopup.bind(this);return t.content=Tn.createDiv(this.uniqId("popup-content"),t,"popup-content"),t.clean=[this.addEventListener(n,"click",(function(e){e.stopPropagation(),r()}))],t.visibleElement=void 0,t.cssElement=void 0,t}},{key:"_createHtmlClusterMarker",value:function(e,t){var n=t.id,r=Tn.createDiv(this.uniqId("cluster-marker-".concat(n)),e,"cluster-marker","position:absolute;visibility:false",this.additionalCssClass),i=Tn.createSpan(this.uniqId("cluster-marker-label-".concat(n)),r,"cluster-label"),o=this._createClusterLabel(t);return Tn.createSpan(this.uniqId("cluster-marker-content-".concat(n)),i,"cluster-label-content",void 0,o),r.cssElement=r,{main:r,span:i}}},{key:"_convertToCurrency",value:function(e,t){if(!e||isNaN(e))return e;var n=t||Hn(e),r={style:"currency",currency:this.iso4217CurrencyCode,minimumFractionDigits:n,maximumFractionDigits:n};return new Intl.NumberFormat(this.locale,r).format(e)}},{key:"_createClusterLabel",value:function(e){if(void 0!==e.minPrice){var t=this._convertToCurrency(e.minPrice);return this.configHelper.getI18N(Bn.propertyClusterLabelWithPrice,e.children.length,t)}return this.configHelper.getI18N(Bn.propertyClusterLabel,e.children.length)}},{key:"_createClusterMarker",value:function(e,t){var n=this._createHtmlClusterMarker(e,t),r=n.main,i=n.span;return r.bounceElement=i,r.cssElement=r,r}},{key:"_clearClusters",value:function(){var e=this,t=this.features.repository(Kn);t.data.forEach((function(t){return e._deleteFeatureMarker(t)})),t.clearAll()}},{key:"_pushClusterData",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Fn(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n?this.features.upsertUserData(i):this.features.upsertTileData(i)}}catch(e){r.e(e)}finally{r.f()}}},{key:"updateViewport",value:function(e){var t=this.configHelper.visibilityBooleanByStatus(),n=e;return n||(n=this.nativeBounds()),this.availabilityCheck.isAvailabilityCheckActive()?this._updateViewportWithAvailabilityCheck(t,n):this._updateViewport(t,n)}},{key:"_updateViewport",value:function(e,t){var n=this;this.boundsToRefresh=this.asBounds(t);var r=[];return r.push(new Promise((function(r){n._changePropertyMarkersVisible(t,e[zn]),r()}))),r.push(new Promise((function(r){n._changeLandmarkOrDestinationMarkersVisible(Zn,t,e[Zn]),r()}))),r.push(new Promise((function(r){n._changeLandmarkOrDestinationMarkersVisible(Un,t,e[Un]),r()}))),Promise.all(r).then((function(){Vn(n.getBounds(),n.boundsToRefresh)&&setTimeout((function(){return n.keyboardFeatures.updateKeyboardFeatures()}),100)}))}},{key:"_updateViewportWithAvailabilityCheck",value:function(e,t){var n=this;this.boundsToRefresh=this.asBounds(t);var r=[];r.push(this._updateViewport(e,t));var i=this.features.repository(zn).data.filter((function(e){return n.isFeatureInRealBound(t,e)}));return r.push(this.updatePropertiesAvailability(i).then((function(){if(Vn(n.getBounds(),n.boundsToRefresh))return n._changePropertyMarkersVisible(t,e[zn]),Promise.resolve()})).catch((function(e){n.logger.error("Failed to update availabilities: ".concat(e.message),e.stack)}))),Promise.all(r).then((function(){Vn(n.getBounds(),n.boundsToRefresh)&&n.keyboardFeatures.updateKeyboardFeatures()}))}},{key:"_changePropertyMarkersVisible",value:function(e,t){var n=this,r=this.getZoom(),i=this._updatePropertiesInBounds(e,t,r),o=i.oldInBounds,a=i.inBounds,s=[];if(this.clusterer){this._clearClusters();var u,c=this.getBounds();try{u=this.clusterer.getClustersAndFeatures(a,c,r)}catch(e){this.logger.warn("Failed to compute cluster: ".concat(e.message),e.stack)}if(u&&(this._pushClusterData(u.clusters,!1),this.features.repository(Kn).data.forEach((function(e){e.marker=n.createClusterMarkerWithClickListener(e)})),u.remainingFeatures.length>0)){var l,f=u.remainingFeatures.map((function(e){return e.id})),h=Fn(a);try{for(h.s();!(l=h.n()).done;){var d=l.value;f.includes(d.id)&&(s.push(d.id),d.marker?d.visible=!0:this._makeMarkerVisible(d,!0))}}catch(e){h.e(e)}finally{h.f()}}}else a.forEach((function(e){s.push(e.id),e.marker?e.visible=!0:n._makeMarkerVisible(e,!0)}));o.filter((function(e){return!s.includes(e.id)})).forEach((function(e){return n._makeMarkerVisible(e,!1)}))}},{key:"_changeLandmarkOrDestinationMarkersVisible",value:function(e,t,n){var r=this,i=this._updateLandmarkOrDestinationInBounds(e,t,n),o=i.oldInBounds,a=i.inBounds,s=[];a.forEach((function(e){s.push(e.id),e.marker?e.visible=!0:r._makeMarkerVisible(e,!0)})),o.filter((function(e){return!s.includes(e.id)})).forEach((function(e){return r._makeMarkerVisible(e,!1)}))}},{key:"_updatePropertiesInBounds",value:function(e,t,n){var r=this.features.repository(zn),i=r.inBounds,o={},a=[],s=[],u=[],c=[];o[cr]=a,o[lr]=s,o[fr]=u,o[hr]=c;for(var l=r.data,f=l.length,h=0;h<f;){var d=l[h];h++,this.isFeatureInRealBound(e,d)&&Rn(this.minZoomForDisplay[zn],d.hashKeys)<n&&!1!==Rn(t,[d.status])&&Rn(t,d.hashKeys)&&o[d.status].push(d)}var p=this.threshold[zn][ii];return n>=this.maxZoomForCount[zn][ii]||a.length+s.length+u.length+c.length<=p?r.inBounds=a.concat(s.concat(u.concat(c))):a.length+s.length+u.length<=p?r.inBounds=a.concat(s.concat(u)):a.length+s.length<=p?r.inBounds=a.concat(s):a.length<=p?r.inBounds=a:r.inBounds=[],{oldInBounds:i,inBounds:r.inBounds}}},{key:"_updateLandmarkOrDestinationInBounds",value:function(e,t,n){var r=this.features.repository(e),i=r.inBounds,o={selected:{threshold:1,maxZoomForCount:1,data:[]}};for(var a in this.threshold[e]){var s=Rn(this.maxZoomForCount[e],[a,ii]);o[a]={threshold:this.threshold[e][a],maxZoomForCount:s,data:[]}}for(var u=this.getZoom(),c=r.data,l=c.length,f=0;f<l;){var h=c[f];f++,this.isFeatureInRealBound(t,h)&&(this.selectFeature===h?o.selected.data.push(h):Rn(this.minZoomForDisplay[e],h.hashKeys)<u&&!1!==Rn(n,[h.status])&&Rn(n,h.hashKeys)&&Rn(o,h.hashKeys).data.push(h))}var d=[];for(var p in o){var v=o[p],y=v.threshold,m=v.maxZoomForCount,g=v.data;g.length>0&&(u>=m||g.length<=y)&&(d=d.concat(g))}return r.inBounds=d,{oldInBounds:i,inBounds:r.inBounds}}},{key:"_allFeatures",value:function(){return this.features.all()}},{key:"listFeatures",value:function(e,t){return this._listFeatures(e,t).map((function(e){return e.toData()}))}},{key:"_listFeatures",value:function(e,t){var n=this,r=this.features.all();if(t){var i=this.asNativeBounds(t.sw,t.ne);r=r.filter((function(e){return void 0!==e})).filter((function(e){return n.isFeatureInRealBound(i,e)}))}return e&&(r=r.filter(e)),r}},{key:"pushFeatureData",value:function(e,t,n){var r,i=this,o=[],a=[],s=[],u=[],c=Fn(e);try{for(c.s();!(r=c.n()).done;){var l=r.value,f=this.features.repository(l.type).find(l.id);if(f)if(f.isDataChanged(l)){var h=this.features.upsertUserData(l);this._fixMarkerToUse(h),o.push(h)}else s.push(f);else{var d=this.features.upsertUserData(l);this._fixMarkerToUse(d),a.push(d)}}}catch(e){c.e(e)}finally{c.f()}var p=a.concat(o);switch(t){case br:if(s.length===e.length)return;break;case kr:var v=e.map(this._asKey),y=this.features.all().filter((function(e){return!v.includes(i._asKey(e))}));u=this._removePushedFeatureDataAux(y,!1);break;default:throw new Error("action ".concat(t," not supported"))}if(n){var m=[];if(p.length>0){var g,_=this.boundsContaining(p.map((function(e){return e.latLng})));m.push((Pn(g={},Kr,Xr),Pn(g,Wr,p.map((function(e){return e.toData()}))),Pn(g,Gr,_),g))}if(u.length>0){var b,k=this.boundsContaining(u.map((function(e){return e.latLng})));m.push((Pn(b={},Kr,Yr),Pn(b,Wr,u),Pn(b,Gr,k),b))}m.length>0&&this._pushEvent(Zr,Pn({},Ur,m))}if(this.selectFeature&&u.map(this._asKey).includes(this._asKey(this.selectFeature))&&this.clearSelectedFeature(),p.length>0||u.length>0)return this.updateViewport(),this.boundsContaining(p.concat(s).map((function(e){return e.latLng})))}},{key:"removePushedFeatureData",value:function(e,t){var n,r,i=this;if(void 0!==e){var o=e.map((function(e){return i.features.repository(e.type).find(e.id)})).filter((function(e){return void 0!==e}));r=this._removePushedFeatureDataAux(o,t)}else{var a=this._allFeatures();r=this._removePushedFeatureDataAux(a,t)}return(null===(n=r)||void 0===n?void 0:n.length)>0&&this.updateViewport(),r}},{key:"_setMarkerIcons",value:function(e,t){if(e&&e.iconElements)for(var n in t)Tn.changeImgSrc(e.iconElements[n],t[n])}},{key:"_setMarkerZIndex",value:function(e,t){e&&Tn.setZIndex(e.zIndexElement,t)}},{key:"_bounceMarker",value:function(e){e&&e.bounceElement&&qn(e.bounceElement)}},{key:"_fixMarkerToUse",value:function(e){var t=this._identifyMarkerProperties(e),n=t.markerType,r=t.icons,i=t.obfIconWidth,o=t.zIndex,a=t.textLabel,s=t.cssClasses,u=e.markerType,c=e.marker;n!==u?this._switchMarkerType(e,t):c&&(r&&this._setMarkerIcons(c,r),i&&Tn.setWidthAndHeight(c,"".concat(i,"px"),"".concat(i,"px")),Tn.switchClasses(c.cssElement,s.toRemove,s.toAdd),c.cssClasses=s.toAdd,this._setMarkerZIndex(c,o),a?c.hasTextLabel?c.updateTextLabel(e):this._createTextLabel(c,e):c.hasTextLabel&&c.removeTextLabel())}},{key:"_identifyMarkerProperties",value:function(e){var t,n,r,i={textLabel:e.textLabel,cssClasses:{toAdd:[e.type,e.status,e.highlighted?dr:pr],toRemove:[]}};e.marker&&e.marker.cssClasses&&(t=i.cssClasses.toRemove).push.apply(t,Mn(e.marker.cssClasses)),this.mapProviderCssClass&&i.cssClasses.toAdd.push(this.mapProviderCssClass);var o=e.hashKeys,a=e.type;if(i.markerType=yr,a===zn){var s=Rn(this.markerTypes,o);i.markerType=s===vr?e.price?vr:yr:s}switch(i.markerType){case yr:i.cssClasses.toAdd.push("pin-marker"),i.icons=Pn({},yr,Rn(this.icons[e.type],o));break;case vr:i.cssClasses.toAdd.push("price-marker");break;case mr:i.cssClasses.toAdd.push("obfuscate-marker"),i.icons=Pn({},mr,Rn(this.obfuscateIcons,o)),i.obfIconWidth=Rn(this.obfuscateRadiusInMeters,o).width||0;break;case gr:i.cssClasses.toAdd.push("pin-obfuscate-marker"),i.icons=(Pn(n={},yr,Rn(this.icons[e.type],o)),Pn(n,mr,Rn(this.obfuscateIcons,o)),n),i.obfIconWidth=Rn(this.obfuscateRadiusInMeters,o).width||0;break;case _r:i.cssClasses.toAdd.push("price-obfuscate-marker"),i.icons=Pn({},mr,Rn(this.obfuscateIcons,o)),i.obfIconWidth=Rn(this.obfuscateRadiusInMeters,o).width||0;break;default:throw new Error("Unknown marker type: ".concat(i.markerType))}return e.qualifiers&&e.qualifiers.length>0&&(r=i.cssClasses.toAdd).push.apply(r,Mn(e.qualifiers)),e===this.selectedFeature?i.zIndex=Rn(this.zIndexes[e.type],Nn(e.status,!0,e.qualifiers)):i.zIndex=Rn(this.zIndexes[e.type],o),i}},{key:"_removePushedFeatureDataAux",value:function(e,t){var n,r=[],i=Fn(e.filter((function(e){return e.hasUserData()})));try{for(i.s();!(n=i.n()).done;){var o=n.value;this.popup&&this.popup.feature&&this.popup.feature.id===o.id&&this._closePopup(),o.marker&&this.removeMarkerFromMap(o.marker),this.isFeatureSelected(o)&&this.clearSelectedFeature(),o.removeUserData(),r.push(o)}}catch(e){i.e(e)}finally{i.f()}if(r.length>0&&t){var a,s=this.boundsContaining(r.map((function(e){return e.latLng})));this._pushEvent(Zr,Pn({},Ur,[(a={},Pn(a,Kr,Yr),Pn(a,Wr,r.map((function(e){return e.toData()}))),Pn(a,Gr,s),a)]))}return r.map((function(e){return{id:e.id,type:e.type}}))}},{key:"createTileFeature",value:function(e){return this.features.insertTileData(e)}},{key:"removeTileFeature",value:function(e){return this.features.deleteTileData(e)}},{key:"_makeMarkerVisible",value:function(e,t){e.visible=t,t?this._createMarker(e):e.marker&&this._deleteFeatureMarker(e)}},{key:"_createMarker",value:function(e,t){var n=t;n||(n=this._identifyMarkerProperties(e));var r=n,i=r.markerType,o=r.icons,a=r.obfIconWidth,s=r.cssClasses,u=r.zIndex,c=r.textLabel;switch(e.markerType=i,e.markerType){case vr:e.marker=this.createPriceTextMarkerWithClickListener(e,s.toAdd,u,c);break;case yr:e.marker=this.createPinMarkerWithClickListener(e,o[yr],s.toAdd,u,c);break;case mr:e.marker=this.createObfuscateMarkerWithClickListener(e,o[mr],a,s.toAdd,u,c);break;case gr:e.marker=this.createPinObfuscateMarkerWithClickListener(e,o[yr],o[mr],a,s.toAdd,u,c);break;case _r:e.marker=this.createPriceObfuscateMarkerWithClickListener(e,o[mr],a,s.toAdd,u,c);break;default:throw new Error("marker type not supported: ".concat(e.markerType))}e.marker.cssClasses=s.toAdd}},{key:"_deleteFeatureMarker",value:function(e){this.removeMarkerFromMap(e.marker),delete e.marker}},{key:"_switchMarkerType",value:function(e,t){if(e.marker&&this._deleteFeatureMarker(e),e.markerType=t.markerType,e.visible)return this._createMarker(e,t),!0}},{key:"turnKeyboardFeaturesMode",value:function(e){this.keyboardFeatures.turnKeyboardFeaturesMode(e)}},{key:"isKeyboardFeaturesModeEnabled",value:function(){return this.keyboardFeatures.isKeyboardFeaturesModeEnabled()}}])&&Sn(t.prototype,n),e}();function wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var xi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"checkAvailability",value:function(e,t){return Promise.reject("method checkAvailability not implemented")}}])&&wi(t.prototype,n),e}();function Ci(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pi=egmapsCommons.constants,Li=Pi.key_down_arrow_down,Mi=Pi.key_down_arrow_left,Fi=Pi.key_down_arrow_right,Ii=Pi.key_down_arrow_up,Ei=Pi.key_press_add,Si=Pi.key_press_minus,Oi=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.panBy=t,this.zoomIn=n,this.zoomOut=r,this.events=i,this.deltaX=5,this.deltaY=5,this.keyDownListenerCallback=this._keyDownListenerCallback.bind(this),this.keyUpListenerCallback=this._keyUpListenerCallback.bind(this),this.keyPressListenerCallback=this._keyPressListenerCallback.bind(this)}var t,n;return t=e,(n=[{key:"_panUntil",value:function(e,t,n){var r=this;this.panBy(e),setTimeout((function(){if(t()){var e=n();r._panUntil(e,t,n)}}),40)}},{key:"_keyDownListenerCallback",value:function(e){var t=this,n=e.which||e.keyCode;if([Ii,Li,Mi,Fi].includes(n))switch(e.preventDefault(),n){case Ii:this.keyUpPressed||(this.keyUpPressed=!0,this._panUntil([0,-this.deltaY],(function(){return t.keyUpPressed}),(function(){return t.deltaY<100&&(t.deltaY+=7),[0,-t.deltaY]})));break;case Li:this.keyDownPressed||(this.keyDownPressed=!0,this._panUntil([0,this.deltaY],(function(){return t.keyDownPressed}),(function(){return t.deltaY<100&&(t.deltaY+=7),[0,t.deltaY]})));break;case Mi:this.keyLeftPressed||(this.keyLeftPressed=!0,this._panUntil([-this.deltaX,0],(function(){return t.keyLeftPressed}),(function(){return t.deltaX<100&&(t.deltaX+=7),[-t.deltaX,0]})));break;case Fi:this.keyRightPressed||(this.keyRightPressed=!0,this._panUntil([this.deltaX,0],(function(){return t.keyRightPressed}),(function(){return t.deltaX<100&&(t.deltaX+=7),[t.deltaX,0]})))}}},{key:"_keyUpListenerCallback",value:function(e){var t=e.which||e.keyCode;if([Ii,Li,Mi,Fi].includes(t)){switch(e.preventDefault(),t){case Ii:this.keyUpPressed=!1,this.deltaY=5;break;case Li:this.keyDownPressed=!1,this.deltaY=5;break;case Mi:this.keyLeftPressed=!1,this.deltaX=5;break;case Fi:this.keyRightPressed=!1,this.deltaX=5}this.events.splice(0,0,"arrow_key_pressed")}}},{key:"_keyPressListenerCallback",value:function(e){var t=e.which||e.keyCode;if([Ei,Si].includes(t))switch(e.preventDefault(),t){case Ei:this.zoomIn();break;case Si:this.zoomOut()}}}])&&Ci(t.prototype,n),e}();function Di(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ai(e,t,n){return t&&Ti(e.prototype,t),n&&Ti(e,n),e}var Bi=egmapsCommons.Utils.arrayEquals,ji=function(){function e(){Di(this,e),this.from=void 0,this.to=void 0,this.roomOccupancies=[]}return Ai(e,[{key:"isValid",value:function(){return void 0!==this.from&&void 0!==this.to&&this.roomOccupancies.length>0&&this.roomOccupancies.every((function(e){return e.isValid()}))}},{key:"isSameAs",value:function(e){return!!e&&this.from===e.from&&this.to===e.to&&Bi(this.roomOccupancies,e.roomOccupancies,!1,(function(e,t){return e.isSameAs(t)}))}}]),e}(),Ri=function(){function e(){Di(this,e),this.nbAdults=0,this.childrenAges=[]}return Ai(e,[{key:"isValid",value:function(){return this.nbAdults>0}},{key:"isSameAs",value:function(e){return this.nbAdults===e.nbAdults&&Bi(this.childrenAges,e.childrenAges)}}]),e}();function Ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"getClustersAndFeatures",value:function(e,t,n){throw new Error("method getClustersAndFeatures not implemented")}}])&&Ni(t.prototype,n),e}()}])},25275:function(e,t,n){("undefined"!=typeof window?window:n.g).egmapsClusterSupercluster=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=("undefined"!=typeof window?window:n.g)["@eg-maps/commons"]},function(e,t){e.exports=("undefined"!=typeof window?window:n.g)["@eg-maps/base"]},function(e,t,n){function r(e,t,n,o,a,s){if(!(a-o<=n)){var u=o+a>>1;!function e(t,n,r,o,a,s){for(;a>o;){if(a-o>600){var u=a-o+1,c=r-o+1,l=Math.log(u),f=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1);e(t,n,r,Math.max(o,Math.floor(r-c*f/u+h)),Math.min(a,Math.floor(r+(u-c)*f/u+h)),s)}var d=n[2*r+s],p=o,v=a;for(i(t,n,o,r),n[2*a+s]>d&&i(t,n,o,a);p<v;){for(i(t,n,p,v),p++,v--;n[2*p+s]<d;)p++;for(;n[2*v+s]>d;)v--}n[2*o+s]===d?i(t,n,o,v):i(t,n,++v,a),v<=r&&(o=v+1),r<=v&&(a=v-1)}}(e,t,u,o,a,s%2),r(e,t,n,o,u-1,s+1),r(e,t,n,u+1,a,s+1)}}function i(e,t,n,r){o(e,n,r),o(t,2*n,2*r),o(t,2*n+1,2*r+1)}function o(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function a(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"SuperCluster",(function(){return X})),n(0),n(1);var c=function(e){return e[0]},l=function(e){return e[1]},f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;s(this,e),this.nodeSize=o,this.points=t;for(var u=t.length<65536?Uint16Array:Uint32Array,f=this.ids=new u(t.length),h=this.coords=new a(2*t.length),d=0;d<t.length;d++)f[d]=d,h[2*d]=n(t[d]),h[2*d+1]=i(t[d]);r(f,h,o,0,f.length-1,0)}var t,n;return t=e,(n=[{key:"range",value:function(e,t,n,r){return function(e,t,n,r,i,o,a){for(var s,u,c=[0,e.length-1,0],l=[];c.length;){var f=c.pop(),h=c.pop(),d=c.pop();if(h-d<=a)for(var p=d;p<=h;p++)s=t[2*p],u=t[2*p+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(e[p]);else{var v=Math.floor((d+h)/2);s=t[2*v],u=t[2*v+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(e[v]);var y=(f+1)%2;(0===f?n<=s:r<=u)&&(c.push(d),c.push(v-1),c.push(y)),(0===f?i>=s:o>=u)&&(c.push(v+1),c.push(h),c.push(y))}}return l}(this.ids,this.coords,e,t,n,r,this.nodeSize)}},{key:"within",value:function(e,t,n){return function(e,t,n,r,i,o){for(var s=[0,e.length-1,0],u=[],c=i*i;s.length;){var l=s.pop(),f=s.pop(),h=s.pop();if(f-h<=o)for(var d=h;d<=f;d++)a(t[2*d],t[2*d+1],n,r)<=c&&u.push(e[d]);else{var p=Math.floor((h+f)/2),v=t[2*p],y=t[2*p+1];a(v,y,n,r)<=c&&u.push(e[p]);var m=(l+1)%2;(0===l?n-i<=v:r-i<=y)&&(s.push(h),s.push(p-1),s.push(m)),(0===l?n+i>=v:r+i>=y)&&(s.push(p+1),s.push(f),s.push(m))}}return u}(this.ids,this.coords,e,t,n,this.nodeSize)}}])&&u(t.prototype,n),e}();function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m,g={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},_=Math.fround||(m=new Float32Array(1),function(e){return m[0]=+e,m[0]}),b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=L(Object.create(g),t),this.trees=new Array(this.options.maxZoom+1)}var t,n;return t=e,(n=[{key:"load",value:function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,o=t.nodeSize;n&&console.time("total time");var a="prepare ".concat(e.length," points");n&&console.time(a),this.points=e;for(var s,u,c,l,d=[],p=0;p<e.length;p++)e[p].geometry&&d.push((s=p,void 0,void 0,void 0,c=(u=h(e[p].geometry.coordinates,2))[0],l=u[1],{x:_(C(c)),y:_(P(l)),zoom:1/0,index:s,parentId:-1}));this.trees[i+1]=new f(d,M,F,o,Float32Array),n&&console.timeEnd(a);for(var v=i;v>=r;v--){var y=+Date.now();d=this._cluster(d,v),this.trees[v]=new f(d,M,F,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",v,d.length,+Date.now()-y)}return n&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],t),s=this.getClusters([-180,r,i,o],t);return a.concat(s)}var u,c=this.trees[this._limitZoom(t)],l=[],f=d(c.range(C(n),P(o),C(i),P(r)));try{for(f.s();!(u=f.n()).done;){var h=u.value,p=c.points[h];l.push(p.numPoints?w(p):this.points[p.index])}}catch(e){f.e(e)}finally{f.f()}return l}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[t];if(!o)throw new Error(r);var a,s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),u=[],c=d(i.within(o.x,o.y,s));try{for(c.s();!(a=c.n()).done;){var l=a.value,f=i.points[l];f.parentId===e&&u.push(f.numPoints?w(f):this.points[f.index])}}catch(e){c.e(e)}finally{c.f()}if(0===u.length)throw new Error(r);return u}},{key:"getLeaves",value:function(e,t,n){t=t||10,n=n||0;var r=[];return this._appendLeaves(r,e,t,n,0),r}},{key:"getTile",value:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),o=this.options,a=o.extent,s=o.radius/a,u=(n-s)/i,c=(n+1+s)/i,l={features:[]};return this._addTileFeatures(r.range((t-s)/i,u,(t+1+s)/i,c),r.points,t,n,i,l),0===t&&this._addTileFeatures(r.range(1-s/i,u,1,c),r.points,i,n,i,l),t===i-1&&this._addTileFeatures(r.range(0,u,s/i,c),r.points,-1,n,i,l),l.features.length?l:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,n,r,i){var o,a=d(this.getChildren(t));try{for(a.s();!(o=a.n()).done;){var s=o.value,u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(e,u.cluster_id,n,r,i):i<r?i++:e.push(s),e.length===n)break}}catch(e){a.e(e)}finally{a.f()}return i}},{key:"_addTileFeatures",value:function(e,t,n,r,i,o){var a,s=d(e);try{for(s.s();!(a=s.n()).done;){var u=t[a.value],c=u.numPoints,l=void 0,f=void 0,h=void 0;if(c)l=x(u),f=u.x,h=u.y;else{var p=this.points[u.index];l=p.properties,f=C(p.geometry.coordinates[0]),h=P(p.geometry.coordinates[1])}var v={type:1,geometry:[[Math.round(this.options.extent*(f*i-n)),Math.round(this.options.extent*(h*i-r))]],tags:l},y=void 0;c?y=u.id:this.options.generateId?y=u.index:this.points[u.index].id&&(y=this.points[u.index].id),void 0!==y&&(v.id=y),o.features.push(v)}}catch(e){s.e(e)}finally{s.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,s=r.minPoints,u=i/(o*Math.pow(2,t)),c=0;c<e.length;c++){var l=e[c];if(!(l.zoom<=t)){l.zoom=t;var f,h=this.trees[t+1],p=h.within(l.x,l.y,u),v=l.numPoints||1,y=v,m=d(p);try{for(m.s();!(f=m.n()).done;){var g=f.value,_=h.points[g];_.zoom>t&&(y+=_.numPoints||1)}}catch(e){m.e(e)}finally{m.f()}if(y>=s){var b,w=l.x*v,x=l.y*v,C=a&&v>1?this._map(l,!0):null,P=(c<<5)+(t+1)+this.points.length,L=d(p);try{for(L.s();!(b=L.n()).done;){var M=b.value,F=h.points[M];if(!(F.zoom<=t)){F.zoom=t;var I=F.numPoints||1;w+=F.x*I,x+=F.y*I,F.parentId=P,a&&(C||(C=this._map(l,!0)),a(C,this._map(F)))}}}catch(e){L.e(e)}finally{L.f()}l.parentId=P,n.push(k(w/y,x/y,P,y,C))}else if(n.push(l),y>1){var E,S=d(p);try{for(S.s();!(E=S.n()).done;){var O=E.value,D=h.points[O];D.zoom<=t||(D.zoom=t,n.push(D))}}catch(e){S.e(e)}finally{S.f()}}}}return n}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t){if(e.numPoints)return t?L({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?L({},r):r}}])&&y(t.prototype,n),e}();function k(e,t,n,r,i){return{x:_(e),y:_(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function w(e){return{type:"Feature",id:e.id,properties:x(e),geometry:{type:"Point",coordinates:[(r=e.x,360*(r-.5)),(t=e.y,n=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var t,n,r}function x(e){var t=e.numPoints,n=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?"".concat(Math.round(t/100)/10,"k"):t;return L(L({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function C(e){return e/360+.5}function P(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function L(e,t){for(var n in t)e[n]=t[n];return e}function M(e){return e.x}function F(e){return e.y}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=egmapsCommons,R=j.constants,N=j.Utils,V=egmapsBase.ClusterService,H=N.getMinPrice,q=R.type_cluster,z=R.clustering_min_points,Z=R.clustering_excluded_qualifiers,U=R.clustering_max_zoom,K=R.clustering_min_zoom,W=R.clustering_supercluster,G=R.clustering_supercluster_radius,X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var i=B(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A(this,n)}}(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this)).logger=e.logger("SuperCluster"),n.supercluster=new b({minPoints:t[z],minZoom:t[K],maxZoom:t[U],radius:t[W][G]}),n.excludedQualifiers=t[Z],n}return t=i,(n=[{key:"getClustersAndFeatures",value:function(e,t,n){var r=this._getExcludedFeatures(e),i=r.map((function(e){return e.id})),o=e.filter((function(e){return!i.includes(e.id)})),a=this._loadFeaturesForClustering(o);return this._clusterFeatures(a,r,t,n)}},{key:"_loadFeaturesForClustering",value:function(e){var t=this,n=e.map((function(e){return t._makeGeoJsonFeature(e)}));return this.supercluster.load(n)}},{key:"_clusterFeatures",value:function(e,t,n,r){var i=this._convertBoundsToBbox(n),o=e.getClusters(i,Math.floor(r));return this._getAllFeaturesAndClusters(e,t,o)}},{key:"_convertBoundsToBbox",value:function(e){return[e.sw[1],e.sw[0],e.ne[1],e.ne[0]].map(parseFloat)}},{key:"_makeGeoJsonFeature",value:function(e){var t=[e.latLng[1],e.latLng[0]];return{id:e.id,type:"Feature",geometry:{type:"Point",coordinates:t},properties:e}}},{key:"_getAllFeaturesAndClusters",value:function(e,t,n){var r,i={clusters:[],remainingFeatures:t},o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=S(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.properties.cluster){var s=a.properties.cluster_id,u=e.getLeaves(s,1/0),c=H(u.map((function(e){return e.properties.price}))),l=E(a.geometry.coordinates,2),f=l[0],h={id:s,children:u,minPrice:c,lat:l[1],lng:f,type:q};i.clusters.push(h)}else i.remainingFeatures.push(a)}}catch(e){o.e(e)}finally{o.f()}return i}},{key:"_getExcludedFeatures",value:function(e){var t=this;return e.filter((function(e){return(e.qualifiers||[]).some((function(e){return t.excludedQualifiers.includes(e)}))}))}}])&&D(t.prototype,n),i}(V)}])},84109:function(e,t,n){("undefined"!=typeof window?window:n.g).egmapsCommons=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t){e.exports="data:image/svg+xml,%3c!-- file: marker.svg --%3e %3csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3e%3cpath fill='%23026dc5' d='M16 2.667A9.326 9.326 0 006.667 12C6.667 19 16 29.333 16 29.333S25.333 19 25.333 12A9.326 9.326 0 0016 2.667zm0 12.666a3.334 3.334 0 010-6.666 3.334 3.334 0 010 6.666z'/%3e%3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3c!-- file: marker-hl.svg --%3e %3csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3e%3cpath fill='%2354a0dd' d='M16 2.667A9.326 9.326 0 006.667 12C6.667 19 16 29.333 16 29.333S25.333 19 25.333 12A9.326 9.326 0 0016 2.667zm0 12.666a3.334 3.334 0 010-6.666 3.334 3.334 0 010 6.666z'/%3e%3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3c!-- file: obfuscate.svg --%3e %3csvg xmlns='http://www.w3.org/2000/svg' height='128' width='128'%3e%3ccircle cx='64' cy='64' r='63' stroke='%23fff' stroke-width='1' fill='%23005AEB' fill-opacity='.36' stroke-opacity='1' /%3e%3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3c!-- file: obfuscate-hl.svg --%3e %3csvg xmlns='http://www.w3.org/2000/svg' height='128' width='128'%3e%3ccircle cx='64' cy='64' r='63' fill='%23005AEB' stroke='%23026dc5' stroke-width='2' fill-opacity='.36' stroke-opacity='1' /%3e%3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3c!-- file: keyboard.svg --%3e %3csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3e%3cpath d='M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z'/%3e%3c/svg%3e"},function(e,t,n){var r,i,o;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o=function(){function e(o,a){if(!(this instanceof e))return new e(o,a);a=Object.assign({},n,a);var s=Math.pow(10,a.precision);this.intValue=o=t(o,a),this.value=o/s,a.increment=a.increment||1/s,a.groups=a.useVedic?i:r,this.s=a,this.p=s}function t(t,n){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=n.decimal,o=n.errorOnInvalid,a=n.fromCents,s=Math.pow(10,n.precision),u=t instanceof e;if(u&&a)return t.intValue;if("number"==typeof t||u)i=u?t.value:t;else if("string"==typeof t)o=new RegExp("[^-\\d"+i+"]","g"),i=new RegExp("\\"+i,"g"),i=(i=t.replace(/\((.*)\)/,"-$1").replace(o,"").replace(i,"."))||0;else{if(o)throw Error("Invalid Input");i=0}return a||(i=(i*s).toFixed(4)),r?Math.round(i):i}var n={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:function(e,t){var n=t.pattern,r=t.negativePattern,i=t.symbol,o=t.separator,a=t.decimal;t=t.groups;var s=(""+e).replace(/^-/,"").split("."),u=s[0];return s=s[1],(0<=e.value?n:r).replace("!",i).replace("#",u.replace(t,"$1"+o)+(s?a+s:""))},fromCents:!1},r=/(\d)(?=(\d{3})+\b)/g,i=/(\d)(?=(\d\d)+\d\b)/g;return e.prototype={add:function(n){var r=this.s,i=this.p;return e((this.intValue+t(n,r))/(r.fromCents?1:i),r)},subtract:function(n){var r=this.s,i=this.p;return e((this.intValue-t(n,r))/(r.fromCents?1:i),r)},multiply:function(t){var n=this.s;return e(this.intValue*t/(n.fromCents?1:Math.pow(10,n.precision)),n)},divide:function(n){var r=this.s;return e(this.intValue/t(n,r,!1),r)},distribute:function(t){var n=this.intValue,r=this.p,i=this.s,o=[],a=Math[0<=n?"floor":"ceil"](n/t),s=Math.abs(n-a*t);for(r=i.fromCents?1:r;0!==t;t--){var u=e(a/r,i);0<s--&&(u=u[0<=n?"add":"subtract"](1/r)),o.push(u)}return o},dollars:function(){return~~this.value},cents:function(){return~~(this.intValue%this.p)},format:function(e){var t=this.s;return"function"==typeof e?e(this,t):t.format(this,Object.assign({},t,e))},toString:function(){var e=this.s,t=e.increment;return(Math.round(this.intValue/this.p/t)*t).toFixed(e.precision)},toJSON:function(){return this.value}},e},"object"===a(t)&&void 0!==e?e.exports=o():void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i)},function(e,t){e.exports="data:image/svg+xml,%3c!-- file: left-arrow.svg --%3e %3csvg xmlns='http://www.w3.org/2000/svg' height='24' width='14'%3e%3cpath d='M9.87.613Q9.55.96 8.08 2.523 6.612 4.085 4.983 5.82q-1.628 1.736-2.95 3.125L.735 10.335q-.343.322-.54.756-.195.434-.195.88 0 .447.196.881t.539.756l1.298 1.39q1.322 1.388 2.95 3.124l3.098 3.299q1.47 1.562 1.788 1.91.686.669 1.64.669.956 0 1.617-.67t.723-1.537q.06-.868-.723-1.761l-7.518-8.06 7.665-8.06q.784-.794.723-1.712-.062-.917-.723-1.587-.784-.67-1.75-.608-.968.062-1.654.608z'/%3e%3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3c!-- file: right-arrow.svg --%3e %3csvg xmlns='http://www.w3.org/2000/svg' height='24' width='14'%3e%3cpath d='M4.13 23.387q.32-.347 1.789-1.91 1.469-1.562 3.098-3.298 1.628-1.736 2.95-3.125l1.298-1.389q.343-.322.54-.756.195-.434.195-.88 0-.447-.196-.881t-.539-.756l-1.298-1.39q-1.322-1.388-2.95-3.124L5.919 2.579Q4.449 1.017 4.13.67 3.445 0 2.49 0 1.534 0 .873.67T.15 2.207q-.06.868.723 1.761l7.518 8.06-7.665 8.06q-.784.794-.723 1.712.062.917.723 1.587.784.67 1.75.608.968-.062 1.654-.608z'/%3e%3c/svg%3e"},function(e,t,n){n.r(t),n.d(t,"constants",(function(){return r})),n.d(t,"defaultConfig",(function(){return $r})),n.d(t,"ConfigHelper",(function(){return fo})),n.d(t,"Utils",(function(){return o})),n.d(t,"HtmlUtils",(function(){return a})),n.d(t,"ttlCache",(function(){return ba})),n.d(t,"Animation",(function(){return s})),n.d(t,"i18nKeys",(function(){return i})),n.d(t,"icons",(function(){return ka}));var r={};n.r(r),n.d(r,"cfg_map",(function(){return w})),n.d(r,"on_map_drag",(function(){return x})),n.d(r,"on_map_click",(function(){return C})),n.d(r,"map_action_clear_highlight",(function(){return P})),n.d(r,"map_action_clear_selection",(function(){return L})),n.d(r,"map_action_close_popup",(function(){return M})),n.d(r,"map_action_hide_routes",(function(){return F})),n.d(r,"google_maps_css_class",(function(){return I})),n.d(r,"google_maps_options",(function(){return E})),n.d(r,"google_maps_additional_config",(function(){return S})),n.d(r,"google_maps_style_default_map_id",(function(){return O})),n.d(r,"google_maps_api_url",(function(){return D})),n.d(r,"mapbox_css_class",(function(){return T})),n.d(r,"mapbox_options",(function(){return A})),n.d(r,"mapbox_additional_config",(function(){return B})),n.d(r,"mapbox_access_token",(function(){return j})),n.d(r,"no_mapbox_access_token_set",(function(){return R})),n.d(r,"mapbox_style_streets",(function(){return N})),n.d(r,"mapbox_style_streets_bare",(function(){return V})),n.d(r,"mapbox_style_streets_pois_transports",(function(){return H})),n.d(r,"mapbox_rtl_text_plugin",(function(){return q})),n.d(r,"mapbox_rtl_text_plugin_url",(function(){return z})),n.d(r,"mapbox_padding",(function(){return Z})),n.d(r,"mapbox_scale_control",(function(){return U})),n.d(r,"mapbox_navigation_control",(function(){return K})),n.d(r,"mapbox_geolocate_control",(function(){return W})),n.d(r,"mapbox_fullscreen_control",(function(){return G})),n.d(r,"mapbox_control_enabled",(function(){return X})),n.d(r,"mapbox_control_options",(function(){return Y})),n.d(r,"mapbox_control_position",(function(){return $})),n.d(r,"mapbox_api_js_url",(function(){return Q})),n.d(r,"mapbox_api_css_url",(function(){return J})),n.d(r,"mapbox_locale_plugin_url",(function(){return ee})),n.d(r,"cfg_markers",(function(){return te})),n.d(r,"threshold",(function(){return ne})),n.d(r,"cfg_show",(function(){return re})),n.d(r,"cfg_filters",(function(){return ie})),n.d(r,"cfg_locale",(function(){return oe})),n.d(r,"additional_css_class",(function(){return ae})),n.d(r,"cfg_iso_4217_currency_code",(function(){return se})),n.d(r,"cfg_tiles",(function(){return ue})),n.d(r,"tiles_min_zoom_for_tile_request",(function(){return ce})),n.d(r,"tiles_cache",(function(){return le})),n.d(r,"tiles_cache_max_size",(function(){return fe})),n.d(r,"tiles_cache_max_distance",(function(){return he})),n.d(r,"tiles_providers_enabled",(function(){return de})),n.d(r,"tiles_providers_configuration",(function(){return pe})),n.d(r,"tiles_providers_hcom",(function(){return ve})),n.d(r,"tiles_providers_hcom_url",(function(){return ye})),n.d(r,"tiles_providers_hcom_suppliers",(function(){return me})),n.d(r,"tiles_providers_hcom_supplier_none",(function(){return ge})),n.d(r,"tiles_providers_mapbox",(function(){return _e})),n.d(r,"tiles_providers_mapbox_url",(function(){return be})),n.d(r,"tiles_providers_mapbox_tilesets",(function(){return ke})),n.d(r,"tiles_providers_toi_service",(function(){return we})),n.d(r,"tiles_providers_toi_service_url",(function(){return xe})),n.d(r,"tiles_providers_toi_service_page_size",(function(){return Ce})),n.d(r,"cfg_availability",(function(){return Pe})),n.d(r,"availability_provider_enabled",(function(){return Le})),n.d(r,"availability_providers",(function(){return Me})),n.d(r,"availability_provider_none",(function(){return Fe})),n.d(r,"availability_provider_hcom",(function(){return Ie})),n.d(r,"availability_provider_hcom_url",(function(){return Ee})),n.d(r,"cfg_i18n",(function(){return Se})),n.d(r,"format_function",(function(){return Oe})),n.d(r,"messages",(function(){return De})),n.d(r,"zIndex",(function(){return Te})),n.d(r,"icons",(function(){return Ae})),n.d(r,"icons_legend",(function(){return Be})),n.d(r,"obfuscate_markers",(function(){return je})),n.d(r,"radius_in_meters",(function(){return Re})),n.d(r,"clustering",(function(){return Ne})),n.d(r,"clustering_type",(function(){return Ve})),n.d(r,"clustering_type_supercluster",(function(){return He})),n.d(r,"clustering_type_none",(function(){return qe})),n.d(r,"clustering_min_points",(function(){return ze})),n.d(r,"clustering_min_zoom",(function(){return Ze})),n.d(r,"clustering_max_zoom",(function(){return Ue})),n.d(r,"clustering_supercluster",(function(){return Ke})),n.d(r,"clustering_supercluster_radius",(function(){return We})),n.d(r,"clustering_excluded_qualifiers",(function(){return Ge})),n.d(r,"max_zoom_for_count",(function(){return Xe})),n.d(r,"min_zoom_for_display",(function(){return Ye})),n.d(r,"mapprovider",(function(){return $e})),n.d(r,"mapprovider_google_maps",(function(){return Qe})),n.d(r,"mapprovider_mapbox",(function(){return Je})),n.d(r,"status_unknown",(function(){return et})),n.d(r,"status_available",(function(){return tt})),n.d(r,"status_unavailable",(function(){return nt})),n.d(r,"status_filtered",(function(){return rt})),n.d(r,"mark_highlighted",(function(){return it})),n.d(r,"mark_not_highlighted",(function(){return ot})),n.d(r,"type_property",(function(){return at})),n.d(r,"type_landmark",(function(){return st})),n.d(r,"type_destination",(function(){return ut})),n.d(r,"type_cluster",(function(){return ct})),n.d(r,"qualifier_hotel",(function(){return lt})),n.d(r,"qualifier_vacation_rental",(function(){return ft})),n.d(r,"qualifier_transport",(function(){return ht})),n.d(r,"qualifier_transport_airport",(function(){return dt})),n.d(r,"qualifier_transport_metro",(function(){return pt})),n.d(r,"qualifier_transport_train",(function(){return vt})),n.d(r,"qualifier_food_and_drink",(function(){return yt})),n.d(r,"qualifier_food_and_drink_bar",(function(){return mt})),n.d(r,"qualifier_food_and_drink_cafe",(function(){return gt})),n.d(r,"qualifier_food_and_drink_restaurant",(function(){return _t})),n.d(r,"qualifier_poi",(function(){return bt})),n.d(r,"qualifier_poi_cultural",(function(){return kt})),n.d(r,"qualifier_poi_natural",(function(){return wt})),n.d(r,"qualifier_poi_generic",(function(){return xt})),n.d(r,"marker_type",(function(){return Ct})),n.d(r,"marker_type_pin",(function(){return Pt})),n.d(r,"marker_type_price",(function(){return Lt})),n.d(r,"marker_type_obfuscate",(function(){return Mt})),n.d(r,"marker_type_pin_obfuscate",(function(){return Ft})),n.d(r,"marker_type_price_obfuscate",(function(){return It})),n.d(r,"marker_collision_detection",(function(){return Et})),n.d(r,"marker_collision_css_class",(function(){return St})),n.d(r,"element_popup",(function(){return Ot})),n.d(r,"element_cluster_marker",(function(){return Dt})),n.d(r,"event_type_bounds_changed",(function(){return Tt})),n.d(r,"event_type_bounds_changed_bounds",(function(){return At})),n.d(r,"event_type_bounds_changed_original_event",(function(){return Bt})),n.d(r,"event_type_bounds_changed_original_event_zoom_in",(function(){return jt})),n.d(r,"event_type_bounds_changed_original_event_zoom_out",(function(){return Rt})),n.d(r,"event_type_bounds_changed_original_event_drag",(function(){return Nt})),n.d(r,"event_type_bounds_changed_original_event_pitch",(function(){return Vt})),n.d(r,"event_type_bounds_changed_original_event_rotate",(function(){return Ht})),n.d(r,"event_type_bounds_changed_original_event_touch",(function(){return qt})),n.d(r,"event_type_selection_changed",(function(){return zt})),n.d(r,"event_type_selection_changed_action",(function(){return Zt})),n.d(r,"event_type_selection_changed_action_select",(function(){return Ut})),n.d(r,"event_type_selection_changed_action_clear_selection",(function(){return Kt})),n.d(r,"event_type_selection_changed_feature",(function(){return Wt})),n.d(r,"event_type_selection_changed_previous_selected_feature",(function(){return Gt})),n.d(r,"event_type_selection_changed_set_popup_content",(function(){return Xt})),n.d(r,"event_type_hover_changed",(function(){return Yt})),n.d(r,"event_type_hover_changed_action",(function(){return $t})),n.d(r,"event_type_hover_changed_action_mouse_enter",(function(){return Qt})),n.d(r,"event_type_hover_changed_action_mouse_leave",(function(){return Jt})),n.d(r,"event_type_hover_changed_feature",(function(){return en})),n.d(r,"event_type_hover_changed_set_popup_content",(function(){return tn})),n.d(r,"event_type_markers_changed",(function(){return nn})),n.d(r,"event_type_markers_changed_changes",(function(){return rn})),n.d(r,"event_type_markers_changed_change_type",(function(){return on})),n.d(r,"event_type_markers_changed_change_features",(function(){return an})),n.d(r,"event_type_markers_changed_change_bounds",(function(){return sn})),n.d(r,"event_type_markers_changed_change_type_added_or_updated",(function(){return un})),n.d(r,"event_type_markers_changed_change_type_removed",(function(){return cn})),n.d(r,"event_type_filter_changed",(function(){return ln})),n.d(r,"event_type_filter_changed_type",(function(){return fn})),n.d(r,"event_type_filter_changed_status",(function(){return hn})),n.d(r,"event_type_filter_changed_is_visible",(function(){return dn})),n.d(r,"event_type_route_changed",(function(){return pn})),n.d(r,"event_type_route_changed_routes_with_distance",(function(){return vn})),n.d(r,"event_type_route_changed_action",(function(){return yn})),n.d(r,"event_type_route_changed_action_show",(function(){return mn})),n.d(r,"event_type_route_changed_action_hide",(function(){return gn})),n.d(r,"marker_action_on_click",(function(){return _n})),n.d(r,"marker_action_on_click_select",(function(){return bn})),n.d(r,"marker_action_on_click_bounce",(function(){return kn})),n.d(r,"marker_action_on_click_highlight",(function(){return wn})),n.d(r,"marker_action_on_click_open_popup",(function(){return xn})),n.d(r,"marker_action_on_click_close_popup",(function(){return Cn})),n.d(r,"marker_action_on_click_zoom_to_extent",(function(){return Pn})),n.d(r,"marker_action_on_click_show_routes",(function(){return Ln})),n.d(r,"marker_action_on_feature_select",(function(){return Mn})),n.d(r,"marker_action_on_feature_select_bounce",(function(){return Fn})),n.d(r,"marker_action_on_feature_select_highlight",(function(){return In})),n.d(r,"marker_action_on_feature_select_open_popup",(function(){return En})),n.d(r,"marker_action_on_feature_select_close_popup",(function(){return Sn})),n.d(r,"marker_action_on_feature_select_show_routes",(function(){return On})),n.d(r,"marker_action_on_feature_deselect",(function(){return Dn})),n.d(r,"marker_action_on_feature_deselect_dehighlight",(function(){return Tn})),n.d(r,"marker_action_on_feature_deselect_close_popup",(function(){return An})),n.d(r,"marker_action_on_feature_deselect_hide_routes",(function(){return Bn})),n.d(r,"marker_action_on_mouse_over",(function(){return jn})),n.d(r,"marker_action_on_mouse_over_send_event",(function(){return Rn})),n.d(r,"marker_action_on_mouse_over_highlight",(function(){return Nn})),n.d(r,"marker_action_on_mouse_over_open_popup",(function(){return Vn})),n.d(r,"marker_action_on_mouse_out",(function(){return Hn})),n.d(r,"marker_action_on_mouse_out_send_event",(function(){return qn})),n.d(r,"marker_action_on_mouse_out_dehighlight",(function(){return zn})),n.d(r,"marker_action_on_mouse_out_close_popup",(function(){return Zn})),n.d(r,"mark_action_merge",(function(){return Un})),n.d(r,"mark_action_replace",(function(){return Kn})),n.d(r,"always",(function(){return Wn})),n.d(r,"never",(function(){return Gn})),n.d(r,"default_value",(function(){return Xn})),n.d(r,"map_urls",(function(){return Yn})),n.d(r,"api",(function(){return $n})),n.d(r,"css",(function(){return Qn})),n.d(r,"pluginUrls",(function(){return Jn})),n.d(r,"cfg_routes",(function(){return er})),n.d(r,"routes_eg_distances",(function(){return tr})),n.d(r,"routes_eg_distances_cache_ms",(function(){return nr})),n.d(r,"route_destination_id_and_type",(function(){return rr})),n.d(r,"route_transport_mode",(function(){return ir})),n.d(r,"route_origin",(function(){return or})),n.d(r,"route_destination",(function(){return ar})),n.d(r,"route_distance",(function(){return sr})),n.d(r,"egdistances_mode_driving",(function(){return ur})),n.d(r,"egdistances_mode_cycling",(function(){return cr})),n.d(r,"egdistances_mode_walking",(function(){return lr})),n.d(r,"cfg_accessibility",(function(){return fr})),n.d(r,"keyboard_features",(function(){return hr})),n.d(r,"keyboard_features_icon",(function(){return dr})),n.d(r,"cfg_logging",(function(){return pr})),n.d(r,"logger",(function(){return vr})),n.d(r,"key_down_arrow_up",(function(){return yr})),n.d(r,"key_down_arrow_down",(function(){return mr})),n.d(r,"key_down_arrow_left",(function(){return gr})),n.d(r,"key_down_arrow_right",(function(){return _r})),n.d(r,"key_press_add",(function(){return br})),n.d(r,"key_press_minus",(function(){return kr})),n.d(r,"key_press_zero",(function(){return wr})),n.d(r,"key_down_backspace",(function(){return xr})),n.d(r,"popup",(function(){return Cr})),n.d(r,"popup_position",(function(){return Pr})),n.d(r,"position_top",(function(){return Lr})),n.d(r,"position_bottom",(function(){return Mr})),n.d(r,"route_style",(function(){return Fr})),n.d(r,"route_line_style",(function(){return Ir})),n.d(r,"route_line_style_none",(function(){return Er})),n.d(r,"route_line_style_normal",(function(){return Sr})),n.d(r,"route_line_style_dash",(function(){return Or})),n.d(r,"route_line_style_dot",(function(){return Dr})),n.d(r,"route_line_width",(function(){return Tr})),n.d(r,"route_line_color",(function(){return Ar})),n.d(r,"route_line_opacity",(function(){return Br}));var i={};n.r(i),n.d(i,"variant",(function(){return Qr})),n.d(i,"propertyClusterLabel",(function(){return Jr})),n.d(i,"propertyClusterLabelWithPrice",(function(){return ei})),n.d(i,"keyboardFeaturesNoData",(function(){return ti})),n.d(i,"keyboardFeaturesPreviousPage",(function(){return ni})),n.d(i,"keyboardFeaturesNextPage",(function(){return ri})),n.d(i,"filterBoxLegend",(function(){return ii})),n.d(i,"ariaFilterBoxToggleLegend",(function(){return oi})),n.d(i,"ariaFilterBoxImgPropertyAvailable",(function(){return ai})),n.d(i,"ariaFilterBoxImgPropertyFiltered",(function(){return si})),n.d(i,"ariaFilterBoxImgPropertyUnavailable",(function(){return ui})),n.d(i,"ariaFilterBoxImgPropertyUnknown",(function(){return ci})),n.d(i,"ariaFilterBoxCheckBoxPropertyAvailable",(function(){return li})),n.d(i,"ariaFilterBoxCheckBoxPropertyFiltered",(function(){return fi})),n.d(i,"ariaFilterBoxCheckBoxPropertyUnavailable",(function(){return hi})),n.d(i,"ariaFilterBoxCheckBoxPropertyUnknown",(function(){return di})),n.d(i,"filterBoxPropertyAvailable",(function(){return pi})),n.d(i,"filterBoxPropertyFiltered",(function(){return vi})),n.d(i,"filterBoxPropertyUnavailable",(function(){return yi})),n.d(i,"filterBoxPropertyUnknown",(function(){return mi})),n.d(i,"filterBoxLandmark",(function(){return gi})),n.d(i,"ariaFilterBoxImgLandmark",(function(){return _i})),n.d(i,"ariaFilterBoxCheckBoxLandmark",(function(){return bi})),n.d(i,"filterBoxDestination",(function(){return ki})),n.d(i,"ariaFilterBoxImgDestination",(function(){return wi})),n.d(i,"ariaFilterBoxCheckBoxDestination",(function(){return xi}));var o={};n.r(o),n.d(o,"firstNonNull",(function(){return Zi})),n.d(o,"isObject",(function(){return Ui})),n.d(o,"isArray",(function(){return Ki})),n.d(o,"chunkArray",(function(){return Wi})),n.d(o,"removeDuplicates",(function(){return Gi})),n.d(o,"roundLatOrLng",(function(){return Xi})),n.d(o,"roundLatLng",(function(){return Yi})),n.d(o,"compareBounds",(function(){return $i})),n.d(o,"countDecimals",(function(){return Qi})),n.d(o,"arrayEquals",(function(){return Ji})),n.d(o,"identifyDecimalSeparatorForPrice",(function(){return eo})),n.d(o,"getMinPrice",(function(){return to})),n.d(o,"listHashKeysSorted",(function(){return no})),n.d(o,"randomAlphaNumeric",(function(){return io})),n.d(o,"fastHash",(function(){return oo})),n.d(o,"computeTileDistance",(function(){return ao})),n.d(o,"addMeterToLat",(function(){return so}));var a={};n.r(a),n.d(a,"createHtml",(function(){return po})),n.d(a,"createTextNode",(function(){return vo})),n.d(a,"changeSpanTextContent",(function(){return yo})),n.d(a,"changeTextNodeContent",(function(){return mo})),n.d(a,"documentIsDefined",(function(){return go})),n.d(a,"childrenAsArray",(function(){return _o})),n.d(a,"anyChildrenWithClasses",(function(){return bo})),n.d(a,"removeAllChildren",(function(){return ko})),n.d(a,"removeChildById",(function(){return wo})),n.d(a,"detachElement",(function(){return xo})),n.d(a,"reattachElement",(function(){return Co})),n.d(a,"createInput",(function(){return Po})),n.d(a,"createDiv",(function(){return Lo})),n.d(a,"createUl",(function(){return Mo})),n.d(a,"createLi",(function(){return Fo})),n.d(a,"createLabel",(function(){return Io})),n.d(a,"createButton",(function(){return Eo})),n.d(a,"createSpan",(function(){return So})),n.d(a,"createH1",(function(){return Oo})),n.d(a,"createH2",(function(){return Do})),n.d(a,"createCheckbox",(function(){return To})),n.d(a,"createImg",(function(){return Ao})),n.d(a,"setAriaLabel",(function(){return Bo})),n.d(a,"setAriaLabelledBy",(function(){return jo})),n.d(a,"setRole",(function(){return Ro})),n.d(a,"setPresentationRole",(function(){return No})),n.d(a,"setButtonRole",(function(){return Vo})),n.d(a,"changeStyles",(function(){return Ho})),n.d(a,"setDisplay",(function(){return qo})),n.d(a,"setDisplayNone",(function(){return zo})),n.d(a,"unsetDisplayNone",(function(){return Zo})),n.d(a,"isDisplayed",(function(){return Uo})),n.d(a,"changeImgSrc",(function(){return Ko})),n.d(a,"setZIndex",(function(){return Wo})),n.d(a,"setWidthAndHeight",(function(){return Go})),n.d(a,"setPosition",(function(){return Xo})),n.d(a,"setPositionAttributes",(function(){return Yo})),n.d(a,"hasClass",(function(){return $o})),n.d(a,"isIntersecting",(function(){return Qo})),n.d(a,"inverseClass",(function(){return Jo})),n.d(a,"switchClass",(function(){return ea})),n.d(a,"switchClasses",(function(){return ta})),n.d(a,"getClasses",(function(){return na})),n.d(a,"addClass",(function(){return ra})),n.d(a,"addClasses",(function(){return ia})),n.d(a,"removeClass",(function(){return oa})),n.d(a,"removeClasses",(function(){return aa})),n.d(a,"replaceClasses",(function(){return sa}));var s={};n.r(s),n.d(s,"bounce",(function(){return ua}));var u=n(4),c=n.n(u),l=n(6),f=n.n(l),h=n(7),d=n.n(h),p=n(0),v=n.n(p),y=n(1),m=n.n(y),g=n(2),_=n.n(g),b=n(3),k=n.n(b),w="map",x="onMapDrag",C="onMapClick",P="clearHighlight",L="clearSelection",M="closePopup",F="hideRoutes",I="google-maps",E="googleMaps",S="gmapsAddConfig",O="57df04e09ffe3110",D="https://maps.googleapis.com/maps/api/js?map_ids=".concat(O,"&libraries=places,geometry&v=3.39"),T="mapbox",A="mapbox",B="mapboxAddConf",j="accessToken",R="NO MAPBOX ACCESS TOKEN SET",N="mapbox://styles/mapbox/streets-v11",V="mapbox://styles/expedia-geo/ckfgvpedb2neq19pe9u3zg69x",H="mapbox://styles/expedia-geo/ckhf0zv0i01xp19mq30fv0ck4",q="rtlTextPlugin",z="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.0/mapbox-gl-rtl-text.js",Z="padding",U="scaleControl",K="navControl",W="geoLocateControl",G="fullscreenControl",X="ctrlEnabled",Y="ctrlOptions",$="ctrlPosition",Q="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js",J="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css",ee="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-language/v0.10.1/mapbox-gl-language.js",te="markers",ne="threshold",re="show",ie="filters",oe="locale",ae="additionalCssClass",se="iso4217CurrencyCode",ue="tiles",ce="minZoomForTileRequest",le="cache",fe="maxSize",he="maxDistance",de="enabled",pe="providers",ve="hcom",ye="url",me="suppliers",ge="no_supplier",_e="mapbox",be="url",ke="tilesets",we="toi_service",xe="url",Ce="pageSize",Pe="availability",Le="availabilityProvider",Me="availabilityProviders",Fe="none",Ie="hcom",Ee="availabilityCheckUrl",Se="i18n",Oe="formatFunction",De="messages",Te="zIndex",Ae="icons",Be="legend",je="obfuscateMarkers",Re="radiusInM",Ne="clustering",Ve="type",He="supercluster",qe="none",ze="minPoints",Ze="minZoom",Ue="maxZoom",Ke="superclusterSettings",We="radius",Ge="excludedQualifiers",Xe="maxZoomForCount",Ye="minZoomForDisplay",$e="mapProvider",Qe="google-maps",Je="mapbox",et="unknown",tt="available",nt="unavailable",rt="filtered",it="hl",ot="not-hl",at="property",st="landmark",ut="destination",ct="cluster",lt="hotel",ft="vacation_rental",ht="transport",dt="airport",pt="metro_station",vt="train_station",yt="foodAndDrink",mt="bar",gt="cafe",_t="restaurant",bt="poi",kt="cultural",wt="natural",xt="generic",Ct="markerType",Pt="pin",Lt="price",Mt="obfuscate",Ft="pinObfuscate",It="priceObfuscate",Et="markerCollisionDetection",St="marker-collision",Ot="popup",Dt="clusterMarker",Tt="bounds_changed",At="bounds",Bt="originalEvent",jt="zoomIn",Rt="zoomOut",Nt="drag",Vt="pitch",Ht="rotate",qt="touch",zt="selection_changed",Zt="action",Ut="select",Kt="clear_selection",Wt="feature",Gt="previousSelectedFeature",Xt="setPopupContent",Yt="hover_changed",$t="action",Qt="mouse_enter",Jt="mouse_leave",en="feature",tn="setPopupContent",nn="markers_changed",rn="changes",on="type",an="features",sn="bounds",un="addedOrUpdated",cn="removed",ln="filter_changed",fn="type",hn="status",dn="isVisible",pn="route_changed",vn="routes",yn="action",mn="show",gn="hide",_n="actionOnClick",bn="select",kn="bounce",wn="highlight",xn="openPopup",Cn="closePopup",Pn="zoomToExtent",Ln="showRoutes",Mn="actionOnFeatureSelect",Fn="bounce",In="highlight",En="openPopup",Sn="closePopup",On="showRoutes",Dn="actionOnFeatureDeselect",Tn="dehighlight",An="closePopup",Bn="hideRoutes",jn="actionOnMouseOver",Rn="sendEvent",Nn="highlight",Vn="openPopup",Hn="actionOnMouseOut",qn="sendEvent",zn="dehighlight",Zn="closePopup",Un="merge",Kn="replace",Wn="always",Gn="never",Xn="default",Yn="urls",$n="api",Qn="css",Jn="pluginUrls",er="routes",tr="egDistances",nr="cacheInMs",rr="idAndType",ir="transportMode",or="origin",ar="destination",sr="distance",ur="driving",cr="cycling",lr="walking",fr="a11y",hr="keyboardFeatures",dr="keyboardFeaturesIcon",pr="logging",vr="logger",yr=38,mr=40,gr=37,_r=39,br=43,kr=45,wr=48,xr=8,Cr="popup",Pr="position",Lr="top",Mr="bottom",Fr="style",Ir="lineStyle",Er="none",Sr="normal",Or="dash",Dr="dot",Tr="width",Ar="color",Br="opacity";function jr(e){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rr(e,t){return(Rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nr(e,t){return!t||"object"!==jr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vr(e){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zr(e,t,n){return t&&qr(e.prototype,t),n&&qr(e,n),e}var Zr="DEBUG",Ur="INFO",Kr="WARN",Wr="ERROR",Gr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rr(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vr(e);if(t){var i=Vr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nr(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t,n){return"".concat((new Date).toISOString()," EGMAPS ").concat(e||"undefined"," ").concat(t," ").concat(n)};return Hr(this,n),(e=t.call(this)).formatter=i,e.level=r,e}return zr(n,[{key:"enabled",value:function(e){if("OFF"!==this.level)switch(e){case Zr:return this.level===Zr;case Ur:return this.level===Zr||this.level===Ur;case Kr:return this.level===Zr||this.level===Ur||this.level===Kr;case Wr:return this.level===Zr||this.level===Ur||this.level===Kr||this.level===Wr;default:throw new Error("level not implemented: ".concat(e))}return!1}},{key:"log",value:function(e,t,n,r){var i,o,a,s;if(this.enabled(t||Ur)){var u=[this.formatter(e,t||Ur,n)];switch(r&&u.push(r),t){case Zr:(i=console).debug.apply(i,u);break;case Ur:default:(o=console).info.apply(o,u);break;case Kr:(a=console).warn.apply(a,u);break;case Wr:(s=console).error.apply(s,u)}}}}]),n}(function(){function e(){Hr(this,e)}return zr(e,[{key:"log",value:function(e,t,n,r){throw new Error("method log not implemented")}},{key:"enabled",value:function(e){throw new Error("method enabled not implemented")}},{key:"debug",value:function(e){var t=e.loggerName,n=e.message,r=e.stack;return this.log(t,Zr,n,r)}},{key:"info",value:function(e){var t=e.loggerName,n=e.message,r=e.stack;return this.log(t,Ur,n,r)}},{key:"warn",value:function(e){var t=e.loggerName,n=e.message,r=e.stack;return this.log(t,Kr,n,r)}},{key:"error",value:function(e){var t=e.loggerName,n=e.message,r=e.stack;return this.log(t,Wr,n,r)}},{key:"debugEnabled",value:function(){return this.enabled(Zr)}},{key:"infoEnabled",value:function(){return this.enabled(Ur)}},{key:"warnEnabled",value:function(){return this.enabled(Kr)}},{key:"errorEnabled",value:function(){return this.enabled(Wr)}}]),e}());function Xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yr,$r=function(){var e,t,n,r,i,o,a,s,u,l,f,h,d,p,y,g,b,F,I,T,N,H,He,Je,ot,Mt,Ft,It,St,Ot,Dt,Tt,At,Bt,jt,Rt,Nt,Vt,Ht,qt,zt,Zt,Ut,Kt,Wt,Gt,Xt,Yt,$t,Qt="undefined"!=typeof egmapsIcons?egmapsIcons:{},Jt=Qt.propertyAvailableIcon||v.a,en=Qt.propertyUnavailableIcon||v.a,tn=Qt.propertyFilteredIcon||v.a,nn=Qt.propertyUnknownIcon||v.a,rn=Qt.propertyHighlightedIcon||m.a,on=_.a,an=k.a,sn=Qt.landmarkUnknownIcon||v.a,un=Qt.landmarkHighlightedIcon||m.a,cn=Qt.landmarkTransportAirportIcon||v.a,ln=Qt.landmarkTransportMetroIcon||v.a,fn=Qt.landmarkTransportTrainIcon||v.a,hn=Qt.landmarkRestaurantBarIcon||v.a,dn=Qt.landmarkRestaurantCafeIcon||v.a,pn=Qt.landmarkRestaurantRestaurantIcon||v.a,vn=Qt.landmarkPoiMuseumIcon||v.a,yn=Qt.landmarkPoiTreeIcon||v.a,mn=Qt.landmarkPoiGenericIcon||v.a,gn=Qt.landmarkLegendIcon||v.a,kn=Qt.destinationUnknownIcon||v.a,xn=Qt.destinationHighlightedIcon||m.a,Cn=Qt.destinationLegendIcon||v.a,En=new Gr;return Xr($t={},$e,Qe),Xr($t,ae,""),Xr($t,w,(Xr(e={},x,[P,L,M]),Xr(e,C,[P,L,M]),e)),Xr($t,E,(Xr(t={},S,{zoom:2,mapId:O,center:{lat:0,lng:0},gestureHandling:"greedy",clickableIcons:!1,disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1}),Xr(t,Yn,Xr({},$n,D)),t)),Xr($t,A,(Xr(s={},j,R),Xr(s,q,z),Xr(s,Z,32),Xr(s,U,(Xr(n={},X,!1),Xr(n,Y,{unit:"metric"}),Xr(n,$,void 0),n)),Xr(s,K,(Xr(r={},X,!0),Xr(r,Y,{}),Xr(r,$,void 0),r)),Xr(s,W,(Xr(i={},X,!1),Xr(i,Y,{}),Xr(i,$,void 0),i)),Xr(s,G,(Xr(o={},X,!1),Xr(o,Y,{}),Xr(o,$,void 0),o)),Xr(s,B,{center:[0,0],zoom:1,fadeDuration:100,style:V}),Xr(s,Yn,(Xr(a={},$n,Q),Xr(a,Qn,J),Xr(a,Jn,[ee]),a)),s)),Xr($t,te,(Xr(St={},at,(Xr(g={},ne,Xr({},Xn,200)),Xr(g,Xe,Xr({},Xn,15)),Xr(g,Ye,Xr({},Xn,9)),Xr(g,Mn,Xr({},Xn,[Fn,In,On])),Xr(g,Dn,Xr({},Xn,[Tn,Bn])),Xr(g,_n,Xr({},Xn,[bn,wn,Ln])),Xr(g,jn,Xr({},Xn,[Rn])),Xr(g,Hn,Xr({},Xn,[qn])),Xr(g,Et,Xr({},Xn,!1)),Xr(g,re,(Xr(u={},Xn,Gn),Xr(u,tt,Wn),Xr(u,rt,Gn),Xr(u,nt,Gn),Xr(u,et,Gn),u)),Xr(g,Ne,(Xr(l={},Ve,qe),Xr(l,ze,2),Xr(l,Ze,0),Xr(l,Ue,15),Xr(l,Ke,Xr({},We,105)),Xr(l,Ge,[]),l)),Xr(g,Te,(Xr(f={},Xn,1),Xr(f,it,6),Xr(f,tt,5),Xr(f,rt,4),Xr(f,nt,3),Xr(f,et,2),f)),Xr(g,Ct,(Xr(h={},Xn,Pt),Xr(h,tt,Lt),Xr(h,rt,Pt),h)),Xr(g,Ae,(Xr(d={},Xn,nn),Xr(d,it,rn),Xr(d,tt,Jt),Xr(d,rt,tn),Xr(d,nt,en),Xr(d,et,nn),d)),Xr(g,Cr,Xr({},Pr,Xr({},Xn,Lr))),Xr(g,je,(Xr(y={},Ae,(Xr(p={},Xn,on),Xr(p,it,an),p)),Xr(y,Re,Xr({},Xn,500)),y)),g)),Xr(St,st,(Xr(H={},ne,(Xr(b={},Xn,100),Xr(b,ht,50),Xr(b,"".concat(ht,"#").concat(dt),50),Xr(b,"".concat(ht,"#").concat(pt),50),Xr(b,"".concat(ht,"#").concat(vt),50),Xr(b,yt,10),Xr(b,"".concat(yt,"#").concat(mt),10),Xr(b,"".concat(yt,"#").concat(gt),10),Xr(b,"".concat(yt,"#").concat(_t),10),Xr(b,bt,10),Xr(b,"".concat(bt,"#").concat(kt),10),Xr(b,"".concat(bt,"#").concat(wt),10),Xr(b,"".concat(bt,"#").concat(xt),10),b)),Xr(H,Xe,(Xr(F={},Xn,10),Xr(F,ht,15),Xr(F,"".concat(ht,"#").concat(dt),7),Xr(F,"".concat(ht,"#").concat(pt),14),Xr(F,"".concat(ht,"#").concat(vt),13),Xr(F,yt,14),Xr(F,"".concat(yt,"#").concat(mt),14),Xr(F,"".concat(yt,"#").concat(gt),14),Xr(F,"".concat(yt,"#").concat(_t),14),Xr(F,bt,14),Xr(F,"".concat(bt,"#").concat(kt),14),Xr(F,"".concat(bt,"#").concat(wt),14),Xr(F,"".concat(bt,"#").concat(xt),14),F)),Xr(H,Ye,Xr({},Xn,11)),Xr(H,Mn,Xr({},Xn,[Fn,In])),Xr(H,Dn,Xr({},Xn,[Tn])),Xr(H,_n,Xr({},Xn,[bn,wn])),Xr(H,jn,Xr({},Xn,[Rn])),Xr(H,Hn,Xr({},Xn,[qn])),Xr(H,Et,Xr({},Xn,!1)),Xr(H,re,(Xr(I={},Xn,!1),Xr(I,et,!1),Xr(I,ht,!1),Xr(I,"".concat(ht,"#").concat(dt),!1),Xr(I,"".concat(ht,"#").concat(pt),!1),Xr(I,"".concat(ht,"#").concat(vt),!1),Xr(I,yt,!1),Xr(I,"".concat(yt,"#").concat(mt),!1),Xr(I,"".concat(yt,"#").concat(gt),!1),Xr(I,"".concat(yt,"#").concat(_t),!1),Xr(I,bt,!1),Xr(I,"".concat(bt,"#").concat(kt),!1),Xr(I,"".concat(bt,"#").concat(wt),!1),Xr(I,"".concat(bt,"#").concat(xt),!1),I)),Xr(H,Te,(Xr(T={},Xn,1),Xr(T,it,6),Xr(T,et,2),T)),Xr(H,Ae,(Xr(N={},Xn,sn),Xr(N,Be,gn),Xr(N,it,un),Xr(N,et,sn),Xr(N,"".concat(ht,"#").concat(dt),cn),Xr(N,"".concat(ht,"#").concat(pt),ln),Xr(N,"".concat(ht,"#").concat(vt),fn),Xr(N,"".concat(yt,"#").concat(mt),hn),Xr(N,"".concat(yt,"#").concat(gt),dn),Xr(N,"".concat(yt,"#").concat(_t),pn),Xr(N,"".concat(bt,"#").concat(kt),vn),Xr(N,"".concat(bt,"#").concat(wt),yn),Xr(N,"".concat(bt,"#").concat(xt),mn),N)),Xr(H,Cr,Xr({},Pr,Xr({},Xn,Lr))),H)),Xr(St,ut,(Xr(Mt={},ne,Xr({},Xn,20)),Xr(Mt,Xe,Xr({},Xn,15)),Xr(Mt,Ye,Xr({},Xn,10)),Xr(Mt,Mn,Xr({},Xn,[Fn,In])),Xr(Mt,Dn,Xr({},Xn,[Tn])),Xr(Mt,_n,Xr({},Xn,[bn,wn])),Xr(Mt,jn,Xr({},Xn,[Rn])),Xr(Mt,Hn,Xr({},Xn,[qn])),Xr(Mt,Et,Xr({},Xn,!1)),Xr(Mt,re,(Xr(He={},Xn,!1),Xr(He,et,!1),He)),Xr(Mt,Te,(Xr(Je={},Xn,1),Xr(Je,it,6),Xr(Je,et,2),Je)),Xr(Mt,Ae,(Xr(ot={},Xn,kn),Xr(ot,Be,Cn),Xr(ot,it,xn),Xr(ot,et,kn),ot)),Xr(Mt,Cr,Xr({},Pr,Xr({},Xn,Lr))),Mt)),Xr(St,ct,(Xr(It={},_n,Xr({},Xn,[bn,Pn])),Xr(It,jn,Xr({},Xn,[Rn])),Xr(It,Hn,Xr({},Xn,[qn])),Xr(It,Et,Xr({},Xn,!1)),Xr(It,Te,(Xr(Ft={},Xn,1),Xr(Ft,it,6),Xr(Ft,et,2),Ft)),It)),St)),Xr($t,ie,(Xr(Ot={},at,!1),Xr(Ot,st,!1),Xr(Ot,ut,!1),Ot)),Xr($t,ue,(Xr(zt={},de,(Xr(Dt={},at,[]),Xr(Dt,st,[]),Xr(Dt,ut,[]),Dt)),Xr(zt,pe,(Xr(Ht={},ve,(Xr(At={},ye,"https://a.cdn-hotels.com/mapTiles/v4"),Xr(At,me,(Xr(Tt={},at,{TPI:"",HOMEAWAY:"",GDS:"",LOCAL:""}),Xr(Tt,st,Xr({},ge,"")),Tt)),At)),Xr(Ht,_e,(Xr(Nt={},be,"https://a.tiles.mapbox.com/v4"),Xr(Nt,ke,(Xr(Rt={},at,(Xr(Bt={},lt,!1),Xr(Bt,ft,!1),Bt)),Xr(Rt,st,(Xr(jt={},ht,!1),Xr(jt,bt,!1),Xr(jt,yt,!1),jt)),Rt)),Nt)),Xr(Ht,we,(Xr(Vt={},xe,"http://toi-service-stage.us-east-1-vpc-35196a52.slb.stage.aws.away.black"),Xr(Vt,Ce,10),Vt)),Ht)),Xr(zt,ce,8),Xr(zt,le,(Xr(qt={},fe,-1),Xr(qt,he,30),qt)),zt)),Xr($t,Pe,(Xr(Zt={},Le,Fe),Xr(Zt,Me,Xr({},Ie,Xr({},Ee,"/search/availability.json"))),Zt)),Xr($t,oe,"en-US"),Xr($t,se,"USD"),Xr($t,Se,(Xr(Ut={},Oe,void 0),Xr(Ut,De,{}),Ut)),Xr($t,er,(Xr(Yt={},tr,void 0),Xr(Yt,nr,18e5),Xr(Yt,Fr,(Xr(Xt={},ur,(Xr(Kt={},Ir,Sr),Xr(Kt,Ar,"#000000"),Xr(Kt,Tr,1.5),Xr(Kt,Br,.8),Kt)),Xr(Xt,cr,(Xr(Wt={},Ir,Or),Xr(Wt,Ar,"#000000"),Xr(Wt,Tr,1.54),Xr(Wt,Br,.8),Wt)),Xr(Xt,lr,(Xr(Gt={},Ir,Dr),Xr(Gt,Ar,"#000000"),Xr(Gt,Tr,1.5),Xr(Gt,Br,.8),Gt)),Xt)),Yt)),Xr($t,fr,Xr({},hr,Xr({},dr,c.a))),Xr($t,pr,Xr({},vr,En)),$t},Qr="var",Jr="propClusterLbl",ei="propClusterLblWPrice",ti="keybFeatNoData",ni="keybFeatPrev",ri="keybFeatNext",ii="fboxLegend",oi="ariaFboxTglLegend",ai="ariaFboxImgPropAvailable",si="ariaFboxImgPropFiltered",ui="ariaFboxImgPropUnavailable",ci="ariaFboxImgPropUnknown",li="ariaFboxCbPropAvailable",fi="ariaFboxCbPropFiltered",hi="ariaFboxCbPropUnavailable",di="ariaFboxCbPropUnknown",pi="fboxPropertyAvailable",vi="fboxPropertyFiltered",yi="fboxPropertyUnavailable",mi="fboxPropertyUnknown",gi="fboxLandmark",_i="ariaFboxImgLandmark",bi="ariaFboxCbLandmark",ki="fboxDestination",wi="ariaFboxImgDestination",xi="ariaFboxCbDestination";function Ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pi,Li,Mi,Fi,Ii=(Ci(Yr={},Qr,Xn),Ci(Yr,ei,"{0} properties\nfrom {1}"),Ci(Yr,Jr,"{0} properties"),Ci(Yr,ti,"no data"),Ci(Yr,ni,"Show previous..."),Ci(Yr,ri,"Show next..."),Ci(Yr,ii,"Legend"),Ci(Yr,oi,"Toggle legend"),Ci(Yr,ai,"icon used for properties matching dates and criteria"),Ci(Yr,si,"icon used for properties matching dates but not your criteria"),Ci(Yr,ui,"icon used for properties not available for these dates"),Ci(Yr,ci,"icon used for properties with no availability information for these dates"),Ci(Yr,li,"filter properties matching dates and criteria"),Ci(Yr,fi,"filter properties matching dates but not your criteria"),Ci(Yr,hi,"filter properties unavailable for these dates"),Ci(Yr,di,"filter properties with no availability information for these dates"),Ci(Yr,pi,"Matches dates and criteria"),Ci(Yr,vi,"Doesnt match your criteria"),Ci(Yr,yi,"Unavailable for these dates"),Ci(Yr,mi,"Availability unknown"),Ci(Yr,gi,"Landmarks"),Ci(Yr,_i,"icon used for landmarks"),Ci(Yr,bi,"filter landmarks"),Ci(Yr,ki,"Destinations"),Ci(Yr,wi,"icon used for destinations"),Ci(Yr,xi,"filter destinations"),Yr),Ei=(Mi="en-US",(Li=Qr)in(Pi={})?Object.defineProperty(Pi,Li,{value:Mi,enumerable:!0,configurable:!0,writable:!0}):Pi[Li]=Mi,Pi),Si=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:"en",enumerable:!0,configurable:!0,writable:!0}):e[t]="en",e}({},Qr);function Oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Di,Ti=(Oi(Fi={},Qr,"fr"),Oi(Fi,ei,"{0} tablissements\n partir de {1}"),Oi(Fi,Jr,"{0} tablissements"),Oi(Fi,ti,"Pas de donnes"),Oi(Fi,ni,"Afficher les prcdents..."),Oi(Fi,ri,"Afficher les suivants..."),Oi(Fi,ii,"Lgende"),Oi(Fi,oi,"Afficher la lgende"),Oi(Fi,ai,"icne pour les tablissements disponibles et vrifiant les critres"),Oi(Fi,si,"icne pour les tablissements disponibles mais ne vrifiant pas les critres"),Oi(Fi,ui,"icne pour les tablissements non disponibles pour les dates"),Oi(Fi,ci,"icne pour les tablissements sans information de disponibilit"),Oi(Fi,li,"filtre pour les tablissements disponibles et vrifiant les critres"),Oi(Fi,fi,"filtre pour les tablissements disponibles mais ne vrifiant pas les critres"),Oi(Fi,hi,"filtre pour les tablissements non disponibles pour les dates"),Oi(Fi,di,"filtre pour les tablissements sans information de disponibilit"),Oi(Fi,pi,"Disponibles"),Oi(Fi,vi,"Disponibles mais filtrs"),Oi(Fi,yi,"Indisponible"),Oi(Fi,mi,"Disponibilit inconnue"),Oi(Fi,gi,"Points d'intrt"),Oi(Fi,_i,"icne pour les point d'intrts"),Oi(Fi,bi,"filtre pour les point d'intrts"),Oi(Fi,ki,"Destinations"),Oi(Fi,wi,"icne pour les destinations"),Oi(Fi,xi,"filtre pour les destinations"),Fi);function Ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bi=(Ai(Di={},Xn,Ii),Ai(Di,"en-US",Ei),Ai(Di,"en",Si),Ai(Di,"fr",Ti),Di);function ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ri=function(){function e(t,n){var r=n.readParam,i=n.writeParam;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.locale=t,this.readParam=r,this.writeParam=i,this.variants=[],this.locale&&(this.variants.push(this.locale),t.length>2&&this.variants.push(this.locale.slice(0,2))),this.variants.push(Xn),this._registerMessages(),this.hookForFormat=this.readParam("".concat(Se,",").concat(Oe))}var t,n;return t=e,(n=[{key:"_registerMessages",value:function(){var e=this;this.variants.forEach((function(t){var n=Bi[t];if(n)for(var r in n){var i="".concat(Se,",").concat(De,",").concat(r);void 0===e.readParam(i)&&e.writeParam(i,n[r])}}))}},{key:"format",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.hookForFormat&&(t=this._externalFormat.apply(this,[e].concat(r))),void 0===t&&(t=this._internalFormat.apply(this,[e].concat(r))),t}},{key:"_externalFormat",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.hookForFormat.apply(this,[e].concat(n))}},{key:"_internalFormat",value:function(e){var t=this.readParam("".concat(Se,",").concat(De,",").concat(e));if(t){for(var n=t,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(i)for(var a=0;a<i.length;a++){var s=i[a];n=n.replace("{".concat(a,"}"),void 0!==s?s:"")}return n}return"".concat(e," ").concat(this.locale?this.locale:Xn," NOT FOUND")}}])&&ji(t.prototype,n),e}(),Ni=n(5),Vi=n.n(Ni);function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qi(e,t){if(e){if("string"==typeof e)return zi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zi(e,t):void 0}}function zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zi(e,t){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=qi(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i){var o=e[i];if(o)return o}}}catch(e){r.e(e)}finally{r.f()}}function Ui(e){return null!==e&&"object"===Hi(e)&&"[object Array]"!==Object.prototype.toString.call(e)}function Ki(e){return Array.isArray(e)}function Wi(e,t){if(t<=0)throw new Error("chunk size should be greater than 0");var n=0,r=e.length,i=[];for(n=0;n<r;n+=t){var o=e.slice(n,n+t);i.push(o)}return i}function Gi(e){return e&&0!==e.length?function(e){return function(e){if(Array.isArray(e))return zi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(e)):[]}function Xi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=Math.pow(10,t),r=e*n;return(r=Math.round(r))/n}function Yi(e,t){return[Xi(e[0],t),Xi(e[1],t)]}function $i(e,t){if(!e)return!t;if(!t)return!1;var n=e.sw,r=e.ne,i=e.center,o=t.sw,a=t.ne,s=t.center;return n[0]===o[0]&&n[1]===o[1]&&r[0]===a[0]&&r[1]===a[1]&&i[0]===s[0]&&i[1]===s[1]}function Qi(e){var t=Number(e);return Math.floor(t.valueOf())===t.valueOf()?0:t.toString().split(".")[1].length||0}function Ji(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return e===t};if(e.length!==t.length)return!1;var i=t.slice();return e.every((function(e,t){var o=i.findIndex((function(t){return r(e,t)}));return o>=0&&(!n||t===o)}))}function eo(e){var t=e.indexOf("."),n=e.indexOf(",");if(-1!==t||-1!==n){var r=n>t?",":".",i=n>t?n:t;if(e.length<=i+3)return r;for(var o=i+1;o<=i+3;o++){var a=e[o];if(isNaN(a)||" "===a)return r}if(e.length>=i+4){var s=e[i+4];if(!isNaN(s)&&" "!==s)return r}}}function to(e){for(var t,n,r=0;r<e.length;r++){var i=e[r];if(!t&&"string"==typeof i){var o=eo(i);o&&(n=(t=o)&&","===t?".":",")}}var a=void 0,s=void 0;if(e.forEach((function(e){var r=t?Vi()(e,{decimal:t,separator:n}).value:Vi()(e).value;(!a||a>r)&&(a=r,s=e)})),isFinite(a))return s}function no(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=n?n.sort():[],o=[],a=function(e){for(var t=e.depth;t>=0;t--)for(var n=e[t],r=n.maxQualifiers;r>=0;r--)n[r]&&(o=o.concat(n[r]))};if(t){var s={depth:1,0:[it]};ro("".concat(it,"#"),i.slice(),e,s,1,0),a(s),e&&o.push([it,e].sort().join("#")),o.push(it)}var u={depth:-1};return ro("",i.slice(),e,u,0,0),a(u),e&&o.push(e),r&&o.push(Xn),o}function ro(e,t,n,r,i,o){var a=r[i];for(a||(a={maxQualifiers:o},r[i]=a,r.depth=i);t.length>0;){var s=t.splice(0,1),u=o+1;if(a[u]||(a[u]=[]),a.maxQualifiers<u&&(a.maxQualifiers=u),a[u].push("".concat(e).concat(s).split("#").sort().join("#")),n){var c=r[i+1];c||(c={maxQualifiers:u},r[i+1]=c,r.depth=i+1),c[u]||(c[u]=[]),c[u].push("".concat(e).concat(s,"#").concat(n).split("#").sort().join("#"))}t.length>0&&ro("".concat(e).concat(s,"#"),t.slice(),n,r,i+1,o+1)}}function io(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function oo(e){return e.split("").reduce((function(e,t){var n=(e<<5)-e+t.charCodeAt(0);return n&n}),0)}function ao(e,t,n,r,i,o){var a;if(n===o)a=Math.pow(r-e,2)+Math.pow(i-t,2);else if(n>o){var s=1<<n-o;a=Math.pow(r-e/s,2)+Math.pow(i-t/s,2)}else{var u=1<<o-n;a=Math.pow(r/u-e,2)+Math.pow(i/u-t,2)}return Math.sqrt(a)}function so(e,t){var n=e+t/6378137*(180/Math.PI);return n<-180?n+360:n>180?n-360:n}function uo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?co(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t||{},this.defaultCfg=this.loadDefaultConfig(),this.cache=new Map,this.locale=this.readParam(oe),this.i18n=new Ri(this.locale,{readParam:this.readParam.bind(this),writeParam:this.writeParam.bind(this)})}var t,n;return t=e,(n=[{key:"loadDefaultConfig",value:function(){return $r()}},{key:"clearCache",value:function(){this.cache.clear()}},{key:"writeParam",value:function(e,t){this.writeParamAux(e.split(","),t,this.config),this.cache.set(e,t)}},{key:"writeParamAux",value:function(e,t,n){var r=uo(e,1)[0];if(1===e.length)n[r]=t;else{n[r]||(n[r]={});var i=n[r];e.shift(),this.writeParamAux(e,t,i)}}},{key:"hasParam",value:function(e){return this.hasParamAux(e.split(","),this.config)}},{key:"hasParamAux",value:function(e,t){var n=t[uo(e,1)[0]];return 1===e.length?void 0!==n:!!n&&(e.shift(),this.hasParamAux(e,n))}},{key:"readParam",value:function(e){if(this.cache.has(e))return this.cache.get(e);var t=this.readParamAux(e.split(","),this.config,this.defaultCfg);return this.cache.set(e,t),t}},{key:"readParamAux",value:function(e,t,n){var r=uo(e,1)[0],i=t[r];return 1===e.length?void 0===i?(n||{})[r]:null===i?void 0:i:void 0===i?n?this.readParamAux(e,n):void 0:null===i?void 0:(e.shift(),this.readParamAux(e,i,(n||{})[r]))}},{key:"listKeys",value:function(e){var t=[];return t.concat(this.listKeysAux(t,e.split(","),[],this.defaultCfg)),this.listKeysAux(t,e.split(","),[],this.config),t}},{key:"subConfig",value:function(e){var t=this,n={};return this.listKeys(e).map((function(r){var i=t.readParam(r.join(","));void 0!==i&&t.writeParamAux(r.slice(e.split(",").length),i,n)})),n}},{key:"listKeysAux",value:function(e,t,n,r){var i=uo(t,1)[0],o=r[i],a=[].concat(n);a.push(i),void 0!==o&&(1===t.length?this.listKeysAuxDeep(e,a,o):(t.shift(),this.listKeysAux(e,t,a,o)))}},{key:"listKeysAuxDeep",value:function(e,t,n){if(Ui(n))for(var r in n){var i=[].concat(t);i.push(r),this.listKeysAuxDeep(e,i,n[r])}else e.push(t)}},{key:"getI18N",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.i18n).format.apply(t,[e].concat(r))}},{key:"fillObjectWithLeafName",value:function(e,t){var n=this;this.listKeys(e).map((function(e){var r=e[e.length-1];t(r,n.readParam(e.join(",")))}))}},{key:"propertyValues",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},o={};return n.map((function(n){o[n]={};var a=[e,n,t].filter((function(e){return void 0!==e})).join(",");r.fillObjectWithLeafName(a,(function(e,t){return o[n][e.split("#").sort().join("#")]=i(t)}))})),o}},{key:"logger",value:function(e){return function(e,t){return{debug:function(n,r){return t.debug({loggerName:e,message:n,stack:r})},info:function(n,r){return t.info({loggerName:e,message:n,stack:r})},warn:function(n,r){return t.warn({loggerName:e,message:n,stack:r})},error:function(n,r){return t.error({loggerName:e,message:n,stack:r})},debugEnabled:function(){return t.debugEnabled()},infoEnabled:function(){return t.infoEnabled()},warnEnabled:function(){return t.warnEnabled()},errorEnabled:function(){return t.errorEnabled()}}}(e,this.readParam("".concat(pr,",").concat(vr)))}},{key:"icons",value:function(){return this.propertyValues("".concat(te),"".concat(Ae),[at,st,ut])}},{key:"obfuscateIcons",value:function(){return this.propertyValues("".concat(te),"".concat(je,",").concat(Ae),[at])[at]}},{key:"obfuscateRadiusInMeters",value:function(){return this.propertyValues("".concat(te),"".concat(je,",").concat(Re),[at],(function(e){return{radius:e}}))[at]}},{key:"zIndexes",value:function(){return this.propertyValues("".concat(te),"".concat(Te),[at,st,ut,ct])}},{key:"popupPositions",value:function(){return this.propertyValues("".concat(te),"".concat(Cr,",").concat(Pr),[at,st,ut])}},{key:"markerTypes",value:function(){return this.propertyValues("".concat(te),"".concat(Ct),[at])[at]}},{key:"visibilityByStatus",value:function(){return this.propertyValues("".concat(te),"".concat(re),[at,st,ut])}},{key:"markerActionsOnFeatureSelect",value:function(){return this.propertyValues("".concat(te),"".concat(Mn),[at,st,ut])}},{key:"markerActionsOnFeatureDeselect",value:function(){return this.propertyValues("".concat(te),"".concat(Dn),[at,st,ut])}},{key:"markerActionsOnClick",value:function(){return this.propertyValues("".concat(te),"".concat(_n),[at,st,ut,ct])}},{key:"markerActionsOnMouseOver",value:function(){return this.propertyValues("".concat(te),"".concat(jn),[at,st,ut,ct])}},{key:"markerActionsOnMouseOut",value:function(){return this.propertyValues("".concat(te),"".concat(Hn),[at,st,ut,ct])}},{key:"singlePropertiesValues",value:function(e,t){var n=this,r={};return t.map((function(t){r[t]=n.readParam("".concat(te,",").concat(t,",").concat(e))})),r}},{key:"threshold",value:function(){var e=this.propertyValues("".concat(te),"".concat(ne),[at,st,ut]),t=this.singlePropertiesValues("".concat(ne,",").concat(Xn),[at,st,ut]);return[at,st,ut].forEach((function(n){return e[n][Xn]=t[n]})),e}},{key:"maxZoomForCount",value:function(){var e=this.propertyValues("".concat(te),"".concat(Xe),[at,st,ut]),t=this.singlePropertiesValues("".concat(Xe,",").concat(Xn),[at,st,ut]);return[at,st,ut].forEach((function(n){return e[n][Xn]=t[n]})),e}},{key:"minZoomForDisplay",value:function(){var e=this.propertyValues("".concat(te),"".concat(Ye),[at,st,ut]),t=this.singlePropertiesValues("".concat(Ye,",").concat(Xn),[at,st,ut]);return[at,st,ut].forEach((function(n){return e[n][Xn]=t[n]})),e}},{key:"markerCollisionDetection",value:function(){var e=this.propertyValues("".concat(te),"".concat(Et),[at,st,ut,ct]),t=this.singlePropertiesValues("".concat(Et,",").concat(Xn),[at,st,ut,ct]);return[at,st,ut,ct].forEach((function(n){return e[n][Xn]=t[n]})),e}},{key:"visibilityBooleanByStatus",value:function(){var e=this.visibilityByStatus();for(var t in e)for(var n in e[t])e[t][n]=!0===e[t][n]||"true"===e[t][n]||e[t][n]===Wn;return e}},{key:"routeLineStyleByDistanceMode",value:function(){return this.propertyValues("".concat(er,",").concat(Fr),void 0,[ur,cr,lr])}}])&&lo(t.prototype,n),e}();function ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function po(e,t,n,r,i,o,a){var s=document.createElement(t);return e&&(s.id=e),i&&(s.style.cssText=i),r&&(s.className=r),a&&ra(s,a),n&&n.appendChild(s),o&&o.length>0&&vo(s,o),s}function vo(e,t){var n=document.createTextNode(t);return e&&e.appendChild(n),n}function yo(e,t){if(e&&e.children){var n=_o(e).filter((function(e){return e.nodeType===Node.TEXT_NODE}));1===n.length&&mo(n[0],t)}}function mo(e,t){e&&(e.value=t)}function go(){return void 0!==document}function _o(e){var t=[];if(e)for(var n=0;n<e.children.length;n++)t.push(e.children[n]);return t}function bo(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(e&&e.children)for(var i=0;i<e.children.length;i++){var o=e.children[i];t?function(){var e=o.className?o.className.split(" "):[];t.every((function(t){return e.includes(t)}))&&r.push(o)}():r.push(o),n&&bo(o,t,n,r)}return r}function ko(e){for(;e.lastElementChild;)e.removeChild(e.lastElementChild)}function wo(e,t){var n=document.getElementById(t);n&&n.parentNode&&n.parentNode===e&&e.removeChild(n)}function xo(e){var t;e&&(null===(t=e.parentNode)||void 0===t||t.removeChild(e))}function Co(e,t){var n;e&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e),null==t||t.appendChild(e))}function Po(e,t,n,r,i,o,a,s){var u=po(e,"input",n,r,i,void 0,s);return u.type=t,o&&(u.value=o),Bo(u,a),u}function Lo(e,t,n,r,i){return po(e,"div",t,n,r,void 0,i)}function Mo(e,t,n,r,i){return po(e,"ul",t,n,r,void 0,i)}function Fo(e,t,n,r,i,o){return po(e,"li",t,n,r,i,o)}function Io(e,t,n,r,i,o){return po(e,"label",t,n,r,i,o)}function Eo(e,t,n,r,i,o){return po(e,"button",t,n,r,i,o)}function So(e,t,n,r,i,o){return po(e,"span",t,n,r,i,o)}function Oo(e,t,n,r,i,o){return po(e,"h1",t,n,r,i,o)}function Do(e,t,n,r,i,o){return po(e,"h2",t,n,r,i,o)}function To(e,t,n,r,i,o,a,s){var u=Po(e,"checkbox",t,n,r,i,a,s);return o&&(u.checked="true"),u}function Ao(e,t,n,r,i,o,a){var s=po(e,"img",t,n,r,void 0,a);return s.src=i,Bo(s,o),s}function Bo(e,t){e.setAttribute("aria-label",t)}function jo(e,t){e.setAttribute("aria-labelledby",t)}function Ro(e,t){"presentation"===t&&e.setAttribute("aria-hidden","true"),e.setAttribute("role",t)}function No(e){Ro(e,"presentation")}function Vo(e){Ro(e,"button")}function Ho(e,t){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ho(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ho(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.indexOf(":"),a=i.slice(0,o).trim(),s=i.slice(o+1).trim();e.style[a]=s}}catch(e){r.e(e)}finally{r.f()}}function qo(e,t){e&&(e.style||(e.style={}),e.style.display=t)}function zo(e){qo(e,"none")}function Zo(e){qo(e,"")}function Uo(e){if(e)return!e.style||!e.style.display||"none"!==e.style.display}function Ko(e,t){e&&(e.src=t)}function Wo(e,t){e&&(e.style||(e.style={}),e.style.zIndex=t)}function Go(e,t,n){e&&(e.style||(e.style={}),void 0!==t&&(e.style.width="number"==typeof t?"".concat(t,"px"):t),void 0!==n&&(e.style.height="number"==typeof n?"".concat(n,"px"):n))}function Xo(e,t,n,r){if(e){var i=0,o=0;if(r)switch(r){case"top":i=-e.offsetWidth/2,o=0;break;case"middle":i=-e.offsetWidth/2,o=-e.offsetHeight/2;break;case"bottom":i=-e.offsetWidth/2,o=-e.offsetHeight;break;case"left":i=0,o=-e.offsetHeight/2;break;case"right":i=-e.offsetWidth,o=-e.offsetHeight/2;break;case"top-left":i=0,o=0;break;case"top-right":i=-e.offsetWidth,o=0;break;case"bottom-left":i=0,o=-e.offsetHeight;break;case"bottom-right":i=-e.offsetWidth,o=-e.offsetHeight}Yo(e,{left:"".concat(t+i,"px"),top:"".concat(n+o,"px")})}}function Yo(e,t){var n=t.bottom,r=t.left,i=t.right,o=t.top;e&&(n||r||i||o)&&(e.style||(e.style={}),o&&(e.style.top=o),n&&(e.style.bottom=n),r&&(e.style.left=r),i&&(e.style.right=i))}function $o(e,t){return(e.className?e.className.split(" "):[]).includes(t)}function Qo(e,t){return e.left<t.left+t.width&&e.left+e.width>t.left&&e.top<t.top+t.height&&e.top+e.height>t.top}function Jo(e,t,n){$o(e,t)?ea(e,t,n):$o(e,n)&&ea(e,n,t)}function ea(e,t,n){ta(e,[t],[n])}function ta(e,t,n){if(e){var r=e.className?e.className.split(" "):[];t&&t.forEach((function(e){r.indexOf(e)>=0&&r.splice(r.indexOf(e),1)})),n&&n.forEach((function(e){r.includes(e)||r.push(e)})),e.className=r.join(" ")}}function na(e){return e.className.split(" ")}function ra(e,t){var n=e.className?e.className.split(" "):[];n.includes(t)||n.push(t),e.className=n.join(" ")}function ia(e,t){var n=e.className.split(" ");t.forEach((function(e){n.includes(e)||n.push(e)})),e.className=n.join(" ")}function oa(e,t){var n=e.className?e.className.split(" "):[];n.indexOf(t)>=0&&n.splice(n.indexOf(t),1),e.className=n.join(" ")}function aa(e,t){var n=e.className.split(" ");t.forEach((function(e){n.indexOf(e)>=0&&n.splice(n.indexOf(e),1)})),e.className=n.join(" ")}function sa(e,t){e.className=t}function ua(e){var t=["animate__animated","animate__bounce"];e.addEventListener("animationend",(function n(r){aa(e,t),e.removeEventListener("animationend",n)})),ia(e,t)}function ca(e){return(ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function la(e,t,n){return(la="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=da(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function fa(e,t){return(fa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ha(e,t){return!t||"object"!==ca(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function da(e){return(da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function va(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ya(e,t,n){return t&&va(e.prototype,t),n&&va(e,n),e}var ma=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return!1};pa(this,e),this.hasExpired=t,this.cache={},this.listeners=new Set}return ya(e,[{key:"get",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=this.cache,o=i[n[0]],a=1;a<n.length&&o;a++)o=o[n[a]];return o&&this.hasExpired.apply(this,[o].concat(n))?(this.listeners.forEach((function(t){return t(e.EVENTS.EXPIRE,o,n)})),void this.set(void 0,n)):o}},{key:"set",value:function(e){for(var t=this.cache,n=[],r=t,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];for(var s=0;s<o.length-1;s++){if(!r[o[s]]){if(!e)return;r[o[s]]={}}n.push(r),r=r[o[s]]}if(e)r[o[o.length-1]]=e;else{delete r[o[o.length-1]];for(var u=n.length-1;u>=0&&0===Object.keys(n[u][o[u]]).length;u--)delete n[u][o[u]]}}},{key:"addListener",value:function(e){this.listeners.add(e)}},{key:"removeListener",value:function(e){this.listeners.delete(e)}}]),e}();ma.EVENTS={EXPIRE:"expire"};var ga=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fa(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=da(e);if(t){var i=da(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ha(this,n)}}(n);function n(e){return pa(this,n),t.call(this,(function(t){return t.time+e<Date.now()}))}return ya(n,[{key:"set",value:function(e){for(var t,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];(t=la(da(n.prototype),"set",this)).call.apply(t,[this,{time:Date.now(),content:e}].concat(i))}},{key:"get",value:function(){for(var e,t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(e=(t=la(da(n.prototype),"get",this)).call.apply(t,[this].concat(i)))||void 0===e?void 0:e.content}}]),n}(ma),_a=function(){function e(){pa(this,e)}return ya(e,[{key:"set",value:function(){}},{key:"get",value:function(){}}]),e}();function ba(e){return!e||e<=0?new _a:new ga(e)}var ka={leftArrowIcon:f.a,rightArrowIcon:d.a,markerIcon:v.a,markerHighlightedIcon:m.a,obfuscateIcon:_.a,obfuscateHighlightedIcon:k.a}}])},90439:function(e,t,n){var r,i;e.exports=(r=n(84109),i=n(96435),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"EGMap",(function(){return P})),n.d(t,"constants",(function(){return l})),n.d(t,"defaultConfig",(function(){return C})),n.d(t,"Stay",(function(){return o})),n.d(t,"RoomOccupancy",(function(){return a})),n.d(t,"i18nKeys",(function(){return d})),n(1),n(2);var i=egmapsBase,o=i.Stay,a=i.RoomOccupancy,s=egmapsCommons,u=s.HtmlUtils,c=s.Utils,l=s.constants,f=s.defaultConfig,h=s.ConfigHelper,d=s.i18nKeys,p=l.mapbox_css_class,v=l.google_maps_css_class,y=l.type_property,m=l.type_landmark,g=l.type_destination,_=l.cfg_filters,b=l.additional_css_class,k=l.mapprovider,w=l.mapprovider_mapbox,x=l.mapprovider_google_maps,C=function(){return JSON.parse(JSON.stringify(f()))},P=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.configHelper=new h(t),this.logger=this.configHelper.logger("EGMap"),this.showFilterProperties=this.configHelper.readParam("".concat(_,",").concat(y)),this.showFilterLandmarks=this.configHelper.readParam("".concat(_,",").concat(m)),this.showFilterDestinations=this.configHelper.readParam("".concat(_,",").concat(g))}var t,n,i;return t=e,(n=[{key:"_createMapBox",value:function(e){if("undefined"!=typeof egmapsMapbox)return new egmapsMapbox.MapBox(e);throw new Error("You need to load '@eg-maps/mapbox' to use this map provider")}},{key:"_createGMaps",value:function(e){if("undefined"!=typeof egmapsGoogleMaps)return new egmapsGoogleMaps.GMaps(e);throw new Error("You need to load '@eg-maps/google-maps' to use this map provider")}},{key:"initMapOnId",value:function(e){try{return this._initMap(document.getElementById(e))}catch(e){return Promise.reject(e)}}},{key:"initMap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=this,r=u.anyChildrenWithClasses(e,["egmaps"]);r.length>0&&(t||n.logger.warn("This container contains some other instance of eg-maps. In order to avoid unexpected behavior the container will be cleaned."),r.forEach((function(e){return u.detachElement(e)})));var i=n.configHelper.readParam("".concat(b)),o=c.randomAlphaNumeric();e.id&&(o="".concat(e.id,"-").concat(o));var a=u.createDiv(o,e,"egmaps",void 0,i);return n._initMap(a)}catch(e){return Promise.reject(e)}}},{key:"_initMap",value:function(e){try{switch(this.node=e,this.configHelper.readParam("".concat(k))){case w:u.addClass(e,p),this.mapImpl=this._createMapBox(this.configHelper);break;case x:default:u.addClass(e,v),this.mapImpl=this._createGMaps(this.configHelper)}return this.mapImpl.initMap(e)}catch(e){return Promise.reject(e)}}},{key:"centerAndZoomMap",value:function(e,t){return this.mapImpl.centerAndZoomMap(e,t)}},{key:"getCenter",value:function(){return this.mapImpl.getCenter()}},{key:"getZoom",value:function(){return this.mapImpl.getZoom()}},{key:"getBounds",value:function(){return this.mapImpl.getBounds()}},{key:"unbindAll",value:function(){this.mapImpl&&this.mapImpl.unbindAll(),u.detachElement(this.node)}},{key:"fitLatLongs",value:function(e){this.mapImpl.fitLatLongs(e)}},{key:"fitBounds",value:function(e,t){this.mapImpl.fitBounds(e,t)}},{key:"pushFeatureData",value:function(e,t){return this.mapImpl.pushFeatureData(e,t,!1)}},{key:"removePushedFeatureData",value:function(e){return this.mapImpl.removePushedFeatureData(e,!1)}},{key:"registerRouteDestination",value:function(){var e;return(e=this.mapImpl).registerRouteDestination.apply(e,arguments)}},{key:"listRegisteredRouteDestinations",value:function(){return this.mapImpl.listRegisteredRouteDestinations()}},{key:"deregisterRouteDestination",value:function(){var e;return(e=this.mapImpl).deregisterRouteDestination.apply(e,arguments)}},{key:"showRoutes",value:function(e,t){try{for(var n,r=this,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];return(n=r.mapImpl).showRoutes.apply(n,[e,t].concat(o))}catch(e){return Promise.reject(e)}}},{key:"hideRoutes",value:function(e,t){try{for(var n,r=this,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];return(n=r.mapImpl).hideRoutes.apply(n,[e,t].concat(o))}catch(e){return Promise.reject(e)}}},{key:"listFeatures",value:function(e,t){return this.mapImpl.listFeatures(e,t)}},{key:"selectFeature",value:function(e,t,n){this.mapImpl.selectFeature(e,t,n)}},{key:"clearSelectedFeature",value:function(){this.mapImpl.clearSelectedFeature()}},{key:"getFeatureSelected",value:function(){return this.mapImpl.getFeatureSelected()}},{key:"setPopupContent",value:function(e,t,n){this.mapImpl.setPopupContent(e,t,n)}},{key:"turnPropertiesVisible",value:function(e,t){this.mapImpl.turnPropertiesVisible(e,t,!1,!0)}},{key:"turnLandmarksVisible",value:function(e,t){this.mapImpl.turnLandmarksVisible(e,t,!1,!0)}},{key:"turnDestinationsVisible",value:function(e,t){this.mapImpl.turnDestinationsVisible(e,t,!1,!0)}},{key:"addBoundChangeListener",value:function(e){return this.mapImpl.addBoundChangeListener(e)}},{key:"removeBoundChangeListener",value:function(e){return this.mapImpl.removeBoundChangeListener(e)}},{key:"addMarkerChangeListener",value:function(e){return this.mapImpl.addMarkerChangeListener(e)}},{key:"removeMarkerChangeListener",value:function(e){return this.mapImpl.removeMarkerChangeListener(e)}},{key:"addSelectionChangeListener",value:function(e){return this.mapImpl.addSelectionChangeListener(e)}},{key:"removeSelectionChangeListener",value:function(e){return this.mapImpl.removeSelectionChangeListener(e)}},{key:"addHoverChangeListener",value:function(e){return this.mapImpl.addHoverChangeListener(e)}},{key:"removeHoverChangeListener",value:function(e){return this.mapImpl.removeHoverChangeListener(e)}},{key:"addFilterChangeListener",value:function(e){return this.mapImpl.addFilterChangeListener(e)}},{key:"removeFilterChangeListener",value:function(e){return this.mapImpl.removeFilterChangeListener(e)}},{key:"addRouteChangeListener",value:function(e){return this.mapImpl.addRouteChangeListener(e)}},{key:"removeRouteChangeListener",value:function(e){return this.mapImpl.removeRouteChangeListener(e)}},{key:"setStay",value:function(e){return this.mapImpl.setStay(e)}},{key:"refresh",value:function(){this.mapImpl.refresh()}},{key:"turnKeyboardFeaturesMode",value:function(e){this.mapImpl.turnKeyboardFeaturesMode(e)}},{key:"isKeyboardFeaturesModeEnabled",value:function(){return this.mapImpl.isKeyboardFeaturesModeEnabled()}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t){e.exports=r},function(e,t){e.exports=i}]))},22676:function(e,t,n){("undefined"!=typeof window?window:n.g).egmapsGoogleMaps=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=("undefined"!=typeof window?window:n.g)["@eg-maps/commons"]},function(e,t){e.exports=("undefined"!=typeof window?window:n.g)["@eg-maps/base"]},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t),n.d(t,"GMaps",(function(){return ae})),n(0),n(1);var g=egmapsBase,_=g.BaseMap,b=g.TilesLoader,k=g.KeyboardListeners,w=egmapsCommons,x=w.Utils,C=w.HtmlUtils,P=w.constants,L=x.firstNonNull,M=x.listHashKeysSorted,F=x.roundLatOrLng,I=x.roundLatLng,E=P.google_maps_css_class,S=P.type_property,O=P.type_landmark,D=P.type_destination,T=P.event_type_bounds_changed_original_event_zoom_in,A=P.event_type_bounds_changed_original_event_zoom_out,B=P.event_type_bounds_changed_original_event_drag,j=P.google_maps_options,R=P.google_maps_additional_config,N=P.cfg_tiles,V=P.tiles_providers_enabled,H=P.element_popup,q=P.element_cluster_marker,z=P.marker_collision_css_class,Z=P.marker_type_price,U=P.marker_type_pin,K=P.marker_type_obfuscate,W=P.marker_type_pin_obfuscate,G=P.marker_type_price_obfuscate,X=P.position_top,Y=P.position_bottom,$=P.route_line_style,Q=P.route_line_width,J=P.route_line_color,ee=P.route_line_opacity,te=P.route_line_style_normal,ne=P.route_line_style_dash,re=P.route_line_style_dot,ie=P.route_line_style_none,oe=function(e){d(n,e);var t=v(n);function n(e,r,i,o){var a;return l(this,n),(a=t.call(this,e,r,i,o)).tileSize=new google.maps.Size(256,256),a}return h(n,[{key:"getTile",value:function(e,t){var n=this;return setTimeout((function(){return n.loadTile(e.x,e.y,t)}),10),null}},{key:"unbindAll",value:function(){this.getPanes().overlayMouseTarget.removeAllChildren()}}]),n}(b),ae=function(e){d(n,e);var t=v(n);function n(e){var r;l(this,n),(r=t.call(this,e,E)).logger=e.logger("GMaps"),r.mapConfig={},r.listenersToDeregister=[],r.mapFocusListenersToRegister=[];var i=r.configHelper.subConfig("".concat(j,",").concat(R));for(var o in i&&Object.assign(r.mapConfig,i),r.mapConfig.keyboardShortcuts=!1,r.tilesReaderEnabled=[S,O,D].map((function(t){return e.readParam("".concat(N,",").concat(V,",").concat(t))})).some((function(e){return e.length>0})),r.zIndexes)for(var a in r.zIndexes[o])r.zIndexes[o][a]=google.maps.Marker.MAX_ZINDEX+r.zIndexes[o][a];return r.maxZIndex=google.maps.Marker.MAX_ZINDEX+r.maxZIndex,r.routeLineStyleByDistanceMode=e.routeLineStyleByDistanceMode(),r}return h(n,[{key:"removeMarkerFromMap",value:function(e){C.detachElement(e),e.clean.forEach((function(e){return e()}))}},{key:"cloneMarker",value:function(e){if(e.toClone)return e.toClone.cloneNode(!0)}},{key:"init",value:function(){var e=this;return this.realmap=new google.maps.Map(this.node,this.mapConfig),this.style&&(this.realmap.mapTypes.set("mapStyle",new google.maps.StyledMapType(this.style)),this.realmap.setMapTypeId("mapStyle")),this._registerListenersMap(),this.tilesReaderEnabled&&this._initializeTilesOverlayMapType(),C.documentIsDefined()&&(this.temporaryDiv=C.createDiv(this.uniqId("temporaryDiv"))),this.popup=this.createPopup(),this._initializeCustomMarkerOverlay(this.temporaryDiv,(function(){var t=e.temporaryDiv;return e.temporaryDiv=void 0,t})).then((function(){e.mapNavFocusElement=e._findMapFocusElement(),e.mapFocusListenersToRegister.forEach((function(t){var n=t.eventType,r=t.cb;e.listenersToDeregister.push(e.addEventListener(e.mapNavFocusElement,n,r))})),e._registerKeyboardListeners(),e._registerMapFocusListeners(),e.updateViewport()})),Promise.resolve()}},{key:"_findMapFocusElement",value:function(){var e;return null===(e=C.childrenAsArray(this.node).map((function(e){return C.anyChildrenWithClasses(e,["gm-style"],!1)[0]})).filter((function(e){return void 0!==e}))[0])||void 0===e?void 0:e.children[0]}},{key:"registerListenerOnMapFocusElement",value:function(e,t){this.mapNavFocusElement?this.listenersToDeregister.push(this.addEventListener(this.mapNavFocusElement,e,t,!1)):this.mapFocusListenersToRegister.push({eventType:e,cb:t})}},{key:"_registerMapFocusListeners",value:function(){var e=this;this.mapNavFocusElement&&(this.listenersToDeregister.push(this.addEventListener(this.mapNavFocusElement,"focus",(function(){return e.keyboardFeatures.refreshKeyboardNavIconVisibility()}))),this.listenersToDeregister.push(this.addEventListener(this.mapNavFocusElement,"focusout",(function(){return e.keyboardFeatures.refreshKeyboardNavIconVisibility(!1)}))))}},{key:"_initializeTilesOverlayMapType",value:function(){this.tilesLoader=new oe(this.configHelper,this.createTileFeature.bind(this),this.removeTileFeature.bind(this),this.updateViewport.bind(this)),this.realmap.overlayMapTypes.insertAt(0,this.tilesLoader)}},{key:"_initializeCustomMarkerOverlay",value:function(e){var t=this,n=this._updateTextMarkerPosition.bind(this),r=this.findMarkerCollision.bind(this),i=this._allFeatures.bind(this),o=function(t,n,r,i,o){this.updateTextMarkerPosition=n,this.findMarkerCollision=i,this.listAllFeatures=r,this.onAdd=function(){var t=this.getPanes().overlayMouseTarget;if(e)for(var n=e.children,r=0;r<n.length;r++)C.reattachElement(n[r],t);C.setZIndex(t,google.maps.Marker.MAX_ZINDEX+1),o()},this.setMap(t),this.onRemove=function(){this.listAllFeatures().forEach((function(e){if(e.marker.isTextMarker){var t=e.marker;e.marker=e.backupMarker,C.detachElement(t)}C.detachElement(e.popup)}));var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(this.clusters);try{for(t.s();!(e=t.n()).done;){var n=e.value;C.detachElement(n.marker)}}catch(e){t.e(e)}finally{t.f()}},this.draw=function(){this.updateTextMarkerPosition(),this.findMarkerCollision()}};return o.prototype=new google.maps.OverlayView,new Promise((function(e){t.customMarkerOverlay=new o(t.realmap,n,i,r,e)}))}},{key:"findMarkerCollision",value:function(){var e=this,t=this._allFeatures().filter((function(e){return e.marker})).concat(this.clusters||[]).map((function(e){return{feature:e,markerBoundingClientRect:e.marker.getBoundingClientRect()}}));t.forEach((function(n){C.removeClass(n.feature.marker,z),L(e.markerCollisionDetection[n.feature.type],n.feature.hashKeys)&&t.some((function(t){if(n.feature.id!==t.feature.id&&L(e.markerCollisionDetection[t.feature.type],t.feature.hashKeys)&&C.isIntersecting(n.markerBoundingClientRect,t.markerBoundingClientRect))return C.addClass(n.feature.marker,z),!0}))}))}},{key:"updateViewport",value:function(e,t){var r,i,o=this;return null!==(r=this.customMarkerOverlay)&&void 0!==r&&null!==(i=r.getPanes())&&void 0!==i&&i.overlayMouseTarget?c(m(n.prototype),"updateViewport",this).call(this,e,t).then((function(){return o._updateTextMarkerPosition()})):Promise.resolve()}},{key:"_changePropertyMarkersVisible",value:function(e,t){c(m(n.prototype),"_changePropertyMarkersVisible",this).call(this,e,t),this._updateTextMarkerPosition()}},{key:"_updateTextMarkerPosition",value:function(e){var t=this;if(this.customMarkerOverlay){var n=this.customMarkerOverlay.getProjection();if(n){var r=e?e.filter((function(e){return e.marker})):this._allFeatures().filter((function(e){return e.marker})).concat(this.clusters||[]);if(this.isOnePropertyStatusUsingObfuscateMarker){var i=this.getCenter();Object.values(this.obfuscateRadiusInMeters).forEach((function(e){var r=[x.roundLatOrLng(x.addMeterToLat(i[0],2*e.radius)),i[1]];e.width=Math.round(t._fromLatLngToDivPixel.apply(t,[n].concat(a(i))).y-t._fromLatLngToDivPixel.apply(t,[n].concat(r)).y)}))}r.forEach((function(e){return t._updateMarkerPositionOnLayer(e,n)})),this.updatePopupPositionOnLayer()}}}},{key:"_updateMarkerPositionOnLayer",value:function(e,t){if(e&&e.marker){if(e.marker.obfuscateArea){var n=L(this.obfuscateRadiusInMeters,e.hashKeys).width;C.setWidthAndHeight(e.marker.obfuscateArea,"".concat(n,"px"),"".concat(n,"px"))}var r=(t||this.customMarkerOverlay.getProjection()).fromLatLngToDivPixel(e.marker.position);if(r){var i=0,o=0,a="middle";switch(e.markerType){case U:o=-2,a="bottom";break;case Z:i=-1,o=-2,a="bottom"}C.setPosition(e.marker,r.x+i,r.y+o,a)}}}},{key:"_fromLatLngToDivPixel",value:function(e,t,n){return e.fromLatLngToDivPixel(new google.maps.LatLng(t,n))}},{key:"updatePopupPositionOnLayer",value:function(){var e=(this.popup||{}).feature;if(e&&e.defined){var t,n,r,i=this._fromLatLngToDivPixel.apply(this,[this.customMarkerOverlay.getProjection()].concat(a(e.latLng)));switch(L(this.popupPositions[e.type],e.hashKeys)){case X:default:t=0,n=-2,r="bottom";break;case Y:t=0,n=2,r="top"}i&&C.setPosition(this.popup,i.x+t,i.y+n,r)}}},{key:"_registerListenersMap",value:function(){this._registerCenterChangedEventLogic(),this._registerZoomListener(),this.listenersToDeregister.push(this.addEventListener(this.realmap,"dragstart",this._handleDragStart.bind(this),!1)),this.listenersToDeregister.push(this.addEventListener(this.realmap,"click",this._handleMapClick.bind(this),!1))}},{key:"_registerKeyboardListeners",value:function(){var e=this;return this.registeredEvents=o({},"keyboard_features",[]),this.keyboardListeners=new k((function(t){var n;return(n=e.realmap).panBy.apply(n,a(t))}),(function(){return e.realmap.setZoom(e.realmap.getZoom()+1)}),(function(){return e.realmap.setZoom(e.realmap.getZoom()-1)}),this.registeredEvents.keyboard_features),[this.addEventListener(this.mapNavFocusElement,"keydown",this.keyboardListeners.keyDownListenerCallback),this.addEventListener(this.mapNavFocusElement,"keyup",this.keyboardListeners.keyUpListenerCallback),this.addEventListener(this.mapNavFocusElement,"keypress",this.keyboardListeners.keyPressListenerCallback)]}},{key:"_registerCenterChangedEventLogic",value:function(){var e=this;this.listenersToDeregister.push(this.addEventListener(this.realmap,"center_changed",(function(){void 0===e.centerBeforeMove&&(e.centerBeforeMove=e.realmap.getCenter())}),!1)),this.listenersToDeregister.push(this.addEventListener(this.realmap,"idle",(function(){if(void 0!==e.centerBeforeMove){var t=e.realmap.getCenter();setTimeout((function(){var n=e.realmap.getCenter();if(n.lat()===t.lat()&&n.lng()===t.lng()){e.centerBeforeMove=void 0;var r=e.registeredEvents.keyboard_features?e.registeredEvents.keyboard_features.splice(0):[];r=0===r.length?[B]:r,e._handleBoundsChanged.apply(e,a(r))}}),50)}}),!1))}},{key:"_registerZoomListener",value:function(){var e=this;this.lastZoomValueChecked=[this.realmap.getZoom()],this.listenersToDeregister.push(this.addEventListener(this.realmap,"zoom_changed",(function(){e.boundChangedDisable?e.lastZoomValueChecked=[e.realmap.getZoom()]:e.lastZoomValueChecked.push(e.realmap.getZoom())}),!1)),this.listenersToDeregister.push(this.addEventListener(this.realmap,"idle",(function(){if(e.lastZoomValueChecked.length>1){var t=e.realmap.getZoom();setTimeout((function(){var n=e.realmap.getZoom();n===t&&(n>i(e.lastZoomValueChecked.splice(0,e.lastZoomValueChecked.length-1),1)[0]?e._handleBoundsChanged(T):e._handleBoundsChanged(A))}),100)}}),!1))}},{key:"_createCallbackForBoundsChanged",value:function(e){var t=this._handleBoundsChanged.bind(this);return function(){return t(e)}}},{key:"centerAndZoomMap",value:function(e,t){var n=i(e?I(e):[],2),r=n[0],o=n[1],a=!1;if(r&&o){var s=this.realmap.getCenter();s&&F(s.lat())===r&&F(s.lng())===o||(this.boundChangedDisable=!0,this.realmap.setCenter(new google.maps.LatLng(r,o)),a=!0)}return t&&this.realmap.getZoom()!==t&&(this.boundChangedDisable=!0,this.realmap.setZoom(t),a=!0),a&&this.updateViewport(),a}},{key:"isFeatureInRealBound",value:function(e,t){return null==e?void 0:e.contains({lat:t.latLng[0],lng:t.latLng[1]})}},{key:"asNativeBounds",value:function(e,t){return new google.maps.LatLngBounds(new google.maps.LatLng(F(e[0]),F(e[1])),new google.maps.LatLng(F(t[0]),F(t[1])))}},{key:"getCenter",value:function(){var e=this.realmap.getCenter();return[F(e.lat()),F(e.lng())]}},{key:"getZoom",value:function(){return this.realmap.getZoom()}},{key:"unbindAll",value:function(){this.listenersToDeregister.forEach((function(e){return e()})),this.customMarkerOverlay&&this.customMarkerOverlay.unbindAll(),this.realmap.unbindAll()}},{key:"boundsContaining",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new google.maps.LatLngBounds;return e.forEach((function(e){t.extend(new google.maps.LatLng(e[0],e[1]))})),this.asBounds(t)}},{key:"asBounds",value:function(e){if(e){var t=e.getSouthWest(),n=e.getNorthEast(),r=e.getCenter();return{sw:[F(t.lat()),F(t.lng())],ne:[F(n.lat()),F(n.lng())],center:[F(r.lat()),F(r.lng())]}}}},{key:"containerBounds",value:function(e){if(this.customMarkerOverlay){var t=this.customMarkerOverlay.getProjection();if(t){var n=t.fromContainerPixelToLatLng(new google.maps.Point(e.offsetLeft-e.offsetWidth/2,e.offsetTop+e.offsetHeight/2)),r=t.fromContainerPixelToLatLng(new google.maps.Point(e.offsetLeft+e.offsetWidth/2,e.offsetTop-e.offsetHeight/2));return{sw:[F(n.lat()),F(n.lng())],ne:[F(r.lat()),F(r.lng())],center:[F(n.lat()+(n.lat()-r.lat())/2),F(r.lng()+(r.lng()-n.lng())/2)]}}}}},{key:"fitLatLongs",value:function(e){this.boundChangedDisable=!0;var t=new google.maps.LatLngBounds;e.forEach((function(e){var n=I(e);t.extend(new google.maps.LatLng(n[0],n[1]))})),this.realmap.fitBounds(t,{animate:!1}),this.updateViewport(t)}},{key:"nativeBounds",value:function(){if(this.realmap)return this.realmap.getBounds()}},{key:"_switchMarkerType",value:function(e,t){c(m(n.prototype),"_switchMarkerType",this).call(this,e,t)&&this._updateMarkerPositionOnLayer(e)}},{key:"fitBounds",value:function(e,t){if(this.realmap){var n=I(e),r=I(t),i=this.nativeBounds(),o=null==i?void 0:i.getSouthWest(),a=null==i?void 0:i.getNorthEast();if(!o||!a||F(o.lat())!=n[0]||F(o.lng())!=n[1]||F(a.lat())!=r[0]||F(a.lng())!=r[1]){var s=new google.maps.LatLngBounds(new google.maps.LatLng(n[0],n[1]),new google.maps.LatLng(r[0],r[1]));this.boundChangedDisable=!0,this.realmap.fitBounds(s,{animate:!1}),this.updateViewport(s)}}}},{key:"addEventListener",value:function(e,t,n){var r,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return r=i?google.maps.event.addDomListener(e,t,n):google.maps.event.addListener(e,t,n),function(){return google.maps.event.removeListener(r)}}},{key:"createPopup",value:function(){var e=this._createGenericPopup(this._getMainParent());return C.setZIndex(e,this.maxZIndex+1),C.setDisplayNone(e),e.visibleElement=e,e.cssElement=e,e.clean=this.registerCompListeners(e,H),e}},{key:"registerCompListeners",value:function(e,t,n){var r=this._handleMarkerClick.bind(this),i=this.handleMarkerMouseOver.bind(this),o=this.handleMarkerMouseOut.bind(this);return[this.addEventListener(e,"click",(function(e){e.stopPropagation(),r(n,t,"click")})),this.addEventListener(e,"mouseenter",(function(e){e.stopPropagation(),i(n,t,"mouseenter")})),this.addEventListener(e,"mouseleave",(function(e){e.stopPropagation(),o(n,t,"mouseleave")}))]}},{key:"createPinMarkerWithClickListener",value:function(e,t,n,r,i){var a=this._asKey(e),s=C.createDiv(this.uniqId("icon-marker-".concat(a,"-div")),this._getMainParent(),n.join(" "),void 0,this.additionalCssClass);C.setButtonRole(s);var u=C.createImg(this.uniqId("icon-marker-".concat(a,"-img")),s,"marker-icon",void 0,t,"marker for ".concat(e.name||"unnamed "+e.type));return C.setZIndex(s,r),s.zIndexElement=s,s.iconElements=o({},U,u),s.cssElement=s,s.toClone=s,s.bounceElement=u,i&&this._createTextLabel(s,e),s.clean=this.registerCompListeners(s,U,e),s.position=new google.maps.LatLng(e.latLng[0],e.latLng[1]),s}},{key:"createPriceTextMarkerWithClickListener",value:function(e,t,n,r){var i=this._createGenericPriceTextMarker(this._getMainParent(),e,t.join(" "),r);return C.setZIndex(i,n),i.zIndexElement=i,i.toClone=i,i.clean=this.registerCompListeners(i,Z,e),i.position=new google.maps.LatLng(e.latLng[0],e.latLng[1]),i}},{key:"createClusterMarkerWithClickListener",value:function(e){var t,n=this._createClusterMarker(this._getMainParent(),e);return n.toClone=n,t=e===this.selectedFeature?L(this.zIndexes[e.type],M(e.status,!0,e.qualifiers)):L(this.zIndexes[e.type],e.hashKeys),C.setZIndex(n,t),n.zIndexElement=n,n.clean=this.registerCompListeners(n,q,e),n.position=new google.maps.LatLng(e.latLng[0],e.latLng[1]),n}},{key:"createObfuscateMarkerWithClickListener",value:function(e,t,n,r,i,a){var s=this._asKey(e),u=C.createDiv(this.uniqId("obfuscate-marker-".concat(s,"-div")),this._getMainParent(),r.join(" "),"width:".concat(n,"px;height:").concat(n,"px;"),this.additionalCssClass);C.setButtonRole(u);var c=C.createImg(this.uniqId("obfuscate-marker-".concat(s,"-img")),u,"obfuscate-marker-icon",void 0,t,"obfuscate marker for ".concat(e.name||"unnamed "+e.type));return C.setZIndex(u,i),u.zIndexElement=u,u.iconElements=o({},K,c),u.cssElement=u,u.toClone=u,u.bounceElement=c,u.obfuscateArea=u,a&&this._createTextLabel(u,e),u.clean=this.registerCompListeners(c,K,e),u.position=new google.maps.LatLng(e.latLng[0],e.latLng[1]),u}},{key:"_getMainParent",value:function(){var e,t;return(null===(e=this.customMarkerOverlay)||void 0===e||null===(t=e.getPanes())||void 0===t?void 0:t.overlayMouseTarget)||this.temporaryDiv}},{key:"createPinObfuscateMarkerWithClickListener",value:function(e,t,n,r,i,a,s){var u,c=this._asKey(e),l=C.createDiv(this.uniqId("pin-obfuscate-marker-".concat(c,"-div")),this._getMainParent(),i.join(" "),void 0,this.additionalCssClass);C.setButtonRole(l);var f=C.createDiv(this.uniqId("icon-marker-".concat(c,"-div")),l,"pin-marker"),h=C.createDiv(this.uniqId("icon-marker-".concat(c,"-div-rel")),f,"marker-icon-inter"),d=C.createImg(this.uniqId("icon-marker-".concat(c,"-img")),h,"marker-icon",void 0,t,"marker for ".concat(e.name||"unnamed "+e.type)),p=C.createDiv(this.uniqId("obfuscate-icon-marker-".concat(c,"-div")),l,"obfuscate-marker","width:".concat(r,"px;height:").concat(r,"px;")),v=C.createImg(this.uniqId("obfuscate-icon-marker-".concat(c,"-img")),p,"obfuscate-marker-icon",void 0,n,"obfuscate area for ".concat(e.name||"unnamed "+e.type));return C.setZIndex(f,a),l.zIndexElement=f,l.bounceElement=d,l.cssElement=l,l.toClone=l,l.iconElements=(o(u={},U,d),o(u,K,v),u),l.obfuscateArea=p,s&&this._createTextLabel(l,e),l.clean=this.registerCompListeners(f,W,e),l.position=new google.maps.LatLng(e.latLng[0],e.latLng[1]),l}},{key:"createPriceObfuscateMarkerWithClickListener",value:function(e,t,n,r,i,a){var s=this._asKey(e),u=C.createDiv(this.uniqId("price-obfuscate-marker-".concat(s,"-div")),this._getMainParent(),r.join(" "),void 0,this.additionalCssClass),c=this._createGenericPriceTextMarker(u,e,"price-marker",a),l=C.createDiv(this.uniqId("obfuscate-icon-marker-".concat(s,"-div")),u,"obfuscate-marker","width:".concat(n,"px;height:").concat(n,"px;")),f=C.createImg(this.uniqId("obfuscate-icon-marker-".concat(s,"-img")),l,"obfuscate-marker-icon",void 0,t,"obfuscate area for ".concat(e.name||"unnamed "+e.type));return C.setZIndex(c,i),u.zIndexElement=c,u.bounceElement=c.bounceElement,u.cssElement=u,u.toClone=u,u.iconElements=o({},K,f),u.obfuscateArea=l,u.clean=this.registerCompListeners(c,G,e),u.position=new google.maps.LatLng(e.latLng[0],e.latLng[1]),u}},{key:"_createPolyline",value:function(e,t){var n={path:e};switch(t[$]){case ie:break;case ne:var r=Math.round(2/t[Q]);n.icons=[{icon:{path:"M 0,-".concat(r," 0,").concat(r),strokeColor:t[J],strokeOpacity:t[ee],scale:t[Q]},offset:"0",repeat:"7px"}],n.strokeOpacity=0;break;case re:n.icons=[{icon:{path:google.maps.SymbolPath.CIRCLE,strokeColor:t[J],strokeOpacity:t[ee],scale:t[Q]/3},offset:"0",repeat:"3px"}],n.strokeOpacity=0;break;case te:default:n.strokeColor=t[J],n.strokeWeight=t[Q],n.strokeOpacity=t[ee]}return new google.maps.Polyline(n)}},{key:"addRouteOnMap",value:function(e,t){var n=this;return new Promise((function(r){var i;null===(i=t.route)||void 0===i||delete i.copyrights,e.polyline=n._createPolyline(t.route.path,n.routeLineStyleByDistanceMode[e.mode]),e.polyline.setMap(n.realmap),r(e)}))}},{key:"removeRouteOnMap",value:function(e){return new Promise((function(t){var n;null===(n=e.polyline)||void 0===n||n.setMap(null),t()}))}}]),n}(_)}])},11921:function(e,t,n){("undefined"!=typeof window?window:n.g).egmapsMapbox=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=("undefined"!=typeof window?window:n.g)["@eg-maps/commons"]},function(e,t){e.exports=("undefined"!=typeof window?window:n.g)["@eg-maps/base"]},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t),n.d(t,"MapBox",(function(){return ye})),n(0),n(1);var v=egmapsBase,y=v.BaseMap,m=v.KeyboardListeners,g=egmapsCommons,_=g.Utils,b=g.HtmlUtils,k=g.constants,w=_.firstNonNull,x=_.roundLatOrLng,C=_.roundLatLng,P=_.removeDuplicates,L=k.mapbox_css_class,M=k.type_property,F=k.type_landmark,I=k.type_destination,E=k.event_type_bounds_changed_original_event_zoom_in,S=k.event_type_bounds_changed_original_event_zoom_out,O=k.event_type_bounds_changed_original_event_drag,D=k.event_type_bounds_changed_original_event_pitch,T=k.event_type_bounds_changed_original_event_rotate,A=k.event_type_bounds_changed_original_event_touch,B=k.mapbox_options,j=k.mapbox_access_token,R=k.no_mapbox_access_token_set,N=k.mapbox_padding,V=k.mapbox_additional_config,H=k.mapbox_rtl_text_plugin_url,q=k.mapbox_scale_control,z=k.mapbox_navigation_control,Z=k.mapbox_geolocate_control,U=k.mapbox_fullscreen_control,K=k.mapbox_control_enabled,W=k.mapbox_control_options,G=k.mapbox_control_position,X=k.marker_collision_css_class,Y=k.cfg_tiles,$=k.tiles_providers_enabled,Q=k.marker_type_price,J=k.marker_type_pin,ee=k.marker_type_obfuscate,te=k.marker_type_pin_obfuscate,ne=k.marker_type_price_obfuscate,re=k.element_popup,ie=k.element_cluster_marker,oe=k.egdistances_mode_driving,ae=k.egdistances_mode_cycling,se=k.egdistances_mode_walking,ue=k.position_top,ce=k.position_bottom,le=k.route_line_color,fe=k.route_line_opacity,he=k.route_line_width,de=k.route_line_style,pe=k.route_line_style_dash,ve=k.route_line_style_dot,ye=(k.route_line_style_normal,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var t,n,r=h(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=r.call(this,e,L)).logger=e.logger("MapBox"),t.listenersToDeregister=[],t}return t=u,(n=[{key:"removeMarkerFromMap",value:function(e){e.remove(),e.clean.forEach((function(e){return e()}))}},{key:"cloneMarker",value:function(e){if(e.toClone)return e.toClone.cloneNode(!0)}},{key:"init",value:function(){var e=this;this.padding=this.configHelper.readParam("".concat(B,",").concat(N));var t=this.configHelper.readParam("".concat(B,",").concat(j));if(t===R)throw new Error("No mapbox access token set ! Mapbox cannot work properly !");mapboxgl.accessToken=t;var n={container:this.node,keyboard:!1},r=this.configHelper.subConfig("".concat(B,",").concat(V));r&&Object.assign(n,r),this.realmap=new mapboxgl.Map(n),this._addControl(q,(function(e){return new mapboxgl.ScaleControl(e)})),this._addControl(z,(function(e){return new mapboxgl.NavigationControl(e)})),this._addControl(Z,(function(e){return new mapboxgl.GeolocateControl(e)})),this._addControl(U,(function(e){return new mapboxgl.FullscreenControl(e)})),this.mapNavFocusElement=this.realmap.getCanvas(),this._handleMapFocus(),this._registerMapListeners();var i=[];[M,F,I].map((function(t){return e.configHelper.readParam("".concat(Y,",").concat($,",").concat(t))})).some((function(e){return e.length>0}))&&i.push(this._initializeTilesLoader());var o=this._initializeRouteSourcesAndLayers.bind(this),a=this._registerZoomListenerForObfuscateMarkerResize.bind(this),s=this._resizeObfuscateMarkers.bind(this);return i.push(new Promise((function(t){e.realmap.on("load",(function(){o(),e.isOnePropertyStatusUsingObfuscateMarker&&(a(),s()),t()}))}))),this.realmap.on("render",(function(){e.findMarkerCollision()})),this.popup=this.createPopup(),Promise.all(i)}},{key:"_addControl",value:function(e,t){var n=this.configHelper.readParam("".concat(B,",").concat(e));if(n[K]){var r=t(n[W]),i=n[G];this.realmap.addControl(r,i)}}},{key:"registerListenerOnMapFocusElement",value:function(e,t){this.listenersToDeregister.push(this.addEventListener(this.mapNavFocusElement,e,t))}},{key:"_handleMapFocus",value:function(){var e=this;this.mapNavFocusElement&&(this.listenersToDeregister.push(this.addEventListener(this.mapNavFocusElement,"focus",(function(){return e.keyboardFeatures.refreshKeyboardNavIconVisibility()}))),this.listenersToDeregister.push(this.addEventListener(this.mapNavFocusElement,"focusout",(function(){return e.keyboardFeatures.refreshKeyboardNavIconVisibility(!1)}))))}},{key:"_initializeTilesLoader",value:function(){var e=this;return new Promise((function(t){e.tilesLoader=new e.TilesLoader(e.configHelper,e.createTileFeature.bind(e),e.removeTileFeature.bind(e),e.updateViewport.bind(e));var n=e.tilesLoader;e.realmap.on("data",(function(e){if(e&&e.coord&&"source"===e.dataType&&e.coord.canonical){var t=e.coord.canonical;n.loadTile(t.x,t.y,t.z)}})),t()}))}},{key:"_createRouteLayer",value:function(e){var t=this.configHelper.routeLineStyleByDistanceMode()[e],n={id:"layer-".concat(e),type:"line",source:e,data:{type:"FeatureCollection",features:[]},paint:{"line-color":t[le],"line-opacity":t[fe],"line-width":t[he]}};switch(t[de]){case pe:n.paint["line-dasharray"]=[2,2];break;case ve:n.paint["line-dasharray"]=[1,1]}return this.routesSources[e]=n,n}},{key:"_initializeRouteSourcesAndLayers",value:function(){var e=this;this.routes.enabled()&&(this.routesSources={},[ae,oe,se].forEach((function(t){e.realmap.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.realmap.addLayer(e._createRouteLayer(t))})))}},{key:"_registerZoomListenerForObfuscateMarkerResize",value:function(){this.listenersToDeregister.push(this._registerMapListener("zoom",this._resizeObfuscateMarkers.bind(this)))}},{key:"_resizeObfuscateMarkers",value:function(){var e=this,t=this.realmap.getCenter();Object.values(this.obfuscateRadiusInMeters).forEach((function(n){var r=[t.lng,_.roundLatOrLng(_.addMeterToLat(t.lat,2*n.radius))];n.width=Math.round(e.realmap.project(t).y)-Math.round(e.realmap.project(r).y)})),this.features.repository(M).data.filter((function(e){return e.marker&&e.marker.obfuscateArea})).forEach((function(t){var n=w(e.obfuscateRadiusInMeters,t.hashKeys).width;b.setWidthAndHeight(t.marker.obfuscateArea,"".concat(n,"px"),"".concat(n,"px"))}))}},{key:"_registerMapListeners",value:function(){var e,t,n,r,i;this._registerZoomListener(),this.registeredEvents={},(e=this.listenersToDeregister).push.apply(e,a(this._registerListenerForBoundsChanged("dragend",O))),(t=this.listenersToDeregister).push.apply(t,a(this._registerListenerForBoundsChanged("pitchend",D))),(n=this.listenersToDeregister).push.apply(n,a(this._registerListenerForBoundsChanged("rotatend",T))),(r=this.listenersToDeregister).push.apply(r,a(this._registerListenerForBoundsChanged("touchend",A))),this.listenersToDeregister.push(this._registerMapListener("dragstart",this._handleDragStart.bind(this))),this.listenersToDeregister.push(this._registerMapListener("style.load",this.setLocale.bind(this))),this.listenersToDeregister.push(this._registerMapListener("click",this._handleMapClick.bind(this))),(i=this.listenersToDeregister).push.apply(i,a(this._registerKeyboardListener()))}},{key:"_registerKeyboardListener",value:function(){var e=this,t={duration:100,essential:!0},n=this.realmap.zoomIn.bind(this.realmap),r=this.realmap.zoomOut.bind(this.realmap);this.registeredEvents.keyboard_features=[],this.keyboardListeners=new m((function(n){return e.realmap.panBy(n,t)}),n,r,this.registeredEvents.keyboard_features);var i=this._handleBoundsChanged.bind(this);return[this.addEventListener(this.mapNavFocusElement,"keydown",this.keyboardListeners.keyDownListenerCallback),this.addEventListener(this.mapNavFocusElement,"keyup",this.keyboardListeners.keyUpListenerCallback),this.addEventListener(this.mapNavFocusElement,"keypress",this.keyboardListeners.keyPressListenerCallback),this._registerMapListener("idle",(function(){P((e.registeredEvents.keyboard_features||[]).splice(0)).forEach(i)}))]}},{key:"_registerZoomListener",value:function(){var e=this;this.lastZoomValueChecked=this.getZoom();var t=this._handleBoundsChanged.bind(this),n=this.getZoom.bind(this);this.listenersToDeregister.push(this._registerMapListener("zoomend",(function(){var r=n(),i=r>e.lastZoomValueChecked;e.lastZoomValueChecked=r,t(i?E:S)})))}},{key:"_registerMapListener",value:function(e,t,n){var r=this;return n?(this.realmap.on(e,n,t),function(){return r.realmap.off(e,n,t)}):(this.realmap.on(e,t),function(){return r.realmap.off(e,t)})}},{key:"_registerListenerForBoundsChanged",value:function(e,t){var n=this,r=this._handleBoundsChanged.bind(this);return this.registeredEvents[e]=[],[this._registerMapListener(e,(function(r){r.originalEvent&&n.registeredEvents[e].push(t)})),this._registerMapListener("idle",(function(){return P(n.registeredEvents[e].splice(0)).forEach(r)}))]}},{key:"unbindAll",value:function(){this.listenersToDeregister.forEach((function(e){return e()})),this.realmap&&this.realmap.remove()}},{key:"addEventListener",value:function(e,t,n){return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}}},{key:"centerAndZoomMap",value:function(e,t){var n={};if(e){var r=o(C(e),2),i=r[0],a=r[1],s=this.realmap.getCenter();x(s.lat)===i&&x(s.lng)===a||(n.center=new mapboxgl.LngLat(a,i))}if(t&&this.getZoom()!==t&&(n.zoom=t),n.center||n.zoom)return this.boundChangedDisable=!0,this.realmap.jumpTo(n),this.updateViewport(),!0}},{key:"asNativeBounds",value:function(e,t){return new mapboxgl.LngLatBounds(new mapboxgl.LngLat(x(e[1]),x(e[0])),new mapboxgl.LngLat(x(t[1]),x(t[0])))}},{key:"isFeatureInRealBound",value:function(e,t){return e.contains([t.latLng[1],t.latLng[0]])}},{key:"getCenter",value:function(){var e=this.realmap.getCenter();return[e.lat,e.lng]}},{key:"getZoom",value:function(){return this.realmap.getZoom()}},{key:"boundsContaining",value:function(e){var t=new mapboxgl.LngLatBounds;return e.forEach((function(e){t.extend(new mapboxgl.LngLat(e[1],e[0]))})),this.asBounds(t)}},{key:"asBounds",value:function(e){var t=e.getSouthWest(),n=e.getNorthEast(),r=e.getCenter();return{sw:[x(t.lat),x(t.lng)],ne:[x(n.lat),x(n.lng)],center:[x(r.lat),x(r.lng)]}}},{key:"containerBounds",value:function(e){if(this.realmap){var t=this.realmap.unproject([e.offsetLeft-e.offsetWidth/2,e.offsetTop+e.offsetHeight/2]),n=this.realmap.unproject([e.offsetLeft+e.offsetWidth/2,e.offsetTop-e.offsetHeight/2]);return{sw:[x(t.lat),x(t.lng)],ne:[x(n.lat),x(n.lng)],center:[x(t.lat+(t.lat-n.lat)/2),x(n.lng+(n.lng-t.lng)/2)]}}}},{key:"fitLatLongs",value:function(e){this.boundChangedDisable=!0;var t=new mapboxgl.LngLatBounds;e.forEach((function(e){var n=C(e);t.extend(new mapboxgl.LngLat(n[1],n[0]))})),this.realmap.fitBounds(t,{padding:this.padding,linear:!0}),this.updateViewport(t)}},{key:"refresh",value:function(){this.realmap.resize(),l(p(u.prototype),"refresh",this).call(this)}},{key:"nativeBounds",value:function(){if(this.realmap)return this.realmap.getBounds()}},{key:"fitBounds",value:function(e,t){if(this.realmap){this.boundChangedDisable=!0;var n=C(e),r=C(t),i=this.nativeBounds(),o=i.getSouthWest(),a=i.getNorthEast();if(x(o.lat)!=n[0]||x(o.lng)!=n[1]||x(a.lat)!=r[0]||x(a.lng)!=r[1]){var s=new mapboxgl.LngLatBounds(new mapboxgl.LngLat(n[1],n[0]),new mapboxgl.LngLat(r[1],r[0]));this.realmap.fitBounds(s,{padding:this.padding,linear:!0,animate:!1}),this.updateViewport(s)}}}},{key:"findMarkerCollision",value:function(){var e=this._allFeatures().filter((function(e){return e.marker})).concat(this.clusters||[]).map((function(e){return{feature:e,markerBoundingClientRect:e.marker.getElement().getBoundingClientRect()}}));e.forEach((function(t){var n=t.feature.marker.getElement();b.removeClass(n,X),e.some((function(e){if(t.feature.id!==e.feature.id&&b.isIntersecting(t.markerBoundingClientRect,e.markerBoundingClientRect))return b.addClass(n,X),!0}))}))}},{key:"updatePopupPositionOnLayer",value:function(){var e=(this.popup||{}).feature;if(e&&e.defined){var t,n;switch(w(this.popupPositions[e.type],e.hashKeys)){case ue:default:t=0,n=-24;break;case ce:t=0,n=5+this.popup.getElement().offsetHeight}this.popup.setOffset([t,n]),this.popup.setLngLat([this.popup.feature.latLng[1],this.popup.feature.latLng[0]])}}},{key:"createPopup",value:function(){var e=this._createGenericPopup(void 0),t=new mapboxgl.Marker({element:e,anchor:"bottom"}).setLngLat([0,0]).addTo(this.realmap);return b.setZIndex(e,this.maxZIndex+1),b.setDisplayNone(e),t.content=e.content,t.cssElement=e,t.visibleElement=e,t.clean=this.registerCompListeners(e,re),t}},{key:"registerCompListeners",value:function(e,t,n){var r=this._handleMarkerClick.bind(this),i=this.handleMarkerMouseOver.bind(this),o=this.handleMarkerMouseOut.bind(this);return[this.addEventListener(e,"click",(function(e){e.stopPropagation(),r(n,t,"click")})),this.addEventListener(e,"mouseenter",(function(e){e.stopPropagation(),i(n,t,"mouseenter")})),this.addEventListener(e,"mouseleave",(function(e){e.stopPropagation(),o(n,t,"mouseleave")}))]}},{key:"createPinMarkerWithClickListener",value:function(e,t,n,r,o){var a=this._asKey(e),s=b.createDiv(this.uniqId("icon-marker-".concat(a,"-div")),void 0,n.join(" "),void 0,this.additionalCssClass);b.setButtonRole(s);var u=b.createImg(this.uniqId("icon-marker-".concat(a,"-img")),s,"marker-icon",void 0,t,"marker for ".concat(e.name||"unnamed "+e.type)),c=new mapboxgl.Marker({element:s,anchor:"bottom"}).setLngLat([e.latLng[1],e.latLng[0]]).addTo(this.realmap);return b.setZIndex(s,r),c.zIndexElement=s,c.iconElements=i({},J,u),c.cssElement=s,c.bounceElement=u,c.toClone=s,o&&this._createTextLabel(c,e),c.clean=this.registerCompListeners(s,J,e),c}},{key:"createPriceTextMarkerWithClickListener",value:function(e,t,n,r){var i=this._createGenericPriceTextMarker(void 0,e,t.join(" "),r),o=new mapboxgl.Marker({element:i,anchor:"bottom"}).setLngLat([e.latLng[1],e.latLng[0]]).addTo(this.realmap);return b.setZIndex(i,n),o.zIndexElement=i,o.bounceElement=i.bounceElement,o.cssElement=i.cssElement,o.toClone=i,o.clean=this.registerCompListeners(i,Q,e),o}},{key:"createClusterMarkerWithClickListener",value:function(e){var t,n=this._createClusterMarker(void 0,e),r=new mapboxgl.Marker({element:n}).setLngLat([e.latLng[1],e.latLng[0]]).addTo(this.realmap);return t=e===this.selectedFeature?w(this.zIndexes[e.type],listHashKeysSorted(e.status,!0,e.qualifiers)):w(this.zIndexes[e.type],e.hashKeys),b.setZIndex(n,t),r.zIndexElement=n,r.cssElement=n.cssElement,r.toClone=n,r.clean=this.registerCompListeners(n,ie,e),r}},{key:"createObfuscateMarkerWithClickListener",value:function(e,t,n,r,o,a){var s=this._asKey(e),u=b.createDiv(this.uniqId("obfuscate-icon-marker-".concat(s,"-div")),void 0,r.join(" "),"width:".concat(n,"px;height:").concat(n,"px;"),void 0,this.additionalCssClass);b.setButtonRole(u);var c=b.createImg(this.uniqId("obfuscate-icon-marker-".concat(s,"-img")),u,"obfuscate-marker-icon",void 0,t,"obfuscate marker for ".concat(e.name||"unnamed "+e.type)),l=new mapboxgl.Marker({element:u}).setLngLat([e.latLng[1],e.latLng[0]]).addTo(this.realmap);return b.setZIndex(u,o),l.zIndexElement=u,l.iconElements=i({},ee,c),l.cssElement=u,l.bounceElement=c,l.obfuscateArea=u,l.toClone=u,a&&this._createTextLabel(u,e),l.clean=this.registerCompListeners(u,ee,e),l}},{key:"createPinObfuscateMarkerWithClickListener",value:function(e,t,n,r,o,a,s){var u,c=this._asKey(e),l=b.createDiv(this.uniqId("pin-obfuscate-marker-".concat(c,"-div")),void 0,o.join(" "),void 0,this.additionalCssClass),f=b.createDiv(this.uniqId("icon-marker-".concat(c,"-div")),l,"pin-marker"),h=b.createDiv(this.uniqId("icon-marker-".concat(c,"-div-rel")),f,"marker-icon-inter"),d=b.createImg(this.uniqId("icon-marker-".concat(c,"-img")),h,"marker-icon",void 0,t,"marker for ".concat(e.name||"unnamed "+e.type)),p=b.createDiv(this.uniqId("obfuscate-icon-marker-".concat(c,"-div")),l,"obfuscate-marker","width:".concat(r,"px;height:").concat(r,"px;")),v=b.createImg(this.uniqId("obfuscate-icon-marker-".concat(c,"-img")),p,"obfuscate-marker-icon",void 0,n,"obfuscate area for ".concat(e.name||"unnamed "+e.type)),y=new mapboxgl.Marker({element:l}).setLngLat([e.latLng[1],e.latLng[0]]).addTo(this.realmap);return b.setZIndex(f,a),y.zIndexElement=f,y.bounceElement=d,y.cssElement=l,y.toClone=l,y.iconElements=(i(u={},J,d),i(u,ee,v),u),y.obfuscateArea=p,y.clean=this.registerCompListeners(f,te,e),y}},{key:"createPriceObfuscateMarkerWithClickListener",value:function(e,t,n,r,o,a){var s=this._asKey(e),u=b.createDiv(this.uniqId("price-obfuscate-marker-".concat(s,"-div")),void 0,r.join(" "),void 0,this.additionalCssClass),c=this._createGenericPriceTextMarker(u,e,"price-marker",a),l=b.createDiv(this.uniqId("obfuscate-icon-marker-".concat(s,"-div")),u,"obfuscate-marker","width:".concat(n,"px;height:").concat(n,"px;")),f=b.createImg(this.uniqId("obfuscate-icon-marker-".concat(s,"-img")),l,"obfuscate-marker-icon",void 0,t,"obfuscate area for ".concat(e.name||"unnamed "+e.type)),h=new mapboxgl.Marker({element:u}).setLngLat([e.latLng[1],e.latLng[0]]).addTo(this.realmap);return b.setZIndex(c,o),h.zIndexElement=c,h.bounceElement=c.bounceElement,h.cssElement=u,h.toClone=u,h.iconElements=i({},ee,f),h.obfuscateArea=l,h.clean=this.registerCompListeners(c,ne,e),h}},{key:"setLocale",value:function(){if(this.locale){var e=this.locale.substring(0,2);"unavailable"===mapboxgl.getRTLTextPluginStatus()&&mapboxgl.setRTLTextPlugin(H,null,!0);var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(this.realmap.getStyle().layers.filter((function(e){return/-label/.test(e.id)})));try{for(n.s();!(t=n.n()).done;){var r=t.value;this.realmap.setLayoutProperty(r.id,"text-field",["coalesce",["get","name_"+e],["get","name"]])}}catch(e){n.e(e)}finally{n.f()}}}},{key:"addRouteOnMap",value:function(e,t){var n=this;return new Promise((function(r){var i=n.routesSources[e.mode];i&&(i.data.features.push({id:e.id,type:"Feature",geometry:{type:"LineString",coordinates:t.route.path.map((function(e){return[e.lat,e.lng]}))}}),n.realmap.getSource(e.mode).setData(i.data)),r(e)}))}},{key:"removeRouteOnMap",value:function(e){var t=this;return new Promise((function(n,r){var i=t.routesSources[e.mode];if(i){var o=i.data.features.findIndex((function(t){return t.id===e.id}));o>=0&&(i.data.features.splice(o,1),t.realmap.getSource(e.mode).setData(i.data)),n()}else r(new Error("can't find source for ".concat(e.mode)))}))}}])&&c(t.prototype,n),u}(y))}])}}]);
//# sourceMappingURL=eg-maps.68150d355d53d3204d5d.js.map