!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e,t,n){"use strict";var r=n(2);const o=e=>e<10?"0"+e:e,i=()=>{const e=new Date;return`${e.getUTCFullYear()}-${o(e.getUTCMonth()+1)}-${o(e.getUTCDate())}T${o(e.getUTCHours())}:${o(e.getUTCMinutes())}:${o(e.getUTCSeconds())}`},s=(()=>{if("undefined"==typeof window)return;const e=[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"BlackBerry",value:"CLDC",version:"CLDC"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}],t={userAgent:window.navigator&&window.navigator.userAgent||"",userAgentName:"unknown",userAgentVersion:0};for(let n=0;n<e.length;n+=1)if(new RegExp(e[n].value,"i").test(t.userAgent)){const r=t.userAgent.match(new RegExp(e[n].version+"[- /:;]([\\d._]+)","i"));if(r&&r.length>0)return t.userAgentVersion=r[1],t.userAgentName=e[n].name,t}return t})();t.a={checkEmail:e=>e.match(/(?!\.)([a-zA-Z0-9\u0080-\u00FF\u0100-\u017F\u0180-\u024F\u0250-\u02AF\u0300-\u036F\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u0530-\u058F\u0590-\u05FF\u0600-\u06FF\u0700-\u074F\u0750-\u077F\u0780-\u07BF\u07C0-\u07FF\u0900-\u097F\u0980-\u09FF\u0A00-\u0A7F\u0A80-\u0AFF\u0B00-\u0B7F\u0B80-\u0BFF\u0C00-\u0C7F\u0C80-\u0CFF\u0D00-\u0D7F\u0D80-\u0DFF\u0E00-\u0E7F\u0E80-\u0EFF\u0F00-\u0FFF\u1000-\u109F\u10A0-\u10FF\u1100-\u11FF\u1200-\u137F\u1380-\u139F\u13A0-\u13FF\u1400-\u167F\u1680-\u169F\u16A0-\u16FF\u1700-\u171F\u1720-\u173F\u1740-\u175F\u1760-\u177F\u1780-\u17FF\u1800-\u18AF\u1900-\u194F\u1950-\u197F\u1980-\u19DF\u19E0-\u19FF\u1A00-\u1A1F\u1B00-\u1B7F\u1D00-\u1D7F\u1D80-\u1DBF\u1DC0-\u1DFF\u1E00-\u1EFF\u1F00-\u1FFF\u20D0-\u20FF\u2100-\u214F\u2C00-\u2C5F\u2C60-\u2C7F\u2C80-\u2CFF\u2D00-\u2D2F\u2D30-\u2D7F\u2D80-\u2DDF\u2F00-\u2FDF\u2FF0-\u2FFF\u3040-\u309F\u30A0-\u30FF\u3100-\u312F\u3130-\u318F\u3190-\u319F\u31C0-\u31EF\u31F0-\u31FF\u3200-\u32FF\u3300-\u33FF\u3400-\u4DBF\u4DC0-\u4DFF\u4E00-\u9FFF\uA000-\uA48F\uA490-\uA4CF\uA700-\uA71F\uA800-\uA82F\uA840-\uA87F\uAC00-\uD7AF\uF900-\uFAFF.!#$%&'*+-/=?^_`{|}~\-\d]+)(?:@|%(?:25)*40)(?!\.)([a-zA-Z0-9\u0080-\u00FF\u0100-\u017F\u0180-\u024F\u0250-\u02AF\u0300-\u036F\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u0530-\u058F\u0590-\u05FF\u0600-\u06FF\u0700-\u074F\u0750-\u077F\u0780-\u07BF\u07C0-\u07FF\u0900-\u097F\u0980-\u09FF\u0A00-\u0A7F\u0A80-\u0AFF\u0B00-\u0B7F\u0B80-\u0BFF\u0C00-\u0C7F\u0C80-\u0CFF\u0D00-\u0D7F\u0D80-\u0DFF\u0E00-\u0E7F\u0E80-\u0EFF\u0F00-\u0FFF\u1000-\u109F\u10A0-\u10FF\u1100-\u11FF\u1200-\u137F\u1380-\u139F\u13A0-\u13FF\u1400-\u167F\u1680-\u169F\u16A0-\u16FF\u1700-\u171F\u1720-\u173F\u1740-\u175F\u1760-\u177F\u1780-\u17FF\u1800-\u18AF\u1900-\u194F\u1950-\u197F\u1980-\u19DF\u19E0-\u19FF\u1A00-\u1A1F\u1B00-\u1B7F\u1D00-\u1D7F\u1D80-\u1DBF\u1DC0-\u1DFF\u1E00-\u1EFF\u1F00-\u1FFF\u20D0-\u20FF\u2100-\u214F\u2C00-\u2C5F\u2C60-\u2C7F\u2C80-\u2CFF\u2D00-\u2D2F\u2D30-\u2D7F\u2D80-\u2DDF\u2F00-\u2FDF\u2FF0-\u2FFF\u3040-\u309F\u30A0-\u30FF\u3100-\u312F\u3130-\u318F\u3190-\u319F\u31C0-\u31EF\u31F0-\u31FF\u3200-\u32FF\u3300-\u33FF\u3400-\u4DBF\u4DC0-\u4DFF\u4E00-\u9FFF\uA000-\uA48F\uA490-\uA4CF\uA700-\uA71F\uA800-\uA82F\uA840-\uA87F\uAC00-\uD7AF\uF900-\uFAFF\-.\d]+)((\.([a-zA-Z\u0080-\u00FF\u0100-\u017F\u0180-\u024F\u0250-\u02AF\u0300-\u036F\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u0530-\u058F\u0590-\u05FF\u0600-\u06FF\u0700-\u074F\u0750-\u077F\u0780-\u07BF\u07C0-\u07FF\u0900-\u097F\u0980-\u09FF\u0A00-\u0A7F\u0A80-\u0AFF\u0B00-\u0B7F\u0B80-\u0BFF\u0C00-\u0C7F\u0C80-\u0CFF\u0D00-\u0D7F\u0D80-\u0DFF\u0E00-\u0E7F\u0E80-\u0EFF\u0F00-\u0FFF\u1000-\u109F\u10A0-\u10FF\u1100-\u11FF\u1200-\u137F\u1380-\u139F\u13A0-\u13FF\u1400-\u167F\u1680-\u169F\u16A0-\u16FF\u1700-\u171F\u1720-\u173F\u1740-\u175F\u1760-\u177F\u1780-\u17FF\u1800-\u18AF\u1900-\u194F\u1950-\u197F\u1980-\u19DF\u19E0-\u19FF\u1A00-\u1A1F\u1B00-\u1B7F\u1D00-\u1D7F\u1D80-\u1DBF\u1DC0-\u1DFF\u1E00-\u1EFF\u1F00-\u1FFF\u20D0-\u20FF\u2100-\u214F\u2C00-\u2C5F\u2C60-\u2C7F\u2C80-\u2CFF\u2D00-\u2D2F\u2D30-\u2D7F\u2D80-\u2DDF\u2F00-\u2FDF\u2FF0-\u2FFF\u3040-\u309F\u30A0-\u30FF\u3100-\u312F\u3130-\u318F\u3190-\u319F\u31C0-\u31EF\u31F0-\u31FF\u3200-\u32FF\u3300-\u33FF\u3400-\u4DBF\u4DC0-\u4DFF\u4E00-\u9FFF\uA000-\uA48F\uA490-\uA4CF\uA700-\uA71F\uA800-\uA82F\uA840-\uA87F\uAC00-\uD7AF\uF900-\uFAFF]){2,63})+)/i),promiseScript:(e,t={})=>new Promise(n=>{const r=document.body.getElementsByTagName("script");for(let t=0;t<r.length;t++)if((r[t].getAttribute("src")||r[t].src)===e)return void n(r[t]);const o=["defer","async"],i=document.createElement("script");i.onload=()=>{n(i)},i.onerror=e=>{const t={error:e,methodName:"promiseScript"};i.errInfo=t,n(i)},Object.keys(t).forEach(e=>{-1!==o.indexOf(e)&&(i[e]=t[e])}),i.src=e,document.body.appendChild(i)}),promiseFetch:(e,t={})=>{const n=t&&t.timeout||r.a.fetchTimeout;return Promise.race([fetch(e,t),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),n))])},currentScript:()=>{if(document){if(document.currentScript)return document.currentScript;const e=/meso-loader\.js$/,t=[...document.getElementsByTagName("script")];for(const n of t)if(null!==n.src.match(e))return n}},esDateString:i,getCookie:e=>{const t=document.cookie.match(`(^|;) ?${e}=([^;]*)(;|$)`);return t?decodeURIComponent(t[2]):null},setCookie:(e,t,n=30)=>{const r=new Date;r.setTime(r.getTime()+864e5*n);const o=encodeURIComponent(t);document.cookie=`${e}=${o};path=/;expires=${r.toGMTString()};`},isObject:e=>Boolean(e)&&e.constructor===Object,queryString:e=>{let t=Object.keys(e).map(t=>`${t}=${e[t]}`).join("&");return t&&(t="?"+t),t},getCurrentBreakpoint:()=>window&&window.meso&&window.meso.breakpoints&&window.meso.breakpoints.current||null,getTestBucket:e=>{const t=window&&window.meso&&window.meso.experiments&&window.meso.experiments.executedEvents&&window.meso.experiments.executedEvents.find(({experiments:t})=>t.hasOwnProperty(e));return t?t.experiments[e]:null},userAgent:s,parseLogs:e=>{const t={logs:{type:"error",message:"INVALID_JSON_LOG",logValue:""},timestamp:i(),epoch:Date.now()};return"string"==typeof e?(t.logs.logValue=e,[t]):e&&e.length?e.map(e=>"string"==typeof e?(t.logs.logValue=e,t):e):e},getLocationSearch:()=>window&&window.location&&window.location.search||"",getWindow:()=>window,getLocationHref:()=>window&&window.location&&window.location.href||"",getReadyState:()=>document&&document.readyState,getCustomElements:()=>window&&window.customElements,getNavigator:()=>window&&window.navigator}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={CONFIG_API_FETCH_ERROR:{message:"CONFIG_API_FETCH_ERROR",priority:"P0"},BREAKPOINTS_ERROR:{message:"BREAKPOINTS_ERROR",priority:"P3"},CMP_LOADER_FETCH_ERROR:{message:"CMP_LOADER_FETCH_ERROR",priority:"P1"},EXPERIMENTS_INVALID:{message:"EXPERIMENTS_INVALID",priority:"P1"},EXPERIMENTS_EXPOSURE_FAILED:{message:"EXPERIMENTS_EXPOSURE_FAILED",priority:"P2"},EMAIL_FOUND_IN_URL:{message:"EMAIL_FOUND_IN_URL",priority:"P1"},TARGETING_FETCH_ERROR:{message:"TARGETING_FETCH_ERROR",priority:"P1"},TARGETING_UPDATE_ERROR:{message:"TARGETING_UPDATE_ERROR",priority:"P1"},TARGETING_INVALID:{message:"TARGETING_INVALID",priority:"P1"},TARGETING_VALUE_EMPTY:{message:"TARGETING_VALUE_EMPTY",priority:"P3"},TARGETING_KEY_MISSING:{message:"TARGETING_KEY_MISSING",priority:"P3"},TARGETING_EVENT_INVALID:{message:"TARGETING_EVENT_INVALID",priority:"P3"},RESOURCE_LOAD_FAIL:{message:"RESOURCE_LOAD_FAIL",priority:"P3"},INITIALIZE_EVENT_INVALID:{message:"INITIALIZE_EVENT_INVALID",priority:"P3"}}},function(e,t,n){"use strict";var r=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===o}(e)}(e)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?a((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function s(e,t,n){return e.concat(t).map((function(e){return i(e,n)}))}function a(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||s,n.isMergeableObject=n.isMergeableObject||r;var o=Array.isArray(t);return o===Array.isArray(e)?o?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=i(e[t],n)})),Object.keys(t).forEach((function(o){n.isMergeableObject(t[o])&&e[o]?r[o]=a(e[o],t[o],n):r[o]=i(t[o],n)})),r}(e,t,n):i(t,n)}a.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return a(e,n,t)}),{})};const u="https://ads-delivery-service.us-west-2.test.meso.expedia.com";let c;c={environmentName:"Production",toolkit:"https://www.uciservice.com/ds/api/v1/toolkit",resourceEndpoint:"https://www.uciservice.com/ds/api/v1/resource",webComponentAssetsBaseUrl:"https://www.uciservice.com/assets/meso-loaders/webcomponentsjs/",uciservice:"https://www.uciservice.com",logging:{performance:{endpoint:"https://www.expedia.com/cl/data/creativePerformance.json?batch=true"},error:{endpoint:"https://www.expedia.com/cl/data/creativePerformance.json?batch=true"},autoCallout:6e4,maxLogsInQueue:50}};const d=a({toolkit:u+"/api/v1/toolkit",resourceEndpoint:u+"/api/v1/resource",webComponentAssetsBaseUrl:"https://meso-assets-test.s3.amazonaws.com/meso-loaders/webcomponentsjs/",fetchTimeout:5e3,meso:{storage:{targeting:"com.expedia.meso.targeting"}},uciservice:"https://adtargeting-service-int.us-west-2.test.meso.expedia.com",experiments:{throttle:200,abacus:{endpoint:"/api/bucketing/v1"}},logging:{performance:{endpoint:"https://collector.test.expedia.com/creativePerformance.json?batch=true"},error:{endpoint:"https://collector.test.expedia.com/creativePerformance.json?batch=true"},autoCallout:6e4,maxLogsInQueue:50,platform:"Web"}},c);t.a=d},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0);var o=(e,t)=>new Promise((n,o)=>{if(t&&t.length>0){const i=r.a.parseLogs(t),s=r.a.getNavigator();void 0===s||void 0===s.sendBeacon?((e,t)=>r.a.promiseFetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}))(e,i).then(e=>{if(e&&e.errors&&e.errors.length>0)return new Promise((e,t)=>t(new Error("woops")));n(e)}).catch(e=>o(e)):s.sendBeacon(e,JSON.stringify(i))?n(!0):o(!1)}else n(!0)}),i=n(2);(()=>{let e,t;function n(){const e=window.meso.logging.slice();window.meso.logging=[],u(),o(i.a.logging.performance.endpoint,e).catch(()=>{o(i.a.logging.performance.endpoint,e).catch(e=>(console.error("Error in sending data to the doppler",e),new Error("Error calling Doppler endpoint "+JSON.stringify(e))))})}function s(){window.meso.logging.length>i.a.logging.maxLogsInQueue&&(clearTimeout(e),e=null,n())}function a(e){Object.defineProperty(window.meso.logging,"push",{enumerable:!1,configurable:!0,value:(...n)=>{var s;n=r.a.parseLogs(n),t?(s=n,o(i.a.logging.performance.endpoint,s).catch(e=>new Error("Error calling Doppler endpoint "+JSON.stringify(e)))):(Array.prototype.push.call(window.meso.logging,...n),e())}})}function u(){e||(e=setTimeout(()=>{e=null,n()},i.a.logging.autoCallout)),a(s)}if("undefined"!=typeof window){window.meso=window.meso||{},window.meso.logging=window.meso.logging||[],document&&"function"==typeof document.addEventListener&&document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&n()},{capture:!0});const e="onpagehide"in window?"pagehide":"unload";window.addEventListener(e,()=>{t=!0,n()},{capture:!0}),window.addEventListener("load",()=>{u()},{capture:!0})}})();class s{constructor(e){this.moduleName=e,this.isDebugLoggingEnabled=window.location&&window.location.search&&window.location.search.includes("debug=true")}static setSessionConfig(e){s.config=Object.assign({},s.config,e)}sendLogPayload(e,t,n){window.meso=window.meso||{},window.meso.logging=window.meso.logging||[],s.setSessionConfig(window.meso.pageInfo);const o=Object.assign({type:e,moduleName:this.moduleName},t&&t.message?t:{message:t},s.config,{details:n},r.a.userAgent);o.siteId&&(o.siteId=""+o.siteId),window.meso.logging.push({logs:o,platform:i.a.logging.platform,timestamp:r.a.esDateString(),epoch:Date.now()})}info(e,t){this.sendLogPayload("info",e,t)}warn(e,t){this.sendLogPayload("warn",e,t)}error(e,t,n){const r=t instanceof Error||"object"==typeof t?{message:t.message,stack:t.stack}:{message:t};this.sendLogPayload("error",e,Object.assign({exception:r},n))}debug(e,t){this.isDebugLoggingEnabled&&console.info(`${performance.now()} ${this.moduleName}:${e}`,t||{})}trackEvent(e,t,n){this.sendLogPayload("track-event",{name:e,vars:t,events:n})}trackAction(e,t,n){this.sendLogPayload("track-action",{name:e,vars:t,events:n})}perf(e,t){if(t&&t.mark&&performance.getEntriesByName(t.mark).length>0){const{mark:e}=t;performance.measure("Performance Measure",e),t.duration=performance.getEntriesByType("measure")[0].duration,performance.clearMeasures(),delete t.mark}this.sendLogPayload("perf",e,t)}}const a={};t.b=e=>(a[e]||(a[e]=new s(e)),a[e])},function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=158)}({158:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(92);n.d(t,"createEventQueue",(function(){return r.b})),n.d(t,"QueuedEventHandler",(function(){return r.a}));var o=n(160);n.d(t,"createPrioritizedEventQueue",(function(){return o.b})),n.d(t,"PrioritizedQueuedEventHandler",(function(){return o.a}))},159:function(e,t,n){"use strict";t.a=class{constructor(){this.isLogger=!0,this._logs={error:[],warn:[],info:[]},this.info=this.info.bind(this),this.error=this.error.bind(this),this.warn=this.warn.bind(this)}info(e){this._logs.info.push(e)}error(e){this._logs.error.push(e)}warn(e){this._logs.warn.push(e)}get logs(){return this._logs}}},160:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(92);class o extends r.a{constructor(e,t=[],n=[]){super(e,t),this._priorityOrder=n,this._invalidEvents=this._unExecutedEvents.filter(e=>!this._isValidEvent(e)),this._unExecutedEvents=this._unExecutedEvents.filter(e=>this._isValidEvent(e)),this._sortEvents()}executeQueue(e=this._unExecutedEvents.length){const t=[];this._priorityOrder.forEach(n=>{let r=e;const o=this._unExecutedEvents.filter(e=>e.type===n);for(;o.length>0&&r>0;)this.push(o.pop()),r-=1;t.concat(o)}),this._unExecutedEvents=t}_isValidEvent(e){return"object"==typeof e&&null!==e&&void 0!==e.type&&-1!==this._priorityOrder.indexOf(e.type)}_sortEvents(){this._unExecutedEvents.sort((e,t)=>{const n=this._priorityOrder.indexOf(e.type),r=this._priorityOrder.indexOf(t.type);return-1===n||-1===r?0:n-r})}get invalidEvents(){return this._invalidEvents}}const i=(e,t=[],n=[],r={})=>{const i=new o(e,t,n);return i.executeQueue(r.limit),r.observable&&(i.observe=(e,t,n)=>r.observable.observe(e,t,n)),i}},92:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(159);class o{constructor(e,t=[]){if(!Array.isArray(t))throw new Error("Meso event queue requires an array.");this._callback=e,this._executedEvents=[],this._unExecutedEvents=t,this.isEventQueue=!0,this.logger=new r.a}push(...e){this._executedEvents.push(...e),this._callback(...e)}executeQueue(e=this._unExecutedEvents.length){for(;this._unExecutedEvents.length>0&&e>0;)this.push(this._unExecutedEvents.shift()),e-=1}get executedEvents(){return this._executedEvents}get unExecutedEvents(){return this._unExecutedEvents}}const i=(e,t=[],n={},r)=>{const i=new o(e,t);return void 0!==r&&(window.meso[r]=i),i.executeQueue(n.limit),n.observable&&(i.observe=(e,t,r)=>n.observable.observe(e,t,r)),i}}})},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15);function s(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=o({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),s=t.length>0?t.join("="):void 0;s=void 0===s?null:i(s),n(i(o),s,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))):r},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[s(t,e),"[",r,"]"].join(""):[s(t,e),"[",s(r,e),"]=",s(n,e)].join("")};case"bracket":return function(t,n){return null===n?s(t,e):[s(t,e),"[]=",s(n,e)].join("")};default:return function(t,n){return null===n?s(t,e):[s(t,e),"=",s(n,e)].join("")}}}(t=o({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(r){var o=e[r];if(void 0===o)return"";if(null===o)return s(r,t);if(Array.isArray(o)){var i=[];return o.slice().forEach((function(e){void 0!==e&&i.push(n(r,e,i.length))})),i.join("&")}return s(r,t)+"="+s(o,t)})).filter((function(e){return e.length>0})).join("&"):""}},function(e,t,n){"use strict";var r=n(0);function o(){if(r.a.getWindow){window.meso=window.meso||{};try{Function("() => {}; const spread = { ...{} };"),window.meso.ecmascript="6"}catch(e){window.meso.ecmascript="5"}}}o()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,c=a||u||Function("return this")(),d=Object.prototype.toString,l=Math.max,m=Math.min,p=function(){return c.Date.now()};function g(e,t,n){var r,o,i,s,a,u,c=0,d=!1,g=!1,w=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,i=o;return r=o=void 0,c=t,s=e.apply(i,n)}function E(e){return c=e,a=setTimeout(F,t),d?v(e):s}function b(e){var n=e-u;return void 0===u||n>=t||n<0||g&&e-c>=i}function F(){var e=p();if(b(e))return y(e);a=setTimeout(F,function(e){var n=t-(e-u);return g?m(n,i-(e-c)):n}(e))}function y(e){return a=void 0,w&&r?v(e):(r=o=void 0,s)}function _(){var e=p(),n=b(e);if(r=arguments,o=this,u=e,n){if(void 0===a)return E(u);if(g)return a=setTimeout(F,t),v(u)}return void 0===a&&(a=setTimeout(F,t)),s}return t=f(t)||0,h(n)&&(d=!!n.leading,i=(g="maxWait"in n)?l(f(n.maxWait)||0,t):i,w="trailing"in n?!!n.trailing:w),_.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=u=o=a=void 0},_.flush=function(){return void 0===a?s:y(p())},_}function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function f(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(h(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=h(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var a=o.test(e);return a||i.test(e)?s(e.slice(2),a?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return h(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),g(e,t,{leading:r,maxWait:t,trailing:o})}}).call(this,n(7))},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,c=a||u||Function("return this")(),d=Object.prototype.toString,l=Math.max,m=Math.min,p=function(){return c.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var a=o.test(e);return a||i.test(e)?s(e.slice(2),a?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r,o,i,s,a,u,c=0,d=!1,f=!1,w=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,i=o;return r=o=void 0,c=t,s=e.apply(i,n)}function E(e){return c=e,a=setTimeout(F,t),d?v(e):s}function b(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-c>=i}function F(){var e=p();if(b(e))return y(e);a=setTimeout(F,function(e){var n=t-(e-u);return f?m(n,i-(e-c)):n}(e))}function y(e){return a=void 0,w&&r?v(e):(r=o=void 0,s)}function _(){var e=p(),n=b(e);if(r=arguments,o=this,u=e,n){if(void 0===a)return E(u);if(f)return a=setTimeout(F,t),v(u)}return void 0===a&&(a=setTimeout(F,t)),s}return t=h(t)||0,g(n)&&(d=!!n.leading,i=(f="maxWait"in n)?l(h(n.maxWait)||0,t):i,w="trailing"in n?!!n.trailing:w),_.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=u=o=a=void 0},_.flush=function(){return void 0===a?s:y(p())},_}}).call(this,n(7))},function(e){e.exports=JSON.parse('{"bernie":[{"name":"small","range":[0,575]},{"name":"medium","range":[576,991]},{"name":"large","range":[992,1199]},{"name":"xlarge","range":[1200,100000]}],"expweb":[{"name":"small","range":[0,490]},{"name":"medium","range":[491,1259]},{"name":"large","range":[1260,100000]}],"hotwire":[{"name":"small","range":[0,575]},{"name":"medium","range":[576,991]},{"name":"large","range":[992,1199]},{"name":"xlarge","range":[1200,100000]}],"vrbo":[{"name":"xsmall","range":[0,320]},{"name":"small","range":[321,500]},{"name":"medium","range":[501,1313]},{"name":"large","range":[1314,1555]},{"name":"xlarge","range":[1556,100000]}],"flex":[{"name":"small","range":[0,521]},{"name":"medium","range":[522,1019]},{"name":"large","range":[1020,100000]}],"hcom":[{"name":"small","range":[0,575]},{"name":"medium","range":[576,767]},{"name":"large","range":[768,1200]},{"name":"xlarge","range":[1201,100000]}]}')},function(e,t,n){"use strict";(function(e){var r=n(3),o=n(1),i=n(12);const s=e.window;s.meso=s.meso||{},s.meso.breakpoints=s.meso.breakpoints||[];const a=Object(r.b)("PlatformBreakpoints");t.a=class{constructor(e={}){this._platforms=e,this._breakpoints=[]}_getPlatformConfig(e){if(Object.keys(this._platforms).includes(e)){const t=this._platforms[e];return s.meso.breakpoints.isEventQueue?s.meso.breakpoints.config=t:a.warn(o.a.BREAKPOINTS_ERROR,{description:this.constructor.name+": window.meso.breakpoints is not an event queue as expected",methodName:"_getPlatformConfig"}),t}return null}setPlatform(e){const t=this._getPlatformConfig(e);null===t?a.warn(o.a.BREAKPOINTS_ERROR,{description:this.constructor.name+": platform not found in known breakpoint platforms",requested:e,known:Object.keys(this._platforms),methodName:"setPlatform"}):(this._removeBreakpoints(),this._addBreakpoints(t))}_addBreakpoints(e){e.forEach(e=>{const t=new i.a(e);t.startListening(),this._breakpoints.push(t)})}_removeBreakpoints(){this._breakpoints=this._breakpoints.filter(e=>(e.stopListening(),!1))}}}).call(this,n(7))},function(e,t,n){"use strict";var r=n(3),o=n(1);window.meso=window.meso||{},window.meso.adcontext=window.meso.adcontext||[],window.meso.breakpoints=window.meso.breakpoints||[];const i=Object(r.b)("Breakpoint");t.a=class{constructor(e){this._mq=window.matchMedia(this._createMediaQuery(...e.range)),this._breakpoint=e.name,this._callback=this._mediaQueryCallback.bind(this)}_createMediaQuery(e,t){return`(min-width: ${e}px) and (max-width: ${t}px)`}_mediaQueryCallback(){this._mq.matches&&(window.meso.breakpoints.isEventQueue?(window.meso.breakpoints.current=this._breakpoint,window.meso.adcontext.push({breakpoint:this._breakpoint})):i.warn(o.a.BREAKPOINTS_ERROR,{description:this.constructor.name+": window.meso.breakpoints is not an event queue as expected",methodName:"_mediaQueryCallback"}))}startListening(){this._mq.addListener(this._callback),this._callback()}stopListening(){this._mq.removeListener(this._callback)}}},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,u=s(e),c=1;c<arguments.length;c++){for(var d in n=Object(arguments[c]))o.call(n,d)&&(u[d]=n[d]);if(r){a=r(n);for(var l=0;l<a.length;l++)i.call(n,a[l])&&(u[a[l]]=n[a[l]])}}return u}},function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],i(n),i(r))}function s(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=i(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=o.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=s(n[0]);r!==n[0]&&(t[n[0]]=r)}n=o.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),a=0;a<i.length;a++){var u=i[a];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}},function(e,t){!function(e,t){"use strict";if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)"isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var n=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},o.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},o.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},o.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(e,"resize",this._checkForIntersections,!0),i(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),n=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(o){var i=o.element,s=a(i),u=this._rootContainsTarget(i),c=o.entry,d=t&&u&&this._computeTargetAndRootIntersection(i,n),l=o.entry=new r({time:e.performance&&performance.now&&performance.now(),target:i,boundingClientRect:s,rootBounds:n,intersectionRect:d});c?t&&u?this._hasCrossedThreshold(c,l)&&this._queuedEntries.push(l):c&&c.isIntersecting&&this._queuedEntries.push(l):this._queuedEntries.push(l)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(n,r){if("none"!=e.getComputedStyle(n).display){for(var o,i,s,u,d,l,m,p,g=a(n),h=c(n),f=!1;!f;){var w=null,v=1==h.nodeType?e.getComputedStyle(h):{};if("none"==v.display)return;if(h==this.root||h==t?(f=!0,w=r):h!=t.body&&h!=t.documentElement&&"visible"!=v.overflow&&(w=a(h)),w&&(o=w,i=g,s=void 0,u=void 0,d=void 0,l=void 0,m=void 0,p=void 0,s=Math.max(o.top,i.top),u=Math.min(o.bottom,i.bottom),d=Math.max(o.left,i.left),l=Math.min(o.right,i.right),p=u-s,!(g=(m=l-d)>=0&&p>=0&&{top:s,bottom:u,left:d,right:l,width:m,height:p})))break;h=c(h)}return g}},o.prototype._getRootRect=function(){var e;if(this.root)e=a(this.root);else{var n=t.documentElement,r=t.body;e={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},o.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},o.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var o=0;o<this.thresholds.length;o++){var i=this.thresholds[o];if(i==n||i==r||i<n!=i<r)return!0}},o.prototype._rootIsInDom=function(){return!this.root||u(t,this.root)},o.prototype._rootContainsTarget=function(e){return u(this.root||t,e)},o.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},o.prototype._unregisterInstance=function(){var e=n.indexOf(this);-1!=e&&n.splice(e,1)},e.IntersectionObserver=o,e.IntersectionObserverEntry=r}function r(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?Number((o/n).toFixed(4)):this.isIntersecting?1:0}function o(e,t){var n,r,o,i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout((function(){n(),o=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" ")}function i(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function a(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function u(e,t){for(var n=t;n;){if(n==e)return!0;n=c(n)}return!1}function c(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}}(window,document)},function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return ut}));n(6);var r=n(2),o=n(3),i=n(0),s=n(1);const a=Object(o.b)("webcomponents-loader");var u=function(){let e,t=!1,n=[],r=!1;function o(){window.WebComponents.ready=!0,document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))}function u(){i.a.getCustomElements()&&customElements.polyfillWrapFlushCallback&&customElements.polyfillWrapFlushCallback(t=>{e=t,r&&e()})}function c(){window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(window.document),t=!0,d().then(o)}function d(){r=!1;const t=n.map(e=>e instanceof Function?e():e);return n=[],Promise.all(t).then(()=>{r=!0,e&&e()}).catch(e=>{a.error(s.a.ADS_LOADER_WEBCOMPONENT_FLUSH_NOT_EXECUTED,e)})}function l(e){document.addEventListener("readystatechange",(function t(){document.removeEventListener("readystatechange",t),e()}))}window.WebComponents=window.WebComponents||{},window.WebComponents.ready=window.WebComponents.ready||!1,window.WebComponents.waitFor=window.WebComponents.waitFor||function(e){e&&(n.push(e),t&&d())},window.WebComponents._batchCustomElements=u;const m="ads-loader.es5.js";let p=[];(!("attachShadow"in Element.prototype)||!("getRootNode"in Element.prototype)||window.ShadyDOM&&window.ShadyDOM.force)&&p.push("sd"),i.a.getCustomElements()&&!i.a.getCustomElements().forcePolyfill||p.push("ce");const g=function(){const e=document.createElement("template");if(!("content"in e))return!0;if(!(e.content.cloneNode()instanceof DocumentFragment))return!0;const t=document.createElement("template");t.content.appendChild(document.createElement("div")),e.content.appendChild(t);const n=e.cloneNode(!0);return 0===n.content.childNodes.length||0===n.content.firstChild.content.childNodes.length}();if(window.Promise&&Array.from&&window.URL&&window.Symbol&&!g||(p=["sd-ce-pf"]),p.length){let e;const t=`bundles/webcomponents-${p.join("-")}.js`;if(window.WebComponents.root)e=window.WebComponents.root+t;else{const n=document.querySelector(`script[src*="${m}"]`);e=n.src.replace(m,t)}const n=document.createElement("script");n.src=e,n.addEventListener("error",t=>{a.error(s.a.ADS_LOADER_WEBCOMPONENT_POLYFILL_NOT_LOADED,{url:e},t)}),n.addEventListener("load",()=>{u(),c()}),"loading"===i.a.getReadyState()?l(()=>{document.head.appendChild(n)}):document.head.appendChild(n)}else"loading"===i.a.getReadyState()?l(c):(t=!0,o())};var c=e=>{if(window.WebComponents={root:r.a.webComponentAssetsBaseUrl},u(),window&&window.meso&&"5"===window.meso.ecmascript){const t=document.createElement("script"),n="custom-elements-es5-adapter.js";t.src=r.a.webComponentAssetsBaseUrl+n,t.defer="defer",t.onload=e,document.head.appendChild(t)}else e()},d=n(10),l=n(4);const m=new(n(11).a)(d),p=e=>{switch(e.type){case"platform":m.setPlatform(e.platform)}};window&&(window.meso=window.meso||{},window.meso.breakpoints=window.meso.breakpoints||[],window.meso.breakpoints.isEventQueue||Object(l.createEventQueue)(p,window.meso.breakpoints,{},"breakpoints"));var g=n(5),h=n.n(g),f={canTrack:!1,canSell:!0};let w=Object.assign({},f);const v=()=>Object.assign({},w),E=e=>{const t=v();if(t.hasOwnProperty(e))return t[e];throw new Error(e+" is not a recognized privacy key")},b=(e,t)=>{if(!w.hasOwnProperty(e))throw new Error(e+" is not a recognized privacy key");w[e]=t};var F=n(8),y=n.n(F);const _=Object(o.b)("abacus"),I=()=>i.a.getCookie("DUAID"),O=()=>{const e=i.a.getCookie("tpid");return null!==e&&e.match(/^.*,[0-9]+$/)?e.split(",")[1]:null},A=()=>{const e=i.a.getCookie("iEAPID");return null!==e&&e.match(/^[0-9]+$/)?e:null},x=()=>i.a.getCookie("abov"),T={site:1,user:I(),guid:I(),tpid:O(),eapid:A(),abov:x()};var k={abacusEvaluateRequest:(e=[],t={})=>new Promise((n,o)=>{if(null===T.guid||null===T.tpid||null===T.eapid)throw new Error("Could not get GUID, TPID, or EAPID from domain cookie.");const a={guid:T.guid,eapid:T.eapid,tpid:T.tpid,id:e.filter(e=>!0!==e.exposure&&"abacus"===e.module&&!1!==e.evaluate).map(e=>e.id),verbose:!0},u={guid:T.guid,eapid:T.eapid,tpid:T.tpid,id:e.filter(e=>!0===e.exposure&&"abacus"===e.module&&!1!==e.evaluate).map(e=>e.id)};t.pageid&&(a.pageName=t.pageid,u.pageName=t.pageid),null!==T.abov&&(a.overrides=T.abov,u.overrides=T.abov);const c=(e,t)=>{i.a.promiseFetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t),credentials:"same-origin"}).then(e=>e.json()).then(e=>{const t={};e&&e.evaluatedExperiments&&Array.isArray(e.evaluatedExperiments)&&(e.evaluatedExperiments.forEach(e=>{if(e.hasOwnProperty("message")){const t=new Error(e.message);_.error(s.a.EXPERIMENTS_INVALID,t,{methodName:"apiRequest"})}else t[e.id]=parseInt(e.value,10)||0}),window.meso=window.meso||{},window.meso.experiments=window.meso.experiments||[],window.meso.experiments.push({type:"update",experiments:t}))}).then(e=>n(e)).catch(e=>o(e))},d=`${window.location.origin}${r.a.experiments.abacus.endpoint}`;Object.keys(a).length&&c(d+"/evaluateExperiments",a),Object.keys(u).length&&c(d+"/evaluateExperimentsAndLog",u)}),abacusExposureRequest:(e=[],t={})=>new Promise((n,o)=>{if(null===T.guid||null===T.tpid||null===T.eapid)throw new Error("Could not get GUID, TPID, or EAPID from domain cookie.");const a={guid:T.guid,eapid:T.eapid,tpid:T.tpid,evaluatedExperiments:e.filter(e=>"abacus"===e.module).map(e=>({id:e.id,value:e.bucket}))};t.pageid&&(a.pageName=t.pageid);const u=`${window.location.origin}${r.a.experiments.abacus.endpoint}/logExperiments`;i.a.promiseFetch(u,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a),credentials:"same-origin"}).then(e=>e.json()).then(e=>{e&&Array.isArray(e.successes)&&Array.isArray(e.failures)&&(e.successes.forEach(e=>_.info("Successful exposure for Abacus experiment "+e.id,{data:e,methodName:"abacusExposureRequest"})),e.failures.forEach(e=>_.error(s.a.EXPERIMENTS_EXPOSURE_FAILED,e,{description:"Failed exposure for Abacus experiment "+e.message.id,methodName:"abacusExposureRequest"})))}).then(e=>n(e)).catch(e=>o(e))}),siteInfo:T,getGuid:I,getTpid:O,getEapid:A,getAbov:x},R={evaluate:(e,t)=>k.abacusEvaluateRequest(e,t),expose:(e,t)=>k.abacusExposureRequest(e,t),siteInfo:k.siteInfo};const C=Object(o.b)("athena"),N=e=>{const t=new RegExp(`(${e}[^,]+)`),n=window.commonDataBlock.mvtHistory.athenaMvts.match(t)||[],r=n.length>1?n[1].split("."):[];return r.length>0?parseInt(r.pop(),10):-1};var j=(e=[])=>{if(window&&window.commonDataBlock&&window.commonDataBlock.mvtHistory&&window.commonDataBlock.mvtHistory.athenaMvts){const t={};e.forEach(e=>{let n=N(e.id);if(-1===n){n=0;const t=new Error(`Could not find hmvt ${e.id}, defaulted to 0 as control`);C.error(s.a.EXPERIMENTS_INVALID,t,{methodName:"athenaEvaluateRequest"})}t[e.id]=n}),window.meso=window.meso||{},window.meso.experiments=window.meso.experiments||[],window.meso.experiments.push({type:"update",experiments:t})}else{const e=new Error("commonDataBlock mvtHistory is not defined");C.error(s.a.EXPERIMENTS_INVALID,e,{methodName:"athenaEvaluateRequest"})}},D={evaluate:e=>j(e),expose:()=>{}};const P=Object(o.b)("ExperimentsFrameworkModules");class S{constructor(e={}){this._target=e,this._modules={abacus:R,athena:D}}evaluate(e){this.validateExperiments(e),Object.keys(this._modules).forEach(t=>{const n=e.filter(e=>e.module===t);n.length>0&&this._modules[t].evaluate(n,this._target)})}expose(e){Object.keys(this._modules).forEach(t=>{this.validateExperiments(e);const n=e.filter(e=>e.module===t);this._modules[t].expose(n,this._target)})}validateExperiments(e){e.forEach(e=>{void 0!==e.module&&(this._modules.hasOwnProperty(e.module)||P.error(s.a.EXPERIMENTS_INVALID,new Error(`Module ${e.module} not found in known experiments modules for experiment ${e.name} at target ${JSON.stringify(this._target)}.`),{methodName:"validateExperiments"}),void 0===e.id&&P.error(s.a.EXPERIMENTS_INVALID,new Error(`Expected property id to be specified when an experiment is configured with a module. No id property was found for ${e.name} at target ${JSON.stringify(this._target)}.`),{methodName:"validateExperiments"}))})}}const L=Object(o.b)("parseOverrideExperiments"),M=()=>{try{const e={},t=i.a.getCookie("meov");return(null===t?[]:t.split(",")).forEach(t=>{const n=t.split(".");e[n[0]]=n[1]}),e}catch(e){return{}}};class B{constructor(e,t){this._config=e,this._target=t,this._cache={},this._modules=new S(this._target),this._modules.evaluate(this._config),this._throttledInitializeExperiments=y()(this._initializeExperiments.bind(this),r.a.experiments.throttle,{leading:!0,trailing:!0}),this._throttledUpdateExperiments=y()(this._updateExperiments.bind(this),r.a.experiments.throttle,{leading:!0,trailing:!0}),window.addEventListener("mesoExperiments",e=>{if(e&&e.detail)switch(e.detail.type){case"register":this._throttledInitializeExperiments();break;case"exposure":e.detail&&e.detail.experiments&&Array.isArray(e.detail.experiments)&&this._exposure(e.detail.experiments)}})}initialize(){this._initializeExperiments()}_initializeExperiments(){window.dispatchEvent(new CustomEvent("mesoExperiments",{detail:{type:"initialize",experiments:this._cache}}))}_updateExperiments(){window.dispatchEvent(new CustomEvent("mesoExperiments",{detail:{type:"update",experiments:this._cache}}))}_resolveIds(e=[]){const t=[];Object.keys(e).forEach(n=>{const r=this._config.filter(e=>e.id===n);0===r.length?t.push(n):(e[r.shift().name]=e[n],delete e[n])}),t.length>0&&L.warn(s.a.EXPERIMENTS_INVALID,{description:"Experiments could not be mapped to external ids in config",keys:t,config:this._config,methodName:"_resolveIds"})}_removeUnconfigured(e=[]){const t=[];Object.keys(e).forEach(n=>{0===this._config.filter(e=>e.name===n).length&&(t.push(n),delete e[n])}),t.length>0&&L.warn(s.a.EXPERIMENTS_INVALID,{description:"Could not find experiments by name in config",keys:t,config:this._config,methodName:"_removeUnconfigured"})}_removeInvalidChildExperiments(e=[]){const t=this._config.filter(e=>void 0!==e.parent);Object.keys(e).forEach(n=>{const r=t.filter(e=>e.name===n);if(r.length>0){r.length>1&&L.warn(s.a.EXPERIMENTS_INVALID,{description:`Multiple entries found for ${n} in config`,config:this._config,methodName:"_removeInvalidChildExperiments"});const t=e[r.shift().parent]||0;0!==t&&"0"!==t||delete e[n]}})}update(e){const t=M();this._resolveIds(e),this._removeUnconfigured(e),this._removeInvalidChildExperiments(e),this.validate(e)&&(this._cache=Object.assign(this._cache,e,t)),this._throttledUpdateExperiments()}control(){this._cache={};const e={};this._config.forEach(t=>{e[t.name]=0}),this.update(e)}clear(){this._cache={},this.update({})}get experiments(){return this._cache}get configuredExperimentNames(){return this._config.map(e=>e.name)}get configuredOverrideNames(){return Object.keys(M())}_exposure(e){e.forEach((t,n)=>{t.bucket=this._cache[t.name]||null;const r=this._config.filter(e=>e.name===t.name||e.id===t.id),o=r.length?r[0]:{};e[n]=Object.assign({},o,t)}),this._modules.expose(e)}validate(e){return!!i.a.isObject(e)&&Object.keys(e).every(t=>"number"==typeof e[t]||"string"==typeof e[t])}}let U=null;var $=e=>{const{params:t,config:n,experiments:r}=e;if(!E("canTrack"))return;const o=e=>{switch(e.type){case"update":e.experiments&&U.update(e.experiments);break;case"clear":U.clear();break;case"override":void 0!==e.content&&"string"==typeof e.content&&i.a.setCookie("meov",e.content);break;case"exposure":void 0!==e.experiments&&Array.isArray(e.experiments)&&U._exposure(e.experiments);break;case"control":U.control()}},s=h.a.parse(i.a.getLocationSearch());if(void 0!==s.meov&&i.a.setCookie("meov",s.meov),n&&t){const e=((e,t)=>{const n=e.map(e=>e.name),r=t.filter(e=>!n.includes(e.name));return e.concat(r)})(Array.isArray(r)?r:[],n.EXPERIMENTS&&n.EXPERIMENTS.conditions||[]);if(U=new B(e,t),window.meso=window.meso||{},window.meso.experiments=window.meso.experiments||[],!window.meso.experiments.isEventQueue){const e=["clear","update","override","control","exposure"];window.meso.experiments=Object(l.createPrioritizedEventQueue)(o,window.meso.experiments,e,{})}window.meso.experiments.configuredExperimentNames=U.configuredExperimentNames,window.meso.experiments.configuredOverrideNames=U.configuredOverrideNames,U.initialize()}},G=n(9),q=n.n(G);const V=Object(o.b)("adinfo"),z=e=>"string"==typeof e,Q=e=>"string"==typeof e&&e.length>0,W=e=>"number"==typeof e&&e>=0,H=Object.freeze({uuid:Q,siteId:e=>Q(e)||W(e),pageName:Q,memberId:z,dest:Q,origin:z,locResolver:e=>["gaia","tla","hcom","cruise"].some(t=>t===e),dateStart:z,dateEnd:z,adults:W,kids:W,adProvider:z});function X(e={}){const t=(n=e,Object.entries(n).reduce((e,[t,n])=>(H.hasOwnProperty(t)&&(H[t](n)?n?e[t]=n:V.warn(s.a.TARGETING_VALUE_EMPTY,{description:"No value for key="+t,methodName:"filterInvalidDataProps"}):V.error(s.a.TARGETING_INVALID,new Error("Invalid Targeting Data"),{description:`Invalid Parameter: key=${t} val=${n}`,methodName:"filterInvalidDataProps"})),e),{}));var n;return function(e){(e.hasOwnProperty("dest")||e.hasOwnProperty("origin"))&&(e.hasOwnProperty("locResolver")||V.error(s.a.TARGETING_INVALID,new Error("Invalid Targeting Data"),{description:"Invalid Parameter: locResolver is required when dest or origin are provided.",methodName:"validateLocResolver"}))}(t),t}const J=Object(o.b)("adinfo");let K="0",Y="",Z=r.a.uciservice;var ee=(e={},t)=>{const n=Object.assign({siteId:""+(K||"0"),pageName:Y||"",[t?"uuid":"userId"]:i.a.getCookie("DUAID")||"null",_:Date.now()},e),r=h.a.stringify(n),o=`${Z}/adinfo?${r}`;return window.performance&&window.performance.mark&&window.performance.mark("AdInfoRequest"),i.a.promiseFetch(o,{credentials:"include",mode:"cors"}).then(e=>{if(J.perf("AdInfo Request",{mark:"AdInfoRequest",endpoint:o}),e&&e.errors&&e.errors.length>0)throw new Error("Could not retrieve targeting information from "+o);return e.json()})},te=(e={})=>{K=""+(e.params&&e.params.siteId||"0"),Y=e.params&&e.params.pageId||"",Z=e.targeting||r.a.uciservice},ne=()=>""+K;var re=e=>{if(!i.a.isObject(e))throw new Error("First argument must be an object");return Object.assign({},e,{ads:"1"})};let oe={},ie={},se=null,ae={},ue=0,ce=0,de=!1;const le=Object(o.b)("targeting"),me=()=>{let e={};try{e=window&&window.localStorage&&window.localStorage.getItem(r.a.meso.storage.targeting),e=(e=>{const t=e||{},n=new Set(["cmptst","CMPTST"]);return Object.keys(t).reduce((t,r)=>(n.has(r)||(t[r]=e[r]),t),{})})(JSON.parse(e))}catch(t){le.error(s.a.TARGETING_INVALID,t,{description:"Error reading targeting from local storage",methodName:"getLocalStorageTargetingData"}),e={}}return e},pe=()=>Promise.all([Promise.resolve(oe),Promise.resolve(me())]).then(e=>Object.assign({},...e)),ge=e=>{var t;oe=e,t=e,window.localStorage&&window.localStorage.setItem(r.a.meso.storage.targeting,JSON.stringify(t))},he=e=>!0===e?"1":!1===e?"0":Array.isArray(e)?String(e.map(e=>he(e))):String(e),fe=e=>{document.dispatchEvent(new CustomEvent("MesoTargeting",{detail:{type:"gpt_update",targeting:re(e),adinfoLastUpdated:ue,targetingLastUpdated:ce}})),document.dispatchEvent(new CustomEvent("MesoTargeting",{detail:{type:"update",targeting:re(e),adinfoLastUpdated:ue,targetingLastUpdated:ce}}))},we=(e={})=>""+E("canTrack")=="true"?ee(e,de).then(t=>(ue=Date.now(),le.info("Request to adinfo success",{data:e,methodName:"fetchAdinfoTargeting"}),t&&t.targeting||{})).catch(t=>(le.error(s.a.TARGETING_FETCH_ERROR,t,{params:e,methodName:"fetchAdinfoTargeting"}),ue=Date.now(),{})):Promise.resolve({}),ve=e=>{const t=ne();if(de&&(e.adinfo=Object.assign({},e.adinfo,e.targeting),e.adinfo=X(e.adinfo)),((e={})=>Object.keys(e).some(t=>e[t]!==ae[t]))(e.adinfo)||null===se){const t=e.adinfo||{};se=we(t),ae=Object.assign({},ae,e.adinfo)}else se=Promise.resolve({});const n=[pe()];de?n.push(Promise.resolve(e.targeting||{}),se):n.push(se,Promise.resolve(e.targeting||{})),Promise.all(n).then(e=>{if(121===parseInt(t,10)||321===parseInt(t,10)){const t=e[1].pd||[],n=[...e[0].pd?e[0].pd.split(","):[],...t,...e[2].d?e[2].d.split(","):[]];e[1].pd=n.filter((e,t)=>n.indexOf(e)===t),e[1].pd=e[1].pd.slice(-20)}return Object.assign({},...e)}).then(e=>{return t=e,Object.keys(t).reduce((e,n)=>(e[n]=he(t[n]),e),{});var t}).then(e=>{(e=>{for(const t in e)if(e[t]!==oe[t])return!0;return!1})(e)&&(ce=Date.now(),ge(e),fe(e))}).catch(e=>{le.error(s.a.TARGETING_UPDATE_ERROR,e,{methodName:"updateAndDispatch"})})},Ee=q()(()=>{ve(ie),ie={}},0,{leading:!1,trailing:!0}),be=e=>{ie=Object.assign(ie,e),Ee()},Fe=q()(()=>{ce>0&&window.dispatchEvent(new CustomEvent("MesoTargeting",{detail:{type:"ready",timestamp:ce}}))},0,{leading:!1,trailing:!0}),ye=(e={})=>{if(null!==e&&"object"==typeof e)switch(e.type){case"clear":oe={},ie={},se=null,ae={},ue=0,ce=0;break;case"register":(e=>{le.debug("Register event received in the targeting framework.",{requestingModule:e.target,methodName:"register"}),Fe()})(e);break;case"update":be(e);break;default:be(e)}},_e=(e="gam")=>{if("gam"!==e)throw Error("We currently only support 'gam' as the format.");return Object.assign({},oe)};var Ie={initialize:{initialize:e=>{if(window.meso=window.meso||{},window.meso.targeting=window.meso.targeting||[],window.meso.targeting.isEventQueue)return;te(e),de=/\.com\/v2$/.test(e.targeting);window.meso.targeting.forEach(e=>{null===e||"object"!=typeof e||e.type||(e.type="update"),"register"!==e.type||e.hasOwnProperty("target")||le.info(s.a.TARGETING_EVENT_INVALID,{currEvent:Object.assign({},e),description:"'target' key is absent from the targeting 'register' payload.",methodName:"formatTargetingEvents"}),de&&"update"===e.type&&!e.hasOwnProperty("targeting")&&(le.warn(s.a.TARGETING_KEY_MISSING,{currEvent:Object.assign({},e),description:"'targeting' key is absent from the targeting payload.",methodName:"formatTargetingEvents"}),e.targeting={})}),window.meso.targeting=Object(l.createPrioritizedEventQueue)(ye,window.meso.targeting,["clear","register","update"],{}),window.meso.targeting.get=_e,document.addEventListener("MesoTargeting",e=>{"register"===(e&&e.detail&&e.detail.type)&&pe().then(e=>{fe(e)})}),pe().then(e=>{fe(e)})},fetchAdinfoTargeting:we,update:be,updateAndDispatch:ve,loadTargeting:pe,getAdinfoData:()=>ae,getSavedTargeting:_e,setTargetingLastUpdated:e=>{ce=e}}.initialize};var Oe=()=>{const e={promise:null,resolve:null,reject:null,isResolved:!1};return e.promise=new Promise((t,n)=>{e.resolve=n=>{e.isResolved=!0,t(n)},e.reject=n}),e};let Ae={},xe=[];const Te=e=>{e&&e.detail&&("initialize"!==e.detail.type&&"update"!==e.detail.type||e.detail.experiments&&(Ae=Object.assign({},Ae,e.detail.experiments),xe=xe.filter(e=>!e.checkExperiments(Ae))))};window&&"function"==typeof window.addEventListener&&window.addEventListener("mesoExperiments",Te),window&&"function"==typeof window.dispatchEvent&&window.dispatchEvent(new CustomEvent("mesoExperiments",{detail:{type:"register"}}));var ke=class{constructor(e=[]){this._requested=Array.isArray(e)?e:[e],this._configured=this._buildExperimentConfig(),this._resolvable=this._resolvableExperiments(),this._TIMEOUT=500,this._completePromise=Oe()}checkExperiments(e){const t=!(this._resolvable.length>0)||this._resolvable.every(t=>e.hasOwnProperty(t));return t&&this._completePromise.resolve(this.getBuckets()),t}_resolvableExperiments(){const{resolvable:e}=this._requested.reduce((e,t)=>(this._configured.includes(t)&&e.resolvable.push(t),e),{resolvable:[]});return e}_buildExperimentConfig(){let e=window&&window.meso&&window.meso.experiments&&window.meso.experiments.configuredExperimentNames||[];Array.isArray(e)||(e=[]);let t=window&&window.meso&&window.meso.experiments&&window.meso.experiments.configuredOverrideNames||[];return Array.isArray(t)||(t=[]),[...e,...t]}getBuckets(){return this._requested.reduce((e,t)=>(this._resolvable.includes(t)?e[t]=Ae.hasOwnProperty(t)?Ae[t]:null:e[t]=null,e),{})}isExperimentConfigured(e){return this._configured.includes(e)}wait(){if(window&&window.meso&&void 0===window.meso.experiments)return Promise.resolve(this.getBuckets());const e=Promise.race([this._completePromise.promise,new Promise(e=>{setTimeout(()=>{e(this.getBuckets())},this._TIMEOUT)})]);var t;return(t=this).checkExperiments(Ae)||xe.push(t),e}get timeout(){return this._TIMEOUT}set timeout(e){this._TIMEOUT=e}};const Re=Object(o.b)("ads-delivery-interface");let Ce={};const Ne=(e,t)=>{const n={code:"FETCH-ADS-FAIL",isTimeout:!1,src:"ads-delivery-interface.onFetchAdsFailure()",type:e,info:t};window.dispatchEvent&&window.dispatchEvent(new CustomEvent("mesoFallback",{detail:n}))},je=(e={})=>{const t=[],n=E("canTrack")||!1,r=i.a.getCurrentBreakpoint();if(function(e){document.dispatchEvent(new CustomEvent("mesoAdFallbackEvent",{detail:{type:"gdpr",canTrack:e}}))}(n),!e||!e.script)return Promise.all(t);for(const o of e.script){const e=o.gdprCompliant||!1,s=n||e,a=null===r||!Array.isArray(o.breakpoints)||o.breakpoints.includes(r);if(o.src&&s&&a)if(window&&window.meso&&"5"===window.meso.ecmascript&&o.repo&&"templates"===o.repo&&".es5.js"!==o.src.substring(o.src.length-7)&&(o.src=o.src.replace(/\.js$/,".es5.js")),o.variantsEnabled&&o.variantsEnabled.length){const e=o.variantsEnabled.map(e=>e.split(".")[0]),n=new ke(e).wait().then(e=>{if(o.variantsEnabled.some(t=>{const[n,r]=t.split(".");return e.hasOwnProperty(n)&&null!==e[n]&&parseInt(e[n],10)===parseInt(r,10)}))return i.a.promiseScript(o.src,o)});t.push(n)}else t.push(Promise.resolve(i.a.promiseScript(o.src,o)));else Ne("LoadResourcesSkipped",{src:o.src,canTrack:n,canDownload:s,passesBpCheck:a})}return Promise.all(t).then(e=>Promise.all(e.filter(e=>e)))},De=()=>{if(0===Object.keys(Ce).length)return;const e=(()=>{let e;try{e=JSON.parse(JSON.stringify(Ce))}catch(e){return Ce}if(0===Object.keys(Ce).length)return e;const t=i.a.getCurrentBreakpoint();return null===t||e.config&&Object.keys(e.config).forEach(n=>{Array.isArray(e.config[n].conditions)&&e.config[n].conditions.forEach(r=>{const o=r.uci||r.slot;Array.isArray(r.breakpoints)&&!r.breakpoints.includes(t)&&e.content&&e.content[n]&&e.content[n][o]&&delete e.content[n][o]})}),e})(),t=new CustomEvent("mesoRender",{detail:e});window.dispatchEvent(t)},Pe=()=>{Ce={}};var Se=e=>{Pe();const{pageId:t,siteId:n,locale:o,variant:a,brand:u}=e,c=e=>{je(e.resources||{}).then(e=>{let t=0;if(e.forEach(e=>{e.errInfo&&(Re.error(s.a.RESOURCE_LOAD_FAIL,e.errInfo,e.errInfo),t+=1)}),t>0){const n=`Errors occurred loading resources (${t})`;Re.warn(n,{adResourcesFailed:e.filter(e=>void 0!==e.errInfo).map(e=>e.src),adResourcesLoaded:e.filter(e=>void 0===e.errInfo).map(e=>e.src),methodName:"loadResources"})}else Re.info("Resources loaded successfully",{adResourcesLoaded:e.map(e=>e.src),methodName:"loadResources"});De()})},d=void 0===a?`${t}/${n}/${o}`:`${t}/${n}/${o}/${a}`,l={};void 0!==u&&(l.brand=u);const m=i.a.getCookie("switchboard");null!==m&&(l.switchboard=m);const p=`${r.a.toolkit}/${d}${i.a.queryString(l)}`;window.performance&&window.performance.mark&&window.performance.mark("DisplayRequest"),i.a.promiseFetch(p,{headers:{Accept:"application/json"},mode:"cors"}).then(e=>e.json()).then(e=>{Re.perf("Display Request",{mark:"DisplayRequest",endpoint:p}),Ce=e,Ce.timestamp=Date.now(),void 0===e.error&&Object.keys(e).length>1?(Ie.initialize(e),$(e),Re.info("API call success",{url:p,methodName:"fetchAds"}),"complete"===i.a.getReadyState()||"loaded"===i.a.getReadyState()||"interactive"===i.a.getReadyState()?c(e):window.addEventListener("readystatechange",t=>{"interactive"===t.target.readyState&&c(e)})):(Ne("ErrorFetchingAdsConfiguration"),Re.error(s.a.CONFIG_API_FETCH_ERROR,e.error,{url:p,methodName:"fetchAds"})),window.meso.adcontext.observe("ads-delivery-interface",e=>e.includes("breakpoint"),()=>c(e))}).catch(e=>{Ne("FetchAdsConfigurationRequestBlockedOrTimeout"),Re.error(s.a.CONFIG_API_FETCH_ERROR,e,{url:p,methodName:"fetchAds"})})},Le=De,Me=Pe;function Be(e){(e||window.utag_data&&void 0!==window.utag_data.loggedUser&&null!==window.utag_data.loggedUser&&""!==window.utag_data.loggedUser&&("number"==typeof window.utag_data.loggedUser&&-1!==window.utag_data.loggedUser||"string"==typeof window.utag_data.loggedUser&&""!==window.utag_data.loggedUser.trim()&&"guest"!==window.utag_data.loggedUser.toLowerCase())||function(){const e=window.utag_data;return!!(e&&e.customerId&&parseInt(e.customerId,10)>0)}())&&function(){const e=document.querySelector("#audience-pixel");e&&e.remove();const t=1e13*Math.random(),n=document.createElement("img");n.src=`https://pubads.g.doubleclick.net/activity;dc_iu=/23171577/DFPAudiencePixel;ord="${t}";dc_seg=907193633?`,n.style="width:1px; height:1px; border:0; position: fixed; bottom: 0; left: 0",n.id="audience-pixel",document.body.appendChild(n)}()}const Ue=e=>{void 0===e.canSell||e.canSell||("complete"===document.readyState?Be(e.isUserLoggedIn):window.addEventListener("load",()=>{Be(e.isUserLoggedIn)}))};let $e=null;const Ge={info:{},warn:{},error:{},trackEvent:{},trackAction:{}},qe=e=>{if(null!==$e){if(e&&e.type)switch(e.type){case"info":$e.info(e.message||"",e.extra||void 0);break;case"warn":$e.warn(e.message||"",e.extra||void 0);break;case"error":$e.error(e.message||"",e.extra||void 0);break;case"track-event":$e.trackEvent(e.name,e.vars,e.events);break;case"track-action":$e.trackAction(e.name,e.vars,e.events);break;default:console.log(e.message)}}else console.warn("Logging queue executed before logger initialized.")};var Ve=e=>{(e=>{Object.keys(Ge).forEach(t=>{e&&e[t]&&"function"==typeof e[t]||console.warn(`Missing ${t} method on passed logger interface.`)})})(e),$e=e,window.meso=window.meso||{},window.meso.logging=window.meso.logging||[],window.meso.logging.isEventQueue||(window.meso.logging=Object(l.createEventQueue)(qe,window.meso.logging))};var ze=class{constructor(){this._count=0,this._events={}}add(e,t={}){if("function"!=typeof e)throw new Error("Targeting notify requires a function for a callback.");const n=this._count,r=()=>delete this._events[n];return this._events[n]=[e,t,r],this._count+=1,r}notify(...e){Object.keys(this._events).forEach(t=>{const[n,r,o]=this._events[t];n(...e),r.runOnce&&o()})}get events(){return this._events}};class Qe{constructor(e){this.watchers=new ze,this.requirement=e}requiresUpdate(e){return this.requirement(e)}notify(e){this.watchers.notify(e)}add(e,t={}){return this.requiresUpdate(Object.keys(t))&&e(t),this.watchers.add(e)}}var We=class{constructor(e){this.obj=e||{},this.changelist=[],this._registeredObservers={}}diff(e){const t=[];for(const[n,r]of Object.entries(e))n in this.obj&&this.obj[n]===r||t.push(n);return t}update(e){const t=this.diff(e);if(t.length>0){Object.assign(this.obj,e);const n=JSON.stringify(this.obj);Object.values(this._registeredObservers).forEach(e=>{e.requiresUpdate(t)&&e.notify(JSON.parse(n))})}}get value(){return this.obj}observe(e,t,n){return e in this._registeredObservers||(this._registeredObservers[e]=new Qe(t)),this._registeredObservers[e].add(n,this.obj)}};const He=new We({}),Xe=Object(o.b)("meso-events");function Je(){Me(),window.dispatchEvent(new CustomEvent("mesoClear"))}function Ke(e){if(e.hasOwnProperty("canTrack")&&(b("canTrack",e.canTrack),window&&window.meso&&window.meso.privacy&&(window.meso.privacy.canTrack=e.canTrack),Xe.info("Initialized target received",{methodName:"fetchAdsAndRender"})),e.hasOwnProperty("canSell")&&b("canSell",e.canSell),e.pageId&&e.siteId&&e.locale){const t={siteId:e.siteId,pageName:e.pageId,locale:e.locale,variant:e.variant||"default",brand:e.brand||"default"};o.a.setSessionConfig({siteId:e.siteId,pageId:e.pageId,variant:t.variant,locale:e.locale,brand:t.brand}),Xe.info("AdsBlock Status",{isAdsBlocked:window.adblock}),window.meso.adcontext=window.meso.adcontext||[],window.meso.adcontext.push(t),He.update(e),Se(e)}}function Ye(e){if(null!==e&&"object"==typeof e)switch(e.siteId&&(e.siteId=""+e.siteId),e.type){case"target":Je(),Ke(e),Ue(e);break;case"render":Le();break;case"clear":Je();break;case"logger":Ve(e.logger||null);break;default:Xe.warn(s.a.INITIALIZE_EVENT_INVALID,{data:{...e},description:e.type?e.type+" is invalid initialize type":"'type' key is absent from the targeting payload.",methodName:"initialize"}),Ke(e),Ue(e)}}var Ze={initEvents:function(){if(window.meso=window.meso||{},window.meso.initialize=window.meso.initialize||[],!window.meso.initialize.isEventQueue){const e=["clear","logger","target","render"];if(window.meso.initialize.forEach(e=>{null!==e&&"object"==typeof e&&(e.type=e.type||"target")}),window.initialize&&window.initialize.length){const{siteId:e,pageId:t,locale:n,variant:r}=window.meso.initialize.find(e=>"target"===e.type);window.meso.pageInfo={siteId:e,pageId:t,locale:n,variant:r}}window.meso.initialize=Object(l.createPrioritizedEventQueue)(Ye,window.meso.initialize,e,{limit:1,observable:He})}}};const et=["mesoRender"];var tt=()=>{i.a.getWindow()&&et.forEach(e=>{new CustomEvent(e)})};const nt=new We({}),rt=e=>{nt.update(e)},ot=()=>Object.assign({},nt.value);var it=()=>{window.meso=window.meso||{},window.meso.adcontext=window.meso.adcontext||[],window.meso.adcontext.isEventQueue||(window.meso.adcontext=Object(l.createEventQueue)(rt,window.meso.adcontext,{observable:nt}),window.meso.adcontext.getAdContext=ot)};var st=()=>{i.a.getWindow()&&(window.meso=window.meso||{},window.meso.privacy=window.meso.privacy||{},window.meso.privacy.getAll=v,window.meso.privacy.get=E)};const at=()=>{it(),st(),Ze.initEvents(),tt()};n(16);const ut=()=>{if(i.a.checkEmail(i.a.getLocationHref())){Object(o.b)("logger").error(s.a.EMAIL_FOUND_IN_URL,new Error("Email included in URL"),{methodName:"checkEmail"})}else c(at)};ut()}]);
//# sourceMappingURL=ads-loader.js.map